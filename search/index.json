[{"content":"çŸ³å®¶åº„\u0026mdash;-5å¤©4å¤œè¡Œ è¿™ä¹Ÿç®—æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å¥½å¥½ä½“éªŒåŒ—æ–¹ç¯å¢ƒå’Œé‡è§åŒ—æ–¹äººæ°‘ç”Ÿæ´»ã€‚ä¸»çº¿ä»»åŠ¡æ˜¯æ¥å‚åŠ 2025å¹´ä¸­å›½æœºå™¨äººå¤§èµ›ï¼Œæ”¯çº¿æ˜¯æ¥æ„Ÿå—ä¸€ä¸‹åŒ—æ–¹äººæ°‘çš„ç”Ÿæ´»ï¼Œç¾é£Ÿï¼Œæ™¯è‰²ã€‚æ€»ç»“æ„Ÿå—æ˜¯äººéƒ½å¾ˆçƒ­å¿ƒå–„è‰¯ï¼Œç¾é£Ÿä¹Ÿæ˜¯çœŸçš„å¥½åƒï¼å°±æ˜¯10æœˆä»½çš„å¤©å¤ªå†·äº†ï¼Œè€Œä¸”å¹çš„é£å¾ˆå¹²ï¼Œèƒ½å¾ˆæ˜æ˜¾æ„Ÿå—å‡ºæ¥è·Ÿå—æ–¹è¿™è¾¹çš„å†¬å¤©çš„å†·ä¸æ˜¯è¿™æ ·çš„å¹²å†·ã€‚çªç„¶æƒ³åˆ°è§‰å¾—å¯èƒ½æ˜¯å—æ–¹æ˜¯â€œå‡‰â€ï¼ŒåŒ—æ–¹æ‰æ˜¯â€œå†·â€ï¼(èƒ¡è¯è¾ƒå¤šï¼Œå®‰å¿ƒäº«ç”¨ğŸ™‚â€â†•ï¸)\n10æœˆ15æ—¥ å¯ç¨‹ ä¾æ—§15ä¸ªå°æ—¶çš„ç¡¬åº§ç«è½¦ã€‚15å·ä¸‹åˆ5ç‚¹èµ¶åˆ°ç«è½¦ç«™å¤§å®¶ä¸€èµ·ä¸Šè½¦ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯åå¤ªå¤šæ¬¡äº†ï¼Œè¥¿å®‰çš„18ä¸ªå°æ—¶ï¼ŒçƒŸå°çš„24ä¸ªå°æ—¶ã€‚å·²ç»æ²¡æœ‰é‚£ä¹ˆææƒ§ï¼Ÿæˆ–è€…æ²®ä¸§ï¼Ÿè¯´ä¸ä¸Šæ¥ã€‚è¿™æ¬¡æ€»å…±å»äº†10ä¸ªäººï¼Œåœ¨è½¦ä¸Šæ‰“äº†ä¼šå„¿å°æ¸¸æˆï¼Œæ‰“ä¼šå„¿æ‰‘å…‹ç‰Œï¼Œæ—¶é—´ä¹Ÿæ…¢æ…¢è¿‡å»äº†ã€‚ä¹Ÿæ²¡æœ‰å¾ˆç—›è‹¦å¯¹å§ï¼Ÿä¸è¿‡åœ¨è½¦ä¸Šåç€ç¡ç€çœŸçš„å¥½ä¸èˆ’æœï¼Œåçš„å±è‚¡ç—›ã€‚ä¾ç¨€è®°ç€å¥½åƒå°±é‚£ä¹ˆé åº§ä½ä¸Šçœ¯ä¼šå„¿ï¼Œåœ¨æ¡Œè§’å•æ‰‹è¶´ä¼šå„¿ï¼Œè¿·ç³Šï¼Œè¿·ç³Šåˆ°äº†16å·æ—©ä¸Š5ç‚¹å¤šã€‚è„‘ç»†èƒé‡æ–°å¼€å§‹è¿è½¬ï¼ŒæŠ¬çœ¼é—´çªç„¶å‘ç°ä¸€æŠ¹æš—äº®çº¢åœ¨è½¦çª—çš„é‡Œé¢ï¼Œç¬é—´ç¡®è®¤ç²¾ç¥æ¸…é†’ã€‚çœ‹åˆ°å¤–é¢çš„è§†é‡ä¹Ÿå˜å®½ï¼Œå‡ å¤„æˆ¿å±‹å±‹é¡¶å˜å¹³ï¼Œæˆ‘çŸ¥é“æˆ‘ä»¬åº”è¯¥ä¸åœ¨å—æ–¹äº†ã€‚æ˜¯æ™¨èµ·çš„å¤ªé˜³ã€‚é€è¿‡æœ‰å‡ å¤„æ–‘ç‚¹çš„çª—æˆ·æˆ‘çœ‹åˆ°é‚£ä¸€çº¿çº¢ï¼Œæˆ‘ä¸€æ—¶å¾ˆéš¾å½¢å®¹ä¸Šæ¥ï¼Œäºæ˜¯äºŒè¯æ²¡è¯´æŠŠæ‰‹æœºæ‹¿å‡ºæ¥å°†å®ƒè®°å½•åœ¨äº†æˆ‘çš„ç…§ç‰‡é‡Œã€‚(æˆ‘çŸ¥é“ï¼Œäººçš„è®°å¿†æ˜¯æœ‰é™çš„ï¼Œå‘ç”Ÿè¿‡çš„äº‹ï¼Œé‡åˆ°å¤ªå¤šçš„æ™¯ï¼Œé‡åˆ°å¤ªå¤šçš„äººï¼Œå¦‚æœæˆ‘10å¹´20å¹´æƒ³èµ·æˆ‘åˆè¯¥ä»ä½•æƒ³èµ·å‘¢ï¼Ÿåˆæˆ–æ˜¯æˆ‘ç»™çœ‹åˆ°è¿™é‡Œçš„äººæˆ‘åˆè¯¥æ€ä¹ˆå…±äº«å¿ƒæƒ…å‘¢ï¼Ÿæˆ‘ç°åœ¨æ‰¾åˆ°çš„ç­”æ¡ˆæ˜¯ç”¨ç…§ç‰‡ä¸­çš„åƒç´ æ¥è®°å½•ä¸‹æ¯ä¸€ä¸ªæˆ‘çš„å¿ƒæƒ…ç¬é—´ï¼)ä½†æ˜¯æœŸé—´æœ‰å¥½å¤šæ•°é®æŒ¡äº†ï¼Œå¯æ˜¯æˆ‘è¿˜æ˜¯è¿…é€ŸæŠ“ä½äº†å®ƒçš„â€œå±•ç¤ºâ€æ—¶é—´â˜ºï¸ã€‚\n10æœˆ16æ—¥ æŠµè¾¾ 16å·ä¸Šåˆçš„9ç‚¹å·¦å³æŠµè¾¾çŸ³å®¶åº„ç«™ï¼Œæ²¡æ¥çš„åŠçˆ¬å‡ºåœ°é¢ï¼Œæ¥åˆ°åœ°é“ç«™å£é©¬ä¸åœè¹„èµ¶å¾€çŸ³å®¶åº„ä¼šå±•ä¸­å¿ƒï¼Œ(æ¯”èµ›èµ›åœºéœ€è¦å…ˆå½“å¤©æŠ¥é“åŠç†Ÿæ‚‰åœºé¦†)ã€‚åˆ°ä¼šå±•ä¸­å¿ƒç«™å‡ºåœ°é“ç«™çš„ç¬é—´ç¬¬ä¸€çœ¼å æ»¡æˆ‘çš„çœ¼ç›è§†é‡å†…å®¹å°±æ˜¯ä¸€åå¤§é›¾ã€‚çœŸçš„å°±æ˜¯å¾ˆæ˜æ˜¾æ„Ÿå—å‡ºæ¥çš„å†·ï¼Œæ„Ÿè§‰å½“å¤©åº”è¯¥æ˜¯æ™´å¤©ï¼Œæ­£å¸¸æ˜¯èƒ½çœ‹åˆ°å¤ªé˜³çš„ï¼Œä½†æ˜¯æ»¡çœ¼å‘è¿œå¤„çœ‹å°±åªå‰©ä¸‹â€œé›¾â€ã€‚åˆ‡èº«ä½“ä¼šäº†é‚£è¾¹çš„ç©ºæ°”ç¯å¢ƒç¡®å®å¾ˆç¬¦åˆé‡å·¥ä¸šåŸå¸‚çš„â€œåˆ»æ¿å°è±¡â€ã€‚å½“å¤©å°±äº‹æ­£å¸¸åœ°ç­¾åˆ°ç†Ÿæ‚‰ï¼Œè¿™æ¬¡èµ›åœºçš„åœºé¦†å¾ˆå¤§ï¼Œä½†æ˜¯ä¹ŸæŒºæ–¹ä¾¿ï¼Œä¸åƒä¸Šæ¬¡ä¸“é¡¹èµ›åœ¨å­¦æ ¡æ¯ä¸ªèµ›åœºè¦å»ä¸åŒçš„æ¥¼è¿˜è¦çˆ¬æ¥¼æ¢¯ï¼Œå¤ªéº»çƒ¦ã€‚ä¹Ÿå‚è§‚çœ‹åˆ°å¾ˆå¤šå…¶ä»–çš„èµ›é¡¹ï¼ŒæŒºå¥½ï¼Œæˆ‘çœ‹åˆ°çš„ä¹Ÿå°±åªå‰©æŒºå¥½çš„ã€‚åŒæ ·ä¹Ÿçœ‹åˆ°äº†è½¦å‹çš„æ¬è¿èµ›é“åœºåœ°ï¼Œæœ‰æ„Ÿæ…¨ä½†ä¹Ÿå¾ˆå¿«æ²¡äº†è¿™è‚¡æ„Ÿæ…¨ã€‚å½“å¤©æˆ‘ä¹Ÿæ˜¯å¹³å¸¸ç»™å¤§å®¶æ‰“æ‰“æ‚ï¼Œæ¬æ¬ä¸œè¥¿ï¼Œçœ‹å¥½å„ç»„çš„è¿›åº¦çŠ¶å†µã€‚æ„å¤–æƒ…å†µå‘ç”Ÿåœ¨å½“å¤©çš„æ™šä¸Šå»é…’åº—å…¥ä½ï¼ŒåŠç†å…¥ä½æ—¶å’Œæˆ‘ä»¬è¯´æ²¡æœ‰æˆ¿é—´äº†ï¼Œè¦è®©æˆ‘ä»¬è·Ÿå…¶ä»–æˆ¿é—´åè°ƒï¼ŒåŸæœ¬æˆ‘ä»¬å®šçš„3é—´æˆ¿ï¼Œç»“æœæœ€ç»ˆé…’åº—é‚£è¾¹äººå‘˜å£ä¸Šè¯´çš„â€œç»™æˆ‘ä»¬å‡æˆ¿é—´â€ï¼Œæˆ‘ä»¬7ä¸ªç”·ç”Ÿä½å¥¹æ‰€è°“çš„â€œè±ªåå¥—æˆ¿â€ï¼Œå…¶å®æˆ¿é—´éå¸¸å°ï¼Œé‡Œé¢åªæœ‰ä¸‰å¼ åºŠï¼Œä¸€ä¸ªå«ç”Ÿé—´ï¼Œæ€»å…±ä¸è¶…è¿‡ä¸¤ä¸ªæˆ¿é—´çš„å¤§å°ã€‚æˆ‘ä»¬è·Ÿå¥¹æ²Ÿé€šäº†å¾ˆä¹…ï¼Œå½“æ—¶ä¹Ÿå·²ç»æ¥è¿‘æ™šä¸Š10ç‚¹ï¼Œå¤§å®¶ç´¯äº†ä¸€å¤©æ²¡ä¼‘æ¯å¥½ï¼Œæ— å¥ˆå®åœ¨ä¸æƒ³æŠ˜è…¾æ¢é…’åº—äº†ã€‚æœŸé—´è¿˜æœ‰éå¸¸å¤šæ¯›è¯­(åº”ç”¨èµ£å·è¯è¯»æ­¤â€œæ¯›â€å“¦ï¼Œè€ƒè™‘åˆ°æœªæˆå¹´å­©å­ä¸‡ä¸€ä¸å°å¿ƒçœ‹åˆ°æ­¤å¤„çš„åæ§½ä¼šä¸ä¼šä¸å¥½å‘¢ï¼ŸğŸ¤«)çš„åœ°æ–¹ï¼Œæ­¤å¤„çœŸçš„çœç•¥å‡ åƒå­—çš„æƒ…ç»ªå‘è¨€!ä¹Ÿå‘Šè¯«å¤§å®¶åœ¨å¤–é¢ç¢°è§è¿™æ ·å”¬äººå·®åŠ²çš„é…’åº—è‡ªå·±æ€åº¦å¼ºç¡¬ä¸€ç‚¹ï¼Œèµ¶ç´§ï¼è·‘ï¼(åç»­å‡ å¤©æˆ‘ä»¬ä½çš„éƒ½éå¸¸éš¾å—ï¼Œæ‡’å¾—è´¹ç¬”å­—å†åæ§½äº†ï¼)\n10æœˆ17æ—¥ è°ƒè¯• æ‹–èµ·æ²‰é‡çš„èº¯ä½“ï¼Œè¿˜æœªæ¥å¾—åŠæ¶ˆæ•£å‰ä¸€å¤©çš„ç–²æƒ«å°±åŒ†å¿™7ç‚¹å¤šåˆèµ¶å¾€ä¼šåœºé™ªåŒå¤§å®¶ä¸€èµ·è°ƒè¯•ï¼Œè¿™å¤©è¿˜ä¸‹äº†ç‚¹å°é›¨ï¼Œæ›´å†·äº†ï¼Œâ€œä¸€åœºç§‹é›¨ä¸€åœºå¯’â€ï¼Œä¸è®°å¾—æ˜¯é‚£æ—¶å€™è½¦ä¸Šå¸æœºè°è¯´äº†ä¸€å˜´ğŸ¤§ã€‚å¯¹äºé‚£å¤©çš„è°ƒè¯•è®°å¾—çš„å·²ç»éå¸¸å°‘äº†ï¼Œä¸ºæ•°ä¸å¤šçš„å°è±¡å°±æ˜¯ç»™å¤§å®¶è°ƒè¯•ååŠ©æ‹¿ä¸œè¥¿ï¼Œæè§£å†³æ€è·¯ï¼Œå¸®å¤§å®¶ç‚¹å¤–å–æ‹¿å¤–å–ï¼Œçº¯æ‰“æ‚ğŸ¥±ã€‚ä½†è¿˜æ˜¯å¥½ç´¯ï¼Œå³ä½¿è¿™æ¬¡ä¸æ˜¯æˆ‘ä¸»è¦å‚èµ›ï¼Œä½†è¿˜æ˜¯åœ¨æ„Ÿè§‰å¥”èµ°äºå››å¤„ï¼Œè…¿èµ°äº†å¾ˆå¤šã€‚\n10æœˆ18æ—¥ æ¯”èµ› è¿™æ¬¡æ¯”èµ›ä¸»è¦æ˜¯åˆ†ä¸¤å¤©ï¼Œ18å·å’Œ19å·ã€‚18å·å½“å¤©æ˜¯èˆè¹ˆï¼ŒåŒ»ç–—å’ŒæœåŠ¡ç»„éœ€è¦æ¯”èµ›ï¼Œæˆ‘ä¸»è¦åœ¨åŒ»ç–—ç»„è¿™è¾¹å¸®å¿™ç»™ä»–ä»¬æ¬ä¸œè¥¿æä¾›éƒ¨åˆ†é—®é¢˜è§£å†³æ–¹æ¡ˆï¼Œå¸®ä»–ä»¬æ¢³ç†åˆ†æé—®é¢˜ï¼Œå¾€å¾€å‚èµ›çš„æ—¶å€™æˆ‘ä¹Ÿä¸èƒ½ç›´æ¥å‚ä¸ï¼Œä»–ä»¬æœ¬äººå‚èµ›çš„æ—¶å€™åœ¨ç´§å¼ æ··ä¹±çš„æƒ…å†µä¸‹åè€Œæœ€éœ€è¦äººæ¥å¸®å¿™æ¢³ç†é—®é¢˜ã€‚æœåŠ¡ç»„é‚£è¾¹å‰ä¸€å¤©æ™šä¸Šè°ƒè¯•åˆ°å¥½æ™šï¼Œç¬¬äºŒå¤©å»çš„ä¹Ÿå¾ˆæ—©ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰å‘æŒ¥å¥½ï¼Œç„¶åæœ‰äººå¿ƒç†è½å·®æ„Ÿå¾ˆå¤§ã€‚å½“æ—¶å…¶å®æˆ‘éå¸¸èƒ½ç†è§£ä»–ä»¬çš„å¿ƒæƒ…ï¼Œæˆ‘å°±è·Ÿä»–åˆ†äº«å½“æ—¶çƒŸå°æˆ‘ç»“æŸçš„å¢ƒå†µï¼šä¸“é¡¹èµ›å½“æ—¶æˆ‘æ¯”èµ›ç»“æŸçš„é‚£ä¸€åˆ»æˆ‘å°±å·²ç»çŸ¥é“ç»“æœäº†ï¼Œæˆ‘ä»æ¯”èµ›åœºåœ°ä¸ŠæŠŠæˆ‘çš„è½¦æŠ±èµ·æ¥ï¼Œæœ€åä¸€ç‚¹ç†æ™ºæ¨åŠ¨ç€æˆ‘æ‹¿ç€è½¦å»ç»™è£åˆ¤æ£€æŸ¥pcbä¸å°ï¼Œæˆ‘éƒ½ä¸çŸ¥æˆ‘æ˜¯æ€ä¹ˆæ”¶æ‹¾çš„ç‰©æ–™ï¼Œä¸€å¥è¯æ²¡è¯´ï¼Œå½“æ—¶ä»€ä¹ˆæƒ…ç»ªä¹Ÿæ²¡æœ‰ï¼Œæ²¿ç€äººç¾¤çš„æ—è¾¹ï¼Œæˆ‘çœ¼ç¥ä¹Ÿä¸çŸ¥é“çœ‹å‘å“ªé‡Œï¼Œå°±æ˜¯å¾ˆç©ºç™½çš„æŠŠè½¦æ…¢æ…¢çš„è£…å¥½å°ç®±ï¼Œæ•´ç†å¥½å·¥å…·ç®±ï¼Œæ”¶æ‹¾å¥½ç”µè„‘åŒ…ï¼Œé åœ¨ç®±å­æ—è¾¹ä»€ä¹ˆä¹Ÿæ²¡è¯´ã€‚è‡³ä»Šæˆ‘ä¹Ÿä¸çŸ¥é“å½“æ—¶æ˜¯ä»€ä¹ˆå¿ƒæƒ…ï¼ŒåŒ…æ‹¬ç°åœ¨ï¼Œå†™ä¸‹è¿™äº›çš„æ—¶å€™æˆ‘ä¹Ÿæ˜¯ç©ºç™½çš„ï¼Œæ²¡æœ‰ä»»ä½•æƒ…ç»ªï¼Œæˆ–è®¸æ˜¯æˆ‘æ ¹æœ¬å°±ä¸çŸ¥é“æˆ‘åº”è¯¥æ˜¯è¦æœ‰ä»€ä¹ˆæƒ…ç»ªå‘¢ï¼Ÿæ„¤æ€’ï¼Ÿæ‚²ä¼¤ï¼Ÿå¯æƒœï¼Ÿæ¾æ°”ï¼Ÿè§£æ”¾ï¼Ÿé¢“åºŸï¼Ÿå¼€å¿ƒï¼Ÿéƒ½ä¸æ˜¯å§.å¯èƒ½æ˜¯è¿™ä¸¤å¹´è¿™ä¹ˆå¤šçš„æ—¥å¤œï¼Œè¿™ä¹ˆå¤šè°ƒè¯•ï¼Œè£…æœºï¼Œæ‹†æœºï¼Œæ­å»ºç¯å¢ƒã€‚ä»é€‰å‹æ¨¡å—ï¼Œä¸»æ§é€‰æ‹©ï¼Œè§†è§‰æ–¹æ¡ˆï¼Œæ‘„åƒå¤´åœ†ç¯è¯†åˆ«çš„å®ç°ï¼Œé¢œè‰²è¯†åˆ«çš„å®ç°ï¼Œé™€èºä»ªé€‰å‹ï¼Œæœºæ¢°è‡‚èˆµæœºè°ƒè¯•ï¼Œåº•ç›˜ç”µæœºçš„è°ƒè¯•ï¼Œæ•´ä½“ç»“æ„è®¾è®¡ï¼Œç‰©æ–™è£…è½½ç»“æ„è®¾è®¡ï¼Œè·Ÿå¤å­çˆªå­ç»“æ„è®¾è®¡ï¼ŒåŒ…æ‹¬å‰é¢é›†ç‰©æ–™ç»“æ„çš„è®¾è®¡æ”¹ç‰ˆï¼Œä¸»æ§freertosç³»ç»Ÿæ¶æ„æ­å»ºï¼Œé€šè®¯åè°ƒï¼Œä»»åŠ¡çº¿ç¨‹åè°ƒï¼Œæ¯”èµ›ä»»åŠ¡é€»è¾‘çš„å®Œå–„è°ƒè¯•ç­‰ç­‰ã€‚å®ƒçš„ä»»ä½•ä¸€ä¸ªç»†èŠ‚ï¼Œæˆ–è®¸æ˜¯è¿™ä¸¤å¹´æ¥æ€»çš„ç»“åˆï¼Œæˆ–è®¸å½“æ—¶çš„æˆ‘ç©ºç™½é‡Œé—ªè¿‡çš„æ˜¯å¦‚æ­¤ï¼Œæˆ–è®¸æˆ‘åœ¨æƒ³çš„æ˜¯æˆ‘çš„å‘½è¿é‡Œæœ¬å°±ä¸ç»“æœæ— ç¼˜ï¼Œæˆ–è®¸å¾ˆå¤šäº‹æƒ…æˆ‘éƒ½ä¸ç»“æœæ— ç¼˜ï¼Œæ¯”èµ›çš„ç»“æœæ›´æ˜¯ç‰¹åˆ«è€Œå·²ç½¢äº†ã€‚å®³ï¼Œä¸€ä¸å°å¿ƒå°±è·Ÿä»–è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä¸çŸ¥é“æˆ‘è¯´çš„å¦‚æ­¤ä¹‹å¤šä»–æœ‰æ²¡æœ‰å¬è¿›å»ï¼Œæˆ–è®¸æˆ‘æ˜¯æ¥å®‰æ…°ä»–çš„ï¼Œåˆæˆ–è®¸æˆ‘æ˜¯æ¥å®‰æ…°å½“åˆçƒŸå°çš„æˆ‘ï¼Œè¿™æˆ‘ä¸å¾—è€ŒçŸ¥ï¼Œä¹Ÿä¸æ„¿æ„å»çŸ¥é“äº†ã€‚å› ä¸ºæˆ‘çŸ¥é“è¿™äº›éƒ½æ˜¯æˆ‘çš„ä¸€éƒ¨åˆ†ï¼Œä»–ä»¬å·²ç»æ˜¯æˆ‘çš„ä¸€éƒ¨åˆ†äº†ã€‚èŠäº†ä¸€ä¼šå„¿æˆ‘å°±æè®®å»ä¹°è¿™é‡Œçš„çºªå¿µå“ï¼Œå°±æ˜¯æœ‹å‹åœˆå½“æ—¶å‘çš„é‚£äº›å¥½å¤šç”Ÿè‚–ç›²ç›’ï¼å½“æ—¶è¯´çš„æ˜¯10ä¸ªé‡Œé¢å¼€9ä¸ªç›²ç›’ï¼Œæˆ‘ä»¬ä¸€å…±ä¹°äº†3ç›’ï¼Œç»“æœæ‰€æœ‰çš„3ä¸ªï¼Œé‡Œé¢çš„æ‰€æœ‰çš„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå”¯ç‹¬å¼€ä¸å‡ºæ¥é‚£ä¸ªå…”å­ğŸ«¤ã€‚é‚£å¤©æ™šä¸Šåé¢å¤§å®¶æè®®å¥½å¥½åƒä¸€é¡¿ï¼ŒéšåæŒ‘äº†ä¸€å®¶é“é”…ç‚–ã€‚ç¬¬ä¸€æ¬¡å°ä½“éªŒäº†ä¸€ä¸‹åŒ—æ–¹çš„ä¹ ä¿—ç¾é£Ÿï¼Œç‰ç±³é¥¼è´´ç€ï¼Œä¸­é—´æ˜¯ä¸€ç§å¿˜äº†å«ä»€ä¹ˆæ²³æ¸…é±¼è¿˜æ˜¯å•¥æ¥ç€ï¼Œå‘³é“ç¡®å®ç‹¬ç‰¹ã€‚è¿˜å°äº†ä¸€ä¸ªæ²³åŒ—çš„åŒå­¦æ¨èçš„ä»–å°æ—¶å€™å¥½çˆ±å–çš„ç‰¹è‰²é¥®æ–™:æä»éœ²ï¼Œå‘³é“ç¡®å®å¥½â€œæ€ªâ€ï¼Œå¤§å®¶ç¡®å®éƒ½æœ‰ç‚¹å°ä¸æƒ¯ï¼Œè¯´ä¸ä¸Šæ¥çš„å‘³é“ï¼Œæœ‰æœºä¼šé‡åˆ°äº†ä¹Ÿå¯ä»¥å»è¯•è¯•ã€‚\n10æœˆ19æ—¥ æ¯”èµ› ç¬¬äºŒå¤©çš„èµ›ç¨‹ä¸»è¦è¿˜æ˜¯äººå½¢ç«é€Ÿå’ŒåŒ»ç–—ç»„çš„æ¯”èµ›ã€‚äººå½¢æ­£å¸¸å‘æŒ¥æœ¬æ¥è¿˜åœ¨æ‹…å¿ƒæ€•æœ‰å‡ºé—®é¢˜ï¼Œä½†è¿˜æ˜¯å®‰ç„¶æ— æ™åœ°æ‹¿ä¸‹äº†ä»–ä»¬ç»„çš„å† å†›ï¼å½“æ—¶å¬åˆ°è¿™ä¸ªæ¶ˆæ¯çš„æ˜¯ç®—æ”¾ä¸‹å¿ƒï¼Œä¹Ÿç®—æˆ‘ä»¬è¿™ä¸€ä»£ï¼Œè¿™ä¸€è¡Œäººè¾ƒä¸ºåœ†æ»¡çš„æ¯”èµ›å®Œç»“äº†å§ã€‚çœ‹ç€ä»–ä»¬æŠ±ç€å¥–æ¯ï¼Œæ‹¿åœ¨æ‰‹ä¸Šçš„æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰æ„Ÿè§¦.ç„¶ååŸæœ¬æˆ‘ä»¬å®šçš„æ˜¯3æ™šé‚£ä¸ªé…’åº—ï¼Œ19å·ä¸­åˆçš„é…’åº—ï¼Œæˆ‘ä»¬ä¸€åˆ»ä¹Ÿç­‰ä¸åŠå°±èµ¶ç´§æ”¶æ‹¾å®Œä¸œè¥¿æ¢æ–°çš„æ°‘å®¿äº†ã€‚åå®¿çš„é˜¿å§¨äººå¾ˆå¥½ï¼Œæˆ¿é—´ä¹Ÿå¥½å¤§ã€‚æˆ¿é—´çš„æˆ·å‹åŒ…æ‹¬æˆ¿é—´çš„ç»“æ„ï¼Œæ˜¯å®¢å…ä¸Šæœ‰ä¸€ä¸ªéœ²å¤©çš„æ¥¼æ¢¯ï¼ŒäºŒæ¥¼æ¥¼æ¢¯è½¬è§’æœ‰ä¸€ä¸ªæ¦»æ¦»ç±³ï¼ŒäºŒæ¥¼æ­£ä¸­é—´çš„æˆ¿é—´æ˜¯è½åœ°çª—ï¼Œå¯ä»¥çœ‹åˆ°æ¥¼ä¸‹æ²™å‘ï¼Œå¾ˆå®½æ•ï¼Œæ„Ÿè§‰è£…ä¿®çš„é£æ ¼ä¹Ÿå¾ˆå–œæ¬¢ã€‚åæ­£æ•´ä½“çš„æ„Ÿè§‰å°±å¾ˆå¥½ï¼Œå”¯ç‹¬å¯æƒœçš„å°±æ˜¯æ²¡æœ‰ç•™ä¸‹ç…§ç‰‡ã€‚ä¸­åˆæ­£è¦è§£å†³åˆé¥­ï¼Œå¬åå®¿é˜¿å§¨è¯´çŸ³å®¶åº„æœ‰ä¸€ä¸ªå¾ˆå‡ºåçš„åƒçš„æ˜¯å®‰å¾½æ¿é¢ï¼Ÿå®‰å¾½çš„ç‰ˆé¢åœ¨çŸ³å®¶åº„å‡ºäº†åï¼Œé‚£æˆ‘å¯è¦å»å°å°çœ‹ã€‚å°±åœ¨æ¥¼ä¸‹æœ‰ä¸€ä¸ªï¼Œç‚¹äº†ä¸€ä»½åŠ è…Šè‚ ã€‚çœŸçš„å¾ˆå¥½åƒï¼Œåæ­£é‚£ä¸ªè…Šè‚ æ˜¯ç»™æˆ‘é¦™è¿·ç³Šäº†ï¼Œé…ç€ä»–é‚£ä¸ªå®½é¢éå¸¸ä¸é”™ï¼Œæ„Ÿè§‰æ˜¯å¥½çš„åœ¨å“ªéƒ½ä¼šå¸å¼•äººï¼Œå—¯æ²¡é”™ã€‚ç„¶åå½“å¤©ä¸‹åˆæˆ‘ä»¬åŠç†å®Œå…¥ä½ï¼Œæ‰€æœ‰æ¯”èµ›éƒ½ç»“æŸäº†ï¼Œå‡†å¤‡å¥½å¥½æ”¾æ¾ã€‚æ™šä¸Šå°±å»äº†å°é¢å¤œå¸‚-æ­£å®šå•†å“å¤œå¸‚ã€‚ç¡®å®å¥½å¤šå°åƒï¼Œéƒ½æ˜¯äººï¼Œçœ‹è§æœ‰åƒèå­æ˜†è™«çš„ï¼Œæˆ‘æ˜¯å®åœ¨ä¸æ•¢å°ã€‚å°äº†é‚£è¾¹çš„å¤§æ²¹è¾¹ï¼Œå†»æ¢¨ï¼Œé€›äº†ä¸€ä¼šå„¿å°±å·®ä¸å¤šå›å»ä¼‘æ¯äº†ï¼Œå¤§å®¶é‚£å‡ å¤©ä¹Ÿå¿™ç€è°ƒè¯•æ¯”èµ›ï¼Œè¿˜æ˜¯å¥½å¥½ä¼‘æ¯å…»è¶³ç²¾ç¥å‡†å¤‡ç¬¬äºŒå¤©å¥½å¥½ç©ã€‚(æ‰¹æ–—ä¸€ä¸‹ï¼Œæ™šä¸Šå›å»å«ä»–ä»¬åšæ”»ç•¥ï¼Œç»“æœä»–ä»¬çš„å£ä¾›éƒ½å¾ˆç»Ÿä¸€ï¼šâ€œæˆ‘ä»¬ä¸€é”®è·Ÿéšâ€).\n10æœˆ20æ—¥ åƒç© æ—©ä¸Š7ç‚¹å¤šå°±èµ¶æ—©å¤§å®¶èµ·æ¥äº†ï¼Œå‡†å¤‡å»å°ä¸€å°è¿™è¾¹çš„ç‰¹è‰²æ—©é¤ï¼Œéå¾—æ¥è¯•è¯•äº†å°±æ˜¯ã€‚åˆ°äº†æ­£å®šå¤åŸé‡Œé¢ï¼Œä¸‹è½¦ï¼Œå†·ï¼Œé€è¿‡æˆ‘è¡£æœçš„å†·ã€‚è·Ÿç€åœ°å›¾æ‰¾äº†ä¸€ä¼šå„¿ï¼Œåˆ°äº†ã€‚çœ‹ç€é—¨é¢è¿˜æ˜¯ä¸€è‚¡å¤å¤è€é£ï¼Œå¤§å®¶ä¸€æ‹¥è¿›äº†åº—ï¼Œâ€œæ‚¨å¥½ï¼Œæˆ‘ä»¬è¦ä¸€ä»½ç¾Šè‚‰çƒ§éº¦å’Œä¸€ä»½ç‰›è‚‰ç‰›è‚‰çƒ§éº¦ï¼ŒåŠ ä¸€ä»½ç¾Šæ‚æ±¤â€ã€‚æ˜¯çš„ï¼Œå°±æ˜¯æ¥èµ¶æ—©åƒç‹å®¶çƒ§éº¦æ¥çš„ğŸ˜‹ã€‚è¿˜å»å¯¹é¢çš„æ—©é¤åº—é‡Œä¹°äº†ä¸€ä»½èƒ¡è¾£æ±¤ï¼Œå…¥å£æ˜¯ä¸€è‚¡èƒ¡æ¤’ç²‰çš„å‘³é“ï¼Œå¯¹ï¼Œç„¶åä¸€ç‚¹éº»éº»çš„ã€‚çƒ§éº¦å¥½åƒï¼Œçš®è–„ï¼Œå’¬ç€è¿˜æœ‰æ±¤æµå‡ºæ¥ï¼Œæ²¾ç‚¹é†‹ï¼Œå¥½åƒğŸ˜‹ã€‚åƒå®Œå¤§å®¶è‚šå­ä¹Ÿæš–ä¼šå„¿è¿‡æ¥ï¼Œå°±åœ¨å¤åŸé‡Œé¢èµ°èµ°é€›é€›ï¼Œè®°ä¸å¾—æ˜¯å…ˆå»äº†å“ªä¸¤ä¸ªçš„å¯ºï¼Œç„¶åèµ°åˆ°äº†èµµäº‘æ•…é‡Œï¼Œç»™ä»–ä»¬åšæ‘„å½±å¸ˆæ¥äº†ï¼Œæ‹äº†å¥½å¤šç…§ç‰‡(ä¸çŸ¥æ˜¯ä¸æ˜¯æˆ‘çš„éšè—å±æ€§ï¼Œæ…¢æ…¢å­¦ä¼šç»™å¤§å®¶æ‰¾è§’åº¦ï¼Œä¼šä¸€ç‚¹ç‚¹æ„å›¾ï¼Œä¹‹å‰æœ¬æ¥å°±æœ‰æƒ³å¥½å¥½å­¦æ‹ç…§å‘¢ï¼ŒåŒ…æ‹¬è¿™æ¬¡ä¸‰æ±Ÿæ ¡åŒºçš„é‚£å‡ ä¸ªå°å…„å¼Ÿï¼ŒçœŸçš„è§‰å¾—ä»–ä»¬äººæŒºå¥½çš„ã€‚ä¹‹å‰å°±æ˜¯åœ¨ä¸“é¡¹çš„è·¯ä¸Šç¢°ä¸Šäº†ï¼Œåœ¨åŒä¸€ä¸ªç«è½¦ï¼Œé€šä¸€èŠ‚è½¦å¢å‘¢ï¼Œè¿”ç¨‹ä¹Ÿæ˜¯ï¼ï¼å“ˆå“ˆå“ˆï¼Œæ‰€ä»¥è¯´ç¼˜åˆ†æœ‰æ—¶å€™è¿˜çœŸæ˜¯ï¼æˆ‘ä»¬æ„Ÿè§‰ä¹Ÿå¥½èŠçš„æ¥ï¼Œéƒ½æœ‰å¾ˆå¤šç±»ä¼¼çš„ç»å†å‘¢ï¼æ‰€ä»¥æˆ‘ä»¬å¸¸è¯´çš„å°±æ˜¯ï¼Œâ€œæˆ‘æ‡‚ä½ â€ã€‚çœŸçš„æœ‰ä¸€ç§â€œç›¸é‡æ¨æ™šâ€çš„æ„Ÿè§‰ï¼Œä¸æˆ³çš„ç›¸é‡å‘¢ï¼ç»™ä»–ä»¬æ‹ç…§çš„æ—¶å€™å°±åˆæ„Ÿè§‰æ˜¯ä¸æ˜¯æ‹æ‘„å±æ€§å¤§å‘ï¼Œç¨å¾®æ”¾ä¸€å¼ ï¼Œçº¯æ–°æ‰‹å‹¿å–·å‘¢ï¼ï¼hhh)ã€‚æ•…é‡Œé‡Œé¢æˆ‘å°±æ²¡å»äº†ï¼Œç„¶åå°±æ˜¯é€›å»äº†è£å›½åºœã€‚æ˜¯çš„ï¼Œçº¢æ¥¼æ¢¦é‡Œæ‰€è¯´çš„é‚£ä¸ªè£å›½åºœï¼Œå…¶å®æ˜¯å½“æ—¶è€ç‰ˆçº¢æ¥¼æ¢¦ç”µè§†å‰§çš„æ‹æ‘„åœ°ï¼Œèµ°èµ°åœåœã€‚å› ä¸ºè¦èµ¶ä¸‹åˆ5ç‚¹çš„ç«è½¦ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å†ç»§ç»­å¥½å¥½æ¢ç©¶ä¸€ä¸‹è¿™åº§å¤éƒ½äº†ï¼Œå°±å›å»æ”¶æ‹¾ä¸œè¥¿å¯ç¨‹å‡†å¤‡ç¦»å¼€äº†ã€‚åœ¨å»ç«è½¦ç«™çš„è·¯ä¸Šï¼Œé‡åˆ°ä¸€ä½è´§æ‹‰æ‹‰çš„å¸æœºï¼Œäººå¾ˆå¥½å‘¢ï¼Œè®©hjç»™åå®ƒè½¦å¢åé¢(åé¢ä»–å‡ºæ¥è¯´é‡Œé¢å°±åƒè¢«å…³åœ¨å°é»‘å±‹ï¼Œåˆå†·åˆæ™ƒï¼Œä¸€å‰¯è¢«äººéœ¸å‡Œçš„å¯æ€œæ„Ÿhhh)ï¼Œè·¯ä¸Šç»™æˆ‘ä»‹ç»çŸ³å®¶åº„å¤©æ°”å•Šï¼Œè¿™ä¸ªåœ°æ–¹å’‹æ ·ï¼Œå†å²ä»¥å‰æ˜¯å•¥å•Šï¼Œå¥½å¤šå¥½å¤š(è¿™æ¬¡å»æœ€å¤§çš„ä¸€ä¸ªä½“éªŒå°±æ˜¯åŒ—æ–¹äººæ°‘çš„è¿™ç§å¤§æ–¹ï¼Œè‡ªåœ¨ï¼Œçƒ­æƒ…çš„æ€§æ ¼æ˜¯çœŸçš„å¥½å¥½ï¼ŒçœŸçš„è¦å¥½å¥½ç»™ä»–ä»¬ç‚¹å¤§èµğŸ‘ï¸)ä½†æ˜¯æœ€åå¿«åˆ°ç«è½¦ç«™ï¼Œæˆ‘ä»¬æƒ³å»çš„æ˜¯ä¸œé—¨ï¼Œè·Ÿå¸æœºè¯´ï¼Œä»–è‡ªä¿¡åœ°è¯´â€œæˆ‘10åˆ†é’Ÿå°±èƒ½åˆ°é‚£é‡Œâ€ï¼Œç»™æˆ‘ä¸€ç§è«åçš„å¿ƒå®‰ï¼Œä½†æ˜¯åé¢å¸æœºå¯¼åˆ°çš„è¥¿ç«™å£ï¼Œç¡¬æ˜¯åœ¨é‚£é‡Œèµ°äº†åŠä¸ªå°æ—¶ï¼Œæˆ‘ç°åœ¨è¿˜è®°å¾—æˆ‘ä»¬åœ¨åŒä¸€ä¸ªè·¯å£ç»•è¿‡äº†ä¸¤éï¼Œæˆ‘ä¸€ç›´æ†‹ç€ä¸å¥½æ„æ€ç¬‘å‡ºå£°æ¥ï¼Œåˆæƒ³ç€åé¢çš„åŒä¼´è¿˜åœ¨é‚£ä¸ªé»‘æ¼†æ¼†çš„ç®±å­é‡Œä¸çŸ¥é“å•¥æƒ…å†µï¼Œä¸€ç›´åœ¨é‚£è¾¹è½¬å¼¯ç»•ç€ï¼Œä»–å°±åœ¨åé¢å·¦æ™ƒåˆæ™ƒğŸ¤£ğŸ¤£ã€‚ä¸‹é¢æ”¾ä¸€å¼ å½“æ—¶çš„èŠå¤©çœŸçš„ç»™æˆ‘çˆ†ç¬‘äº†ã€‚æœ€åå®åœ¨ä¸è¡Œæˆ‘å°±è®©ä»–ç»™æˆ‘ä»¬æ”¾åœ¨è·ç¦»æœ€è¿‘çš„è·¯è¾¹äº†ï¼Œå¸æœºä¸‹è½¦ç»™æˆ‘ä»¬å¸ä¸‹ä¸œè¥¿æ‹›å‘¼æˆ‘éƒ½æ²¡æ¥çš„åŠæ‰“ä»–å°±ä¸Šè½¦èµ°äº†ï¼Œæœ‰ä¸€ç§ç°æºœæºœçš„æç¬‘æ„ŸğŸ¤£ã€‚åé¢åœ¨è½¦ç«™é™„è¿‘ï¼Œæˆ‘è¯´ä¸€å®šè¦æ¥å°ä¸€å°é©´è‚‰ç«çƒ§ï¼åé¢æ‰¾äº†é™„è¿‘ä¸€å®¶ç‚¹äº†ä¸€ä»½ç–™ç˜©æ±¤å’Œé©´è‚‰ç„–å­ç«çƒ§ï¼ŒçœŸçš„å¥½åƒï¼Œä¸æ²¹é…æ—®æ²“æ±¤ä¸æˆ³ï¼åƒé¥±äº†çœ‹åˆ°æ—è¾¹æœ‰å®¶é¥¸çƒ™é¢é¦†ï¼Œæœ¬æ¥å°±åƒæ’‘äº†ï¼Œç¡¬æ˜¯ä¸‰ä¸ªäººç‚¹äº†ä¸€ä»½é¥¸çƒ™é¢ï¼Œå‘³é“ä¹Ÿå¥½ï¼Œç´ æ²¹é¦™ã€‚è¿˜æœ‰ç»™æˆ‘ä»¬å¸¦å›æ¥çš„é»„åº„æœˆé¥¼ï¼Œç‰¹åœ°æ‰“ç®—å¸¦å›æ¥å°å°ï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šè¿™ä¸ªç‰¹äº§çš„ç‰¹ç‚¹ï¼Œä½†æ˜¯å‘³é“ç¡®å®å¥½åƒï¼Œæˆ‘ä¹°çš„ç´«è–¯å’Œæ¿æ —éƒ½å¥½åƒï¼Œè¿˜é‚®äº†éƒ¨åˆ†å›å®¶ğŸ˜ã€‚\nå®Œç»“åˆ†äº« æ‰¬æ‰¬åˆæ´’æ´’ï¼Œèƒ¡è¯è¿ç¯‡çš„ä¸€æ¬¡ï¼Œå¾ˆæ–°çš„ä½“éªŒï¼Œç¬¬ä¸€æ¬¡ä»¥è¿™æ ·çš„æ–¹å¼ä»¥è¿™æ ·çš„å†…å®¹å°†æ—…è¡Œæ„Ÿå—è®°å½•(æˆ–è®¸è¿™å°±æ˜¯å½“åˆæˆ‘å†³å®šå°†è¿™ä¸ªåšå®¢ç½‘ç«™æ­å»ºå‡ºæ¥çš„åˆå¿ƒå«ä¹‰)ï¼Œä¸çŸ¥é“è®°å¾—åˆä¸åˆé€‚ï¼Œå†™çš„å†…å®¹æ–¹å¼å¥½ä¸å¥½ï¼Œæˆ‘ä¸çŸ¥é“ã€‚(å†™å®Œæˆ‘å‘ç°è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œç”¨ä¸åˆ°5kå­—å†…å®¹ï¼Œå°†5å¤©æ¥çš„æ—…ç¨‹åŸºæœ¬ä¸Šéƒ½ç™»è®°åœ¨å†ŒğŸ¤”æ–‡å­—ï¼ŒæŒºæœ‰æ„æ€)ä½†æ˜¯æˆ‘æƒ³ç°åœ¨ï¼Œç”¨ç…§ç‰‡å’Œæ–‡å­—å°†æ—¶é—´å’Œæ„Ÿå—å®šæ ¼ä¸‹ï¼Œæˆ–è®¸ä»¥åç»™æˆ‘ï¼Œç»™æˆ‘èº«è¾¹çš„æœ‹å‹åˆ†äº«ä¸‹è¿™äº›ç‚¹ç‚¹ç¬é—´ã€‚å› ä¸ºæˆ‘çŸ¥é“ï¼Œæˆ‘è®°å¿†ä¸­çš„è¿™äº›ç¬é—´éƒ½ä¼šéšç€æ—¶é—´è€Œé€æ¸æ¶ˆå¤±ï¼Œæ²¡æœ‰æ°¸æ’çš„å›å¿†ï¼Œæˆ‘çŸ¥é“è¿˜æœ‰æœªæ¥æ›´è¿œçš„äº‹æƒ…åœ¨ç­‰ç€æˆ‘ã€‚ç°åœ¨æˆ‘å°†ä»–ä»¬è®°å½•æš‚ç•™äº†ä¸‹æ¥ï¼Œè¿™æˆ–è®¸å°±æ˜¯æˆ‘å°†å®ƒä»¬å†™ä¸‹çš„æ„ä¹‰ï¼Œå†™ä¸‹çš„å¿ƒæƒ…æ„Ÿå—ï¼Œäº‹ä»¶äº‹ç‰©ï¼Œæˆ‘çš„ç¬¬ä¸€æ¬¡æ—…è¡Œç¢ç‰‡.å¥½äº†ï¼ŒçŸ³å®¶åº„-æˆ‘ä»¬æœ‰ç¼˜å†ä¼š.ğŸŒ\n","date":"2025-10-24T00:00:00Z","image":"https://prominsegsj.github.io/p/shijiazhuang/2_hu_37fb093f975cc18f.jpg","permalink":"https://prominsegsj.github.io/p/shijiazhuang/","title":"çŸ³å®¶åº„ä¹‹è¡Œ"},{"content":"ROS2 å­¦ä¹ ç¬”è®° æœ¬æ¬¡ROS2å­¦ä¹ ç¬”è®°å¼€å‘ç¯å¢ƒåŒæ­¥ä¸Šä¸€ç¯‡linuxå­¦ä¹ ç¬”è®°çš„è™šæ‹Ÿæœºubantu24.04.2ç³»ç»Ÿç‰ˆæœ¬ä»¥åŠROS2çš„jazzyç‰ˆæœ¬ä¸‹çš„è®°å½•ã€‚\nå¤§éƒ¨åˆ†æ˜¯æœ¬äººçš„å­¦ä¹ ç¬”è®°ï¼Œå­¦ä¹ è§†é¢‘ä¸»è¦æ˜¯é±¼é¦™ROSæœºå™¨äººä»–çš„çŸ¥è¯†ç‚¹å’Œè§†é¢‘å†…å®¹å¾ˆè¯¦ç»†ï¼ŒçœŸçš„æ˜¯åœ¨å°è¯\u0026quot;æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”\u0026quot;ã€‚æ­¤å¤–è¿˜ä¼šåŠ ä¸Šä¸€äº›ä¸ªäººç†è§£ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åŠ æ·±ç†è§£ï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒï¼\n3. ROS2å­¦ä¹ ç¬”è®° å¤§éƒ¨åˆ†æ˜¯æœ¬äººçš„å­¦ä¹ ç¬”è®°ï¼Œå­¦ä¹ è§†é¢‘ä¸»è¦æ˜¯é±¼é¦™ROSæœºå™¨äººä»–çš„çŸ¥è¯†ç‚¹å’Œè§†é¢‘å†…å®¹å¾ˆè¯¦ç»†ï¼ŒçœŸçš„æ˜¯åœ¨å°è¯\u0026quot;æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”\u0026quot;ã€‚æ­¤å¤–è¿˜ä¼šåŠ ä¸Šä¸€äº›ä¸ªäººç†è§£ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åŠ æ·±ç†è§£ï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒï¼\n3.1 ros2 run (1). å‘½ä»¤ros2 runä¼šä»ä¸€ä¸ªè½¯ä»¶åŒ…ä¸­å¯åŠ¨ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼š ros2 run \u0026lt;package_name\u0026gt; \u0026lt;executable_name\u0026gt; (2). è§£é‡Šï¼š egï¼šè¦è¿è¡Œturtlesimï¼Œè¯·æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š ros2 run turtlesim turtlesim_node turtlesimçª—å£å°†ä¼šæ‰“å¼€ è¿™é‡Œï¼ŒåŒ…åæ˜¯ ä½¿ç”¨ turtlesim ï¼Œå¯æ‰§è¡Œæ–‡ä»¶åæ˜¯ turtlesim_node ç„¶è€Œï¼Œæˆ‘ä»¬è¿˜ä¸çŸ¥é“èŠ‚ç‚¹åç§°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ ros2 node list å‘½ä»¤æŸ¥æ‰¾èŠ‚ç‚¹åç§°ã€‚ 3.2. ros2 node list (1). ros2 node list å‘½ä»¤å°†æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„èŠ‚ç‚¹çš„åç§°ã€‚å½“æ‚¨æƒ³ä¸èŠ‚ç‚¹è¿›è¡Œäº¤äº’æˆ–è€…ç³»ç»Ÿè¿è¡Œå¤šä¸ªèŠ‚ç‚¹æ—¶éœ€è¦è·Ÿè¸ªå®ƒä»¬æ—¶ï¼Œè¿™ç‰¹åˆ«æœ‰ç”¨ã€‚ (2). è§£é‡Šï¼š (A). åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼ŒåŒæ—¶ turtlesim ä»åœ¨è¿è¡Œï¼Œè¯·è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š ros2 node list (B). ç»ˆç«¯å°†è¿”å›èŠ‚ç‚¹åç§°ï¼š /turtlesim (C). å†æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ teleop èŠ‚ç‚¹ï¼š ros2 run turtlesim turtle_teleop_key ã€åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¬¡å¼•ç”¨äº†â€œturtlesimâ€è½¯ä»¶åŒ…ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åä¸ºâ€œturtle_teleop_keyâ€çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‘\n(D). è¿”å›åˆ°ä¹‹å‰è¿è¡Œros2 node listçš„ç»ˆç«¯ï¼Œå†æ¬¡è¿è¡Œè¯¥å‘½ä»¤ã€‚ä½ å°†ä¼šçœ‹åˆ°ä¸¤ä¸ªæ´»åŠ¨èŠ‚ç‚¹çš„åç§°ï¼š\n/turtlesim /teleop_turtle 3.3. é‡æ˜ å°„ (1). é‡æ˜ å°„ï¼šå…è®¸ä½ é‡æ–°åˆ†é…é»˜è®¤èŠ‚ç‚¹å±æ€§ï¼Œå¦‚èŠ‚ç‚¹åç§°ã€è¯é¢˜åç§°ã€æœåŠ¡åç§°ç­‰ï¼Œä»¥è‡ªå®šä¹‰çš„å€¼ã€‚åœ¨ä¸Šä¸€ä¸ªæ•™ç¨‹ä¸­ï¼Œä½ åœ¨turtle_teleop_keyä¸Šä½¿ç”¨äº†é‡æ˜ å°„æ¥æ”¹å˜cmd_velè¯é¢˜å’Œç›®æ ‡èŠ‚ç‚¹ä¸ºturtle2ã€‚ (2). è§£é‡Šï¼š - (A). ç°åœ¨ï¼Œè®©æˆ‘ä»¬é‡æ–°åˆ†é… /turtlesim èŠ‚ç‚¹çš„åç§°ã€‚åœ¨ä¸€ä¸ªæ–°çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š - ros2 run turtlesim turtlesim_node \u0026ndash;ros-args \u0026ndash;remap __node:=my_turtle - (B). ç”±äºæ‚¨å†æ¬¡è°ƒç”¨ros2 run å¯åŠ¨äº†turtlesimï¼Œå°†ä¼šæ‰“å¼€å¦ä¸€ä¸ªturtlesimçª—å£ã€‚ä½†æ˜¯ï¼Œç°åœ¨å¦‚æœæ‚¨è¿”å›åˆ°ä¹‹å‰è¿è¡Œros2 node listçš„ç»ˆç«¯ï¼Œå¹¶å†æ¬¡è¿è¡Œè¯¥å‘½ä»¤ï¼Œæ‚¨å°†çœ‹åˆ°ä¸‰ä¸ªèŠ‚ç‚¹åç§°ï¼š - /my_turtle - /turtlesim - /teleop_turtle 3.4. ros2èŠ‚ç‚¹ä¿¡æ¯ (æ—¢ç„¶æ‚¨çŸ¥é“äº†èŠ‚ç‚¹çš„åç§°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¿é—®æœ‰å…³å®ƒä»¬çš„æ›´å¤šä¿¡æ¯)\nros2 node info \u0026lt;node_name\u0026gt; (ä¾‹). è¦æŸ¥çœ‹æ‚¨æœ€æ–°çš„èŠ‚ç‚¹my_turtleï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š ros2 node info /my_turtle ros2 node infoè¿”å›è®¢é˜…è€…ã€å‘å¸ƒè€…ã€æœåŠ¡å’ŒåŠ¨ä½œçš„åˆ—è¡¨ï¼Œå³ä¸è¯¥èŠ‚ç‚¹è¿›è¡Œäº¤äº’çš„ROSå›¾è¿æ¥ã€‚è¾“å‡ºåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /my_turtle Subscribers: /parameter_events: rcl_interfaces/msg/ParameterEvent /turtle1/cmd_vel: geometry_msgs/msg/Twist Publishers: /parameter_events: rcl_interfaces/msg/ParameterEvent /rosout: rcl_interfaces/msg/Log /turtle1/color_sensor: turtlesim/msg/Color /turtle1/pose: turtlesim/msg/Pose Service Servers: /clear: std_srvs/srv/Empty /kill: turtlesim/srv/Kill /my_turtle/describe_parameters: rcl_interfaces/srv/DescribeParameters /my_turtle/get_parameter_types: rcl_interfaces/srv/GetParameterTypes /my_turtle/get_parameters: rcl_interfaces/srv/GetParameters /my_turtle/list_parameters: rcl_interfaces/srv/ListParameters /my_turtle/set_parameters: rcl_interfaces/srv/SetParameters /my_turtle/set_parameters_atomically: rcl_interfaces/srv/SetParametersAtomically /reset: std_srvs/srv/Empty /spawn: turtlesim/srv/Spawn /turtle1/set_pen: turtlesim/srv/SetPen /turtle1/teleport_absolute: turtlesim/srv/TeleportAbsolute /turtle1/teleport_relative: turtlesim/srv/TeleportRelative Service Clients: (none) Action Servers: /turtle1/rotate_absolute: turtlesim/action/RotateAbsolute Action Clients: (none) 3.5. ç¼–è¯‘è¿è¡ŒC++æ–‡ä»¶ (1). å…ˆåœ¨ç›®å½•ä¸‹ç¼–å†™CMakeFiles.txtï¼š\nç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 cmake_minimum_required(VERSION 3.8) project(ros2_cpp) add_executable(ros2_cpp_node ros2_cpp_node.cpp) find_package(rclcpp REQUIRED) # ç›´æ¥æŸ¥æ‰¾åˆ°å¯¹åº”çš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ message(STATUS ${rclcpp_INCLUDE_DIRS}) #å¤´æ–‡ä»¶åŠrclcppä¾èµ–çš„å¤´æ–‡ä»¶ message(STATUS ${rclcpp_LIBRARIES}) #åº“æ–‡ä»¶åŠrclcppä¾èµ–çš„åº“æ–‡ä»¶ target_include_directories(ros2_cpp_node PUBLIC ${rclcpp_INCLUDE_DIRS}) #å¤´æ–‡ä»¶åŒ…å¥½åˆ°ros2_cpp_nodeæ–‡ä»¶å†… target_link_libraries(ros2_cpp_node ${rclcpp_LIBRARIES}) #åº“æ–‡ä»¶é“¾æ¥åˆ°ros2_cpp_nodeæ–‡ä»¶å†… (2). å†åœ¨å½“å‰ç›®å½•ä¸‹è¿è¡Œç»ˆç«¯å‘½ä»¤ï¼š\ncmake . make ã€ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ–‡ä»¶ä¸ºç»¿è‰²çš„ï¼Œç›´æ¥ç»ˆç«¯è¾“å…¥æ—¢å¯è¿è¡Œã€‘ 3.6. åˆ›å»ºåŠŸèƒ½åŒ… å…ˆåˆ›å»ºä¸€ä¸ªå·¥ä½œç©ºé—´ï¼Œç„¶åå†å·¥ä½œç©ºé—´ä¸‹æ–°å»ºsrcæ–‡ä»¶å¤¹ï¼Œè¿›å…¥srcæ–‡ä»¶å¤¹å†…è¿è¡Œï¼šros2 pkg create demo_python_topic \u0026ndash;build-type ament_python \u0026ndash;dependencies rclpy example_interfaces \u0026ndash;license Apache-2.0ã€ä¸­é—´çš„\u0026ndash;æ˜¯å¯é€‰é¡¹é…ç½®ï¼Œæœ‰ç¼–è¯‘ç‰ˆæœ¬ï¼Œæ·»åŠ çš„ä¾èµ–ï¼Œè®¸å¯è¯ï¼Œå­˜æ”¾ç›®å½•ç­‰ç­‰ã€‘ ç„¶åå†å›åˆ°å·¥ä½œç©ºé—´æ–‡ä»¶å¤¹å†…è¿è¡Œï¼šcolcon build (âœ”ï¸). å¯ç”¨èŠ‚ç‚¹å‡½æ•° setup.pyæ·»åŠ ï¼š \u0026lsquo;python_NODE = demo_python_pkg.pyhon_node:main\u0026rsquo;, ã€ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ä»¥åŠåŒ…åå’Œè·¯å¾„ï¼Œå‡½æ•°åç§°ã€‘ (âœ”ï¸). å°†éœ€è¦å¯¼å…¥çš„åº“åŠ å…¥åˆ°package.xmlåŠŸèƒ½åŒ…æ¸…å•æ–‡ä»¶çš„å£°æ˜é‡Œé¢å¯¼å…¥åŒ…ï¼Œæ·»åŠ ä¾èµ–ä¿¡æ¯ï¼š 1 \u0026lt;depend\u0026gt;rclpy\u0026lt;/depend\u0026gt; (âœ”ï¸). æ·»åŠ å®Œä¹‹åéœ€è¦å¼€å¯æ„å»ºåŠŸèƒ½åŒ…ï¼šcolcon build ã€ç»ˆç«¯ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæ‰§è¡Œå®Œä¹‹åæ˜¯ä¼šæ ¹æ®ä½ ä¹‹å‰é…ç½®çš„è°ƒç”¨å‡½æ•°æ‹·è´å¤åˆ¶ä¸€ä»½ä¸€æ¨¡ä¸€æ ·çš„.pyæ–‡ä»¶ï¼Œç„¶åè¿è¡Œè°ƒç”¨çš„æ˜¯å¤åˆ¶è¿‡æ¥çš„æ–‡ä»¶ï¼Œä¸æ˜¯åŸæ¥çš„æœ¬èº«çš„æ–‡ä»¶ï¼Œæ‰€ä»¥åç»­å†™äº†æ›´æ–°ä¹‹åå®ƒçš„åŒ…è°ƒç”¨çš„æ˜¯ä½ ä¸Šä¸€æ¬¡æ‹·è´çš„ï¼Œä¸æ˜¯ä½ æ–°å†™çš„ã€‘ (âœ”ï¸). ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼šsource install/setup.bashã€æ­¤æ–‡ä»¶æ˜¯åˆ›å»ºæ—¶ç”Ÿæˆçš„ã€‘\næˆ–è€…ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ è¿™ä¸ªç¯å¢ƒå˜é‡ï¼š 1 export PYTHONPATH=/home/robot/chapt2/install/demo_python_pkg/lib/python3.12/site-packages:$PYTHONPATH # $PYTHONPATHè¡¨ç¤ºåŸæ¥çš„è·¯å¾„ä¸å˜ï¼Œç¼©å†™ï¼Œç„¶ååŠ ï¼šå‰é¢åŠ éœ€è¦æ·»åŠ çš„è·¯å¾„ 3.7. å…¶ä»– (A). echo ğŸ”µæŸ¥çœ‹å½“å‰ROS1/ROS2ï¼šecho $ROS_VERSIONã€ä¸­é—´æœ‰ä¸ªä¸‹åˆ’çº¿ã€‘ ğŸ”µæŸ¥çœ‹å½“å‰ROSç‰ˆæœ¬ï¼šecho $ROS_DISTRO (B). æ€»çš„æ‰“å°ç¯å¢ƒå˜é‡ä¿¡æ¯ ğŸŸ¡printenv æ‰“å°ç‰¹å®šçš„ä¿¡æ¯ï¼Œè¿›è¡Œä¿¡æ¯è¿‡æ»¤ï¼šprintenv | grep æƒ³è¦æ‰“å°çš„ç¯å¢ƒå˜é‡ (C). ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–‡ä»¶ä½ç½® ğŸŸ£export ç¯å¢ƒå˜é‡åç§°=æƒ³è¦ä¿®æ”¹çš„æ–‡ä»¶ä½ç½®ï¼ˆä»…åœ¨å½“å‰ç»ˆç«¯ä¸´æ—¶ä¿®æ”¹æˆæ•ˆï¼Œå†å¦å¼€è¿˜æ˜¯åŸæ¥çš„ç¯å¢ƒä½ç½®ï¼‰ (D). åœ¨linuxä¸­ï¼Œä»¥.å¼€å¤´çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œæ˜¯éšè—æ–‡ä»¶ ğŸ”´(ä¾‹). å¯åŠ¨è‡ªè¿è¡Œè„šæœ¬ï¼š~/.bashrc (E). å®‰è£…pythonæ’ä»¶åœ¨vscodeä¸­çš„ä»£ç æ³¨é‡ŠctrlåŠ å·¦é”®ï¼Œæˆ–è€…é•¿æ”¾æç¤ºçš„æ³¨é‡Šå½¢å¼ (F). å¢åŠ å¯æ‰§è¡Œæ–‡ä»¶çš„æ‰§è¡Œæƒé™ï¼Œç™½è‰²ä¸ºè¾ƒä½æƒé™ï¼Œç»¿è‰²ä¸ºè¾ƒé«˜æƒé™å¯è¿›è¡Œæ‰§è¡Œï¼š ğŸŸ chmod a+x æ–‡ä»¶å (G). æŸ¥çœ‹èŠ‚ç‚¹çš„å…·ä½“ä¿¡æ¯ âš«ros2 node info /èŠ‚ç‚¹åç§° æ‰“å°ç›®æ ‡è¯é¢˜çš„ä¿¡æ¯ ros2 topic echo ç›®æ ‡è¯é¢˜çš„åç§° æŸ¥çœ‹è¯é¢˜çš„è¯¦ç»†ä¿¡æ¯ ros2 topic info ç›®æ ‡è¯é¢˜çš„åç§° æ‰“å°è¯é¢˜çš„æŸä¸ªæ¥å£çš„è¯¦ç»†ä¿¡æ¯ ros2 interface show æ¥å£åç§° å‘å¸ƒä¸€ä¸ªè¯é¢˜ ros2 topic pub /turtle1/cmd_vel geometry_msgs/msg/Twist \u0026ldquo;{linear: {x: 0.4, y: 0.0} , angular: {z: 0.0}}\u0026rdquo; ã€è¯é¢˜åç§°ï¼‹æ¥å£åç§°ï¼‹å‘å¸ƒä¿¡æ¯ã€‘\næ‰“å°å½“å‰è¯é¢˜åˆ—è¡¨ ros2 topic list 3.8 å·¥ä½œç©ºé—´(WorkPlace) åˆ›å»ºä½¿ç”¨å·¥ä½œç©ºé—´ mkdir -p chapt2_ws/src ã€-pè¡¨ç¤ºåˆ›å»ºç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ã€‘ mv demo_cpp_pkg/ chapt2_ws/src/ã€å°†è¦æ•´åˆçš„åŒ…å‰ªåˆ‡ç§»åŠ¨åˆ°å·¥ä½œç©ºé—´ä¸‹ã€‘ mv demo_cpp_pkg/ chapt2_ws/src/ cd chapt2_ws/ã€è¿›å…¥å·¥ä½œç©ºé—´å†æ„å»ºä¸»ï¼Œä¿è¯æ¶æ„çš„æ¸…æ™°å®Œæ•´ã€‘ colcon build ã€æ„å»ºã€‘ å¦‚æœæœ‰åŠŸèƒ½åŒ…çš„ä¾èµ–å…³ç³»éœ€è¦æ›´æ”¹æ„å»ºé¡ºåºå°±åœ¨å¯¹åº”éœ€è¦ä¾èµ–çš„package.xmlæ–‡ä»¶å†…æ·»åŠ å¯¹åº”çš„ä¾èµ–åŒ…æ—¢å¯ï¼Œç³»ç»Ÿå°±ä¼šå…ˆç¼–è¯‘æ„å»ºè¢«ä¾èµ–çš„åŒ… è¢«ä¾èµ–çš„åŒ…å 3.9 Pythonå­¦ä¹  ç®€å•çš„ç±»å’Œå‡½æ•°ä»¥åŠinitæ–¹æ³•çš„ç†è§£ ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class PersonNode: def __init__(self,name_value:str,age_value:int): print(\u0026#39;PersonNode __init__æ–¹æ³•è¢«è°ƒç”¨å¹¶ä¸”è¿˜æ·»åŠ äº†ä¸¤ä¸ªå±æ€§ï¼\u0026#39;) self.name=name_value self.age=age_value def eat(self,food_name:str): \u0026#34;\u0026#34;\u0026#34; æ–¹æ³•ï¼šåƒä¸œè¥¿ :food_name é£Ÿç‰©åå­— \u0026#34;\u0026#34;\u0026#34; print(f\u0026#34;{self.name},{self.age}å²ï¼Œçˆ±åƒ{food_name}ï¼\u0026#34;) def main(): node = PersonNode(\u0026#39;æ³•å¤–ç‹‚å¾’å¼ ä¸‰\u0026#39;,20) node2 = PersonNode(\u0026#39;æ³•å¤–ç‹‚å¾’é‡Œæ–¯\u0026#39;,19) node.eat(\u0026#39;é»„ç„–é¸¡ç±³é¥­\u0026#39;) node2.eat(\u0026#39;é±¼é¦™è‚‰ä¸\u0026#39;) ç®€å•çš„ç»§æ‰¿æ€æƒ³ ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import rclpy from rclpy.node import Node #å€’å…¥Nodeç±» class PersonNode(Node):#æ­¤å¤„çš„Nodeå°±æ˜¯ç»§æ‰¿äºå¯¼å…¥çš„rclpy.nodeé‡Œé¢çš„Nodeç±» def __init__(self,node_name:str,name_value:str,age_value:int): print(\u0026#39;PersonNode __init__æ–¹æ³•è¢«è°ƒç”¨å¹¶ä¸”è¿˜æ·»åŠ äº†ä¸¤ä¸ªå±æ€§ï¼\u0026#39;) super().__init__(node_name) #åˆå§‹åŒ–èŠ‚ç‚¹ self.name=name_value self.age=age_value def eat(self,food_name:str): \u0026#34;\u0026#34;\u0026#34; æ–¹æ³•ï¼šåƒä¸œè¥¿ :food_name é£Ÿç‰©åå­— \u0026#34;\u0026#34;\u0026#34; # print(f\u0026#34;{self.name},{self.age}å²ï¼Œçˆ±åƒ{food_name}ï¼\u0026#34;) self.get_logger().info(f\u0026#34;{self.name},{self.age}å²ï¼Œçˆ±åƒ{food_name}ï¼\u0026#34;) #å°†å†…å®¹æ·»åŠ åˆ°rosæ—¥å¿—é‡Œé¢å¹¶ä¸”æ‰“å° def main(): rclpy.init() #ä½¿ç”¨ros2å‰éœ€è¦æ‰§è¡Œinitåˆå§‹åŒ–èµ„æºé…ç½® node = PersonNode(\u0026#39;zhangsan_node\u0026#39;,\u0026#39;æ³•å¤–ç‹‚å¾’å¼ ä¸‰\u0026#39;,20) node.eat(\u0026#39;é»„ç„–é¸¡ç±³é¥­\u0026#39;) rclpy.spin(node) #æ”¶é›†èŠ‚ç‚¹æ•°æ® rclpy.shutdown() #å…³é—­èŠ‚ç‚¹ å¤šçº¿ç¨‹åŠå›è°ƒå‡½æ•° ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 import threading import requests class Download: def download(sel,url,callback_word_count): print(f\u0026#34;çº¿ç¨‹ï¼š{threading.get_ident()}å¼€å§‹ä¸‹è½½ï¼š{url}\u0026#34;) response = requests.get(url) response.encoding=\u0026#39;utf-8\u0026#39; #ç»™è¯·æ±‚çš„ç»“æœä¸€ä¸ªç¼–ç  callback_word_count(url,response.text) #è°ƒç”¨å›è°ƒå‡½æ•° #pass def start_download(self,url,callback_word_count): thread = threading.Thread(target=self.download,args=(url,callback_word_count)) #åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ targetç›®æ ‡å‡½æ•°ï¼Œargséœ€è¦ä¼ å…¥çš„å‚æ•° thread.start() #å¯åŠ¨çº¿ç¨‹ # pass def world_count(url,result): \u0026#34;\u0026#34;\u0026#34; æ™®é€šçš„å‡½æ•°ï¼Œç”¨äºå›è°ƒ \u0026#34;\u0026#34;\u0026#34; print(f\u0026#34;{url}:{len(result)}-\u0026gt;{result[:5]}\u0026#34;) def main(): download = Download() download.start_download(\u0026#39;urlç½‘å€\u0026#39;,world_count) download.start_download(\u0026#39;urlç½‘å€\u0026#39;,world_count) download.start_download(\u0026#39;urlç½‘å€\u0026#39;,world_count) 3.10 C++å­¦ä¹  C++ vscodeçš„æ‰©å±•é‡åˆ°includeæŠ¥é”™æ‰¾ä¸åˆ°è·¯å¾„å°±åœ¨ä»–æ‰©å±•é…ç½®ä¸­æ·»åŠ ç±»ä¼¼ï¼š/opt/ros/jazzy/include/** ä¾æ®ç±»ä¼¼çš„é¢å‘å¯¹è±¡ç¼–ç¨‹åŸç†ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; // å®šä¹‰ä¸€ä¸ªPersionNodeçš„ç±»å¹¶ä¸”ç»§æ‰¿rclcppçš„Nodeä½œä¸ºçˆ¶ç±» class PersonNode : public rclcpp::Node { private: // å£°æ˜ std::string name_; int age_; public: PersonNode(const std::string \u0026amp;node_name, const std::string \u0026amp;name, const int \u0026amp;age) : Node(node_name) /*è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç­‰åŒäºpythonä¸­çš„ super().__init__(),ä¼ å…¥èŠ‚ç‚¹çš„åç§°ä½œä¸ºå‚æ•°*/ { this-\u0026gt;name_ = name; this-\u0026gt;age_ = age; }; void eat(const std::string \u0026amp;food_name) { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;æˆ‘æ˜¯%s,%då²äº†,çˆ±åƒ%s\u0026#34;, this-\u0026gt;name_.c_str(), this-\u0026gt;age_, food_name.c_str()); }; }; int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;PersonNode\u0026gt;(\u0026#34;persion_node\u0026#34;, \u0026#34;å°è¿‡\u0026#34;, 20); node-\u0026gt;eat(\u0026#34;é»„ç„–é¸¡ç±³é¥­\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); return 0; } å°†ä»£ç æ·»åŠ åˆ°src/ç›®å½•ä¸‹åˆ›å»ºçš„person_node.cppæ–‡ä»¶å†…ï¼Œç¼–å†™å¥½åå†åˆ°CmkeList.txtæ–‡ä»¶å†…æ·»åŠ æŒ‡å®šè¾“å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶åå’Œéœ€è¦è¿æ¥çš„åŒ…åä»¥åŠæ‰§è¡Œç¼–è¯‘ æœ€ç»ˆè¿›å…¥åˆ°CmkeList.txtç›®å½•ç»“æ„ä¸‹ï¼ˆä¾‹å¦‚å›¾ç‰‡ä¸­çš„ç›®å½•åº”è¿›å…¥chart2_ws/ï¼‰è¿è¡Œ colcon build #ç¼–è¯‘ source install/setup.bash C++æ–°ç‰¹æ€§ autoè‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include \u0026#34;iostream\u0026#34; int main() { //auto çš„è‡ªåŠ¨ç±»å‹æ¨å¯¼ auto xn = 2 ; //int xn = 2; auto yn = 3.14f; //float yn = 3.1415; auto zn = \u0026#39;a\u0026#39;;//char zn = \u0026#39;a\u0026#39;; std::cout\u0026lt;\u0026lt;xn\u0026lt;\u0026lt;std::endl; std::cout\u0026lt;\u0026lt;yn\u0026lt;\u0026lt;std::endl; std::cout\u0026lt;\u0026lt;zn\u0026lt;\u0026lt;std::endl; return 0; } å…±äº«æŒ‡é’ˆ ä½¿ç”¨å…±äº«æŒ‡é’ˆä¸è¦ç”¨é‡å¤æ–°å¢å†…å­˜åœ°å€ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨å›æ”¶ä¸ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œä¾‹å¦‚ä¸‹é¢çš„make_sharedä¾‹å­ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include \u0026#34;iostream\u0026#34; #include \u0026#34;memory\u0026#34; int main() { auto p1 = std::make_shared\u0026lt;std::string\u0026gt;(\u0026#34;This is a str.\u0026#34;); // std::make_shared\u0026lt;æ•°æ®ç±»å‹/ç±»\u0026gt;ï¼ˆå‚æ•°ï¼‰ï¼›è¿”å›å€¼ï¼Œå¯¹åº”çš„å…±äº«æŒ‡é’ˆ std::shared_ptr\u0026lt;std::string\u0026gt; å†™æˆ auto std::cout\u0026lt;\u0026lt;\u0026#34;p1çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p1.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p1.get()\u0026lt;\u0026lt;std::endl; // 1 auto p2 =p1; std::cout\u0026lt;\u0026lt;\u0026#34;p1çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p1.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p1.get()\u0026lt;\u0026lt;std::endl; // 2 std::cout\u0026lt;\u0026lt;\u0026#34;p2çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p2.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p2.get()\u0026lt;\u0026lt;std::endl; // 2 p1.reset(); //é‡Šæ”¾å¼•ç”¨ï¼Œä¸æŒ‡å‘â€œThis is a str.â€æ‰€åœ¨å†…å­˜ std::cout\u0026lt;\u0026lt;\u0026#34;p1çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p1.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p1.get()\u0026lt;\u0026lt;std::endl; // 0 std::cout\u0026lt;\u0026lt;\u0026#34;p2çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p2.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p2.get()\u0026lt;\u0026lt;std::endl; // 2-1=1 std::cout\u0026lt;\u0026lt;\u0026#34;p2çš„æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p2-\u0026gt;c_str()\u0026lt;\u0026lt;std::endl; // è°ƒç”¨æˆå‘˜æ–¹æ³• This is a str. return 0; } åŒ¿åå‡½æ•° æ¢ä¸€ç§è¯­æ³•çš„å‡½æ•° ä¸‹é¢lambdaå‡½æ•°ç¤ºä¾‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #include \u0026#34;iostream\u0026#34; #include \u0026lt;algorithm\u0026gt; int main() { auto add = [](int a,int b) -\u0026gt; int {return a+b;}; int sum = add(200,50); auto print_sum = [sum]() -\u0026gt; void //æ­¤å¤„ç›´æ¥å°†sumå†…å®¹è°ƒç”¨è¿‡æ¥ { std::cout\u0026lt;\u0026lt;sum\u0026lt;\u0026lt;std::endl; }; print_sum(); return 0; } å‡½æ•°åŒ…è£…å™¨ï¼Œç†è§£ä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 #include \u0026lt;iostream\u0026gt; #include \u0026lt;functional\u0026gt; // è‡ªç”±å‡½æ•° void save_with_free_fun(const std::string \u0026amp;file_name) { std::cout \u0026lt;\u0026lt; \u0026#34;è‡ªç”±å‡½æ•°ï¼š\u0026#34; \u0026lt;\u0026lt; file_name \u0026lt;\u0026lt; std::endl; } // æˆå‘˜å‡½æ•° class FileSave { private: public: FileSave(/* args */) = default; ~FileSave() = default; void save_with_member_fun(const std::string \u0026amp;file_name) { std::cout \u0026lt;\u0026lt; \u0026#34;æˆå‘˜æ–¹æ³•ï¼š\u0026#34; \u0026lt;\u0026lt; file_name \u0026lt;\u0026lt; std::endl; }; }; int main() { FileSave file_save; // Lambdaå‡½æ•° auto save_with_lambda_fun = [](const std::string \u0026amp;file_name) -\u0026gt; void { std::cout \u0026lt;\u0026lt; \u0026#34;Lambda å‡½æ•°ï¼š\u0026#34; \u0026lt;\u0026lt; file_name \u0026lt;\u0026lt; std::endl; }; //å¸¸è§çš„æ™®é€šå‡½æ•°è°ƒç”¨ // save_with_lambda_fun(\u0026#34;file.txt\u0026#34;); // Lambdaå‡½æ•°çš„è°ƒç”¨ // file_save.save_with_member_fun(\u0026#34;file.txt\u0026#34;); // æˆå‘˜å‡½æ•°çš„è°ƒç”¨ // save_with_free_fun(\u0026#34;file.txt\u0026#34;); // è‡ªç”±å‡½æ•°çš„è°ƒç”¨ //ä½¿ç”¨å‡½æ•°åŒ…è£…å™¨ä¹‹åçš„ï¼š std::function\u0026lt;void(const std::string\u0026amp;)\u0026gt; save1=save_with_free_fun; std::function\u0026lt;void(const std::string\u0026amp;)\u0026gt; save2=save_with_lambda_fun; //æˆå‘˜å‡½æ•°ï¼Œæ”¾å…¥åŒ…è£…å™¨ std::function\u0026lt;void(const std::string\u0026amp;)\u0026gt; save3=std::bind(\u0026amp;FileSave::save_with_member_fun, \u0026amp;file_save,std::placeholders::_1); //ä¿æŠ¤ç±»çš„å…¶ä»–æ–¹æ³•ä¸è¢«è°ƒç”¨ //ç»Ÿä¸€çš„è°ƒç”¨æ–¹æ³• save1(\u0026#34;file.txt\u0026#34;); save2(\u0026#34;file.txt\u0026#34;); save3(\u0026#34;file.txt\u0026#34;); return 0; } 3.11 å¤šçº¿ç¨‹ä»¥åŠå›è°ƒå‡½æ•° C++å…·ä½“(æœ‰å…³httpæœåŠ¡çš„è¯·æ±‚ç­‰éƒ¨åˆ†è¾ƒä¸ºå¤æ‚ï¼Œè¯¦ç»†è¯·çœ‹ROS2 å°é±¼) ã€æ‰“å¼€httpæœåŠ¡ï¼špython3 -m http.serverã€‘ ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #include \u0026lt;iostream\u0026gt; #include \u0026lt;thread\u0026gt; //å¤šçº¿ç¨‹ #include \u0026lt;chrono\u0026gt; //æ—¶é—´ç›¸å…³ #include \u0026lt;functional\u0026gt; //å‡½æ•°åŒ…è£…å™¨ #include \u0026#34;cpp-httplib/httplib.h\u0026#34; //ä¸‹è½½ç›¸å…³ class Download { private: /* data */ public: void download(const std::string \u0026amp;host,const std::string \u0026amp;path,const std::function\u0026lt;void(const std::string\u0026amp;,const std::string\u0026amp;)\u0026gt; \u0026amp;callback_word_count) { std::cout\u0026lt;\u0026lt;\u0026#34;çº¿ç¨‹\u0026#34;\u0026lt;\u0026lt;std::this_thread::get_id()\u0026lt;\u0026lt;std::endl; httplib::Client client(host); auto response=client.Get(path); if(response\u0026amp;\u0026amp;response-\u0026gt;status==200) { callback_word_count(path,response-\u0026gt;body); } }; void start_download(const std::string \u0026amp;host,const std::string \u0026amp;path,const std::function\u0026lt;void(const std::string\u0026amp;,const std::string\u0026amp;)\u0026gt; \u0026amp;callback_word_count) { auto download_fun=std::bind(\u0026amp;Download::download,this,std::placeholders::_1,std::placeholders::_2,std::placeholders::_3); std::thread thread(download_fun,host,path,callback_word_count); thread.detach(); //çº¿ç¨‹åˆ†ç¦»ï¼ }; }; int main() { auto d=Download(); auto word_count =[](const std::string \u0026amp;path,const std::string \u0026amp;result) -\u0026gt;void { std::cout\u0026lt;\u0026lt;\u0026#34;ä¸‹è½½å®Œæˆ\u0026#34;\u0026lt;\u0026lt;path\u0026lt;\u0026lt;\u0026#34;:\u0026#34;\u0026lt;\u0026lt;result.length()\u0026lt;\u0026lt;\u0026#34;-\u0026gt;\u0026#34;\u0026lt;\u0026lt;result.substr(0,5)\u0026lt;\u0026lt;std::endl; }; d.start_download(\u0026#34;hoståŸŸå\u0026#34;,\u0026#34;path1åœ°å€\u0026#34;,word_count); d.start_download(\u0026#34;hoståŸŸå\u0026#34;,\u0026#34;path2åœ°å€\u0026#34;,word_count); d.start_download(\u0026#34;hoståŸŸå\u0026#34;,\u0026#34;path3åœ°å€\u0026#34;,word_count); std::this_thread::sleep_for(std::chrono::milliseconds(1000*100));//ä¼‘çœ 10s return 0; } 3.12 è¯é¢˜ è¯é¢˜çš„å‘å¸ƒ ç¤ºä¾‹pythonèŠ‚ç‚¹ä»£ç å‘å¸ƒè¯é¢˜ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 import rclpy from rclpy.node import Node import requests from example_interfaces.msg import String from queue import Queue class NovelPuNode(Node): def __init__(self,node_name): super().__init__(node_name) self.get_logger().info(f\u0026#34;{node_name},å¯åŠ¨ï¼\u0026#34;) self.novel_queue_=Queue() #åˆ›å»ºé˜Ÿåˆ— æ”¾åœ¨å‰é¢ self.novel_publisher_ = self.create_publisher(String,\u0026#39;novel\u0026#39;,10) self.create_timer(5,self.timer_callback) def timer_callback(self): if self.novel_queue_.qsize()\u0026gt;0: line = self.novel_queue_.get() msg=String() #ç»„è£… msg.data=line self.novel_publisher_.publish(msg) self.get_logger().info(f\u0026#34;å‘å¸ƒäº†ï¼š{msg} è¿™æ¡ä¿¡æ¯ï¼\u0026#34;) def download(self,url): response = requests.get(url) #å‘é€å¼€å§‹è¯·æ±‚ response.encoding=\u0026#39;utf-8\u0026#39; #ç»™è¯·æ±‚çš„ç»“æœä¸€ä¸ªç¼–ç  text =response.text self.get_logger().info(f\u0026#34;ä¸‹è½½{url},{len(text)}\u0026#34;) for line in text.splitlines(): #è·å–åˆ°æ¯ä¸€è¡Œçš„æ•°æ®å­˜å‚¨åˆ°é˜Ÿåˆ—ä¸­ æŒ‰è¡Œåˆ†å‰² self.novel_queue_.put(line) def main(): rclpy.init() node = NovelPuNode(\u0026#39;novel_pub\u0026#39;) node.download(\u0026#39;http://0.0.0.0:8000/novel1.txt\u0026#39;) rclpy.spin(node) rclpy.shutdown() è®¢é˜…è¯é¢˜ pythonç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 import espeakng import rclpy from rclpy.node import Node from example_interfaces.msg import String from queue import Queue import threading import time class NovelSubNode(Node): def __init__(self,node_name): super().__init__(node_name) self.get_logger().info(f\u0026#34;{node_name},å¯åŠ¨ï¼\u0026#34;) self.novels_queue_ =Queue() self.novel_subscriber_=self.create_subscription(String,\u0026#39;novel\u0026#39;,self.novel_callback,10) self.speech_thread_ =threading.Thread(target=self.speake_thread) self.speech_thread_.start() def novel_callback(self,msg): self.novels_queue_.put(msg.data) def speake_thread(self): speaker =espeakng.Speaker() speaker.voice=\u0026#39;zh-yue\u0026#39; while rclpy.ok(): #æ£€æµ‹å½“å‰ROSä¸Šä¸‹æ–‡æ˜¯å¦OK if self.novels_queue_.qsize()\u0026gt;0: text =self.novels_queue_.get() self.get_logger().info(f\u0026#39;æœ—è¯µï¼š{text}\u0026#39;) speaker.say(text) #è¯´ speaker.wait() #ç­‰ä»–è¯´å®Œ else: # è®©å½“å‰è¿›ç¨‹ä¼‘çœ 1s time.sleep(1) def main(): rclpy.init() node = NovelSubNode(\u0026#39;novel_sub\u0026#39;) rclpy.spin(node) rclpy.shutdown() å®‰è£…espeakngè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼šï¼ˆå»ºè®®æ˜¯ç›´æ¥åˆ›å»ºä¸€ä¸ªåˆé€‚çš„è™šæ‹Ÿç¯å¢ƒvenvç„¶åä¸‹è½½ä½ åç»­éœ€è¦çš„åº“ï¼Œä¸è¦ç”¨å…¨å±€ç³»ç»Ÿï¼‰ ç›´æ¥å…ˆè¿›å…¥åˆ°ä½ æƒ³è¦æ”¾ç½®è™šæ‹Ÿç¯å¢ƒçš„æ–‡ä»¶ä¸­ï¼Œå»ºè®®æ˜¯ç›´æ¥æ”¾åˆ°~/ç›®å½•ä¸‹ï¼Œç„¶åè¿è¡Œï¼š 1 2 # ä½¿ç”¨å…¨å±€Pythonåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶ç»§æ‰¿ç³»ç»ŸåŒ… # /bin/python3 -m venv --system-site-packages ~/mvenv éšååœ¨ä½ çš„vscodeä¸­æ›¿æ¢ä¸ºä½ æ–°å»ºçš„ç¯å¢ƒï¼š ä¹‹åä½ ç¼ºå°‘å“ªä¸ªåº“ï¼Œå°±åœ¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒä¸‹ç›´æ¥ï¼š(pip install åº“å ) æ—¢å¯ æœ€ç»ˆçš„ç¼–è¯‘åä½¿ç”¨ros2 run æ—¶éœ€è¦æå‰åœ¨æœ¬å·¥ä½œç©ºé—´æ–°å»ºä¸€ä¸ª.shè„šæœ¬æ–‡ä»¶ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ source ~/mvenv/bin/activate # é…ç½® ROS2 ç¯å¢ƒ éœ€è¦æ ¹æ®è‡ªå·±çš„ç³»ç»Ÿæ¥é…ç½® source /opt/ros/jazzy/setup.bash # é…ç½®ä½ çš„å·¥ä½œç©ºé—´ source ~/chapt3/topic_ws/install/setup.bash # æŠŠè™šæ‹Ÿç¯å¢ƒçš„ Python è·¯å¾„åŠ å…¥åˆ° ROS2 çš„ Python è·¯å¾„ä¸­ åç»­å…¶ä»–å·¥ç¨‹æˆ–è€…å·¥ä½œç©ºé—´çš„pythonä¸­éœ€è¦ros2è°ƒç”¨è‡ªå·±åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒçš„ç¬¬ä¸‰æ–¹åº“æ—¶ç›´æ¥ä¿®è¯¥è¿™æ®µä¸­çš„å¯¹åº”è™šæ‹Ÿç¯å¢ƒçš„åè¯/ä½ç½®å³å¯ export PYTHONPATH=$PYTHONPATH:/home/robot/mvenv/lib/python3.12/site-packages echo \u0026#34;ROS2 + Python è™šæ‹Ÿç¯å¢ƒå·²é…ç½®å®Œæˆï¼\u0026#34; ç„¶åæ­£å¸¸colcon buildå’Œsource install/setup.bashæ—¢å¯è¿è¡Œros2 run C++å‘å¸ƒè¯é¢˜æ§åˆ¶å°æµ·é¾Ÿè¿åŠ¨ ç¤ºä¾‹ä»£ç (ä»…å‘å¸ƒè¯é¢˜)ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; using namespace std::chrono_literals; class TurtlrCircleNode:public rclcpp::Node { private: rclcpp::TimerBase::SharedPtr timer_; //åˆ›å»ºè®¡æ—¶å™¨ rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ public: explicit TurtlrCircleNode(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { publisher_=this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;,10); timer_=this-\u0026gt;create_wall_timer(1000ms,std::bind(\u0026amp;TurtlrCircleNode::timer_callback,this)); } void timer_callback() { auto msg=geometry_msgs::msg::Twist(); msg.linear.x=1.0; msg.angular.z=0.5; publisher_-\u0026gt;publish(msg); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;TurtlrCircleNode\u0026gt;(\u0026#34;turtle_circle\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } ç¤ºä¾‹ä»£ç (è®¢é˜…åŠ å‘å¸ƒè¯é¢˜ æ§åˆ¶å°æµ·é¾Ÿåˆ°è®¾å®šçš„ç›®æ ‡ç‚¹) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; using namespace std::chrono_literals; class TurtrlControlNode:public rclcpp::Node { private: // rclcpp::TimerBase::SharedPtr timer_; //åˆ›å»ºè®¡æ—¶å™¨ rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr subscription_;//è¨‚é–±è€…çš„æ™ºèƒ½æŒ‡é‡ double target_x_{1.0};//ç›®æ¨™ä½ç½®xåº§æ¨™ double target_y_{1.0}; //ç›®æ¨™ä½ç½®yåº§æ¨™ double k_{1.0}; // æ¯”ä¾‹ä¿‚æ•¸ double max_speed_{3.0}; //æœ€å¤§é€Ÿåº¦ public: explicit TurtrlControlNode(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { publisher_=this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;,10); // timer_=this-\u0026gt;create_wall_timer(1000ms,std::bind(\u0026amp;TurtrlControlNode::timer_callback,this)); subscription_=this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;(\u0026#34;/turtle1/pose\u0026#34;,10,std::bind(\u0026amp;TurtrlControlNode::on_pose_recevied,this,std::placeholders::_1)); } void on_pose_recevied(const turtlesim::msg::Pose::SharedPtr pose) //åƒæ•¸ï¼šæ”¶åˆ°æ•¸æ“šçš„å…±äº«æŒ‡é‡ { //1.ç²å–ç•¶å‰ä½ç½® auto current_x=pose-\u0026gt;x; auto current_y=pose-\u0026gt;y; RCLCPP_INFO(get_logger(),\u0026#34;ç•¶å‰çš„ï¼šx=%f,y=%f\u0026#34;,current_x,current_y); //2.è¨ˆç®—ç•¶å‰çš„ä½ç½®å’Œç›®æ¨™ä½ç½®çš„è·é›¢å’Œæœå‘çš„å·® auto distance=std::sqrt( (target_x_-current_x)*(target_x_-current_x)+ (target_y_-current_y)*(target_y_-current_y) ); auto angle= std::atan2((target_y_-current_y),(target_x_-current_x)) - pose-\u0026gt;theta; //3.åˆ©ç”¨è§’åº¦å·®å’Œä½ç½®å·®è¼¸å‡ºæ§åˆ¶ auto msg=geometry_msgs::msg::Twist(); if(distance\u0026gt;0.2) { if(fabs(angle)\u0026gt;0.2) { msg.angular.z=fabs(angle); } else { msg.linear.x=k_*distance; } } //4.é™åˆ¶ç·šé€Ÿåº¦æœ€å¤§å€¼ if(msg.linear.x\u0026gt;max_speed_) { msg.linear.x=max_speed_; } publisher_-\u0026gt;publish(msg); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;TurtrlControlNode\u0026gt;(\u0026#34;turtle_control\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } å®æˆ˜è¯é¢˜å°é¡¹ç›®ï¼šè·å–ç³»ç»ŸçŠ¶æ€å¹¶ä¸”qtæ˜¾ç¤ºï¼Œé€šè¿‡ROSé€šè®¯å®ç°å±€åŸŸç½‘é€šè®¯ ç¬¬ä¸€æ­¥ï¼šè‡ªå®šä¹‰é€šè®¯æ¥å£ (1). æ–°å»ºå·¥ä½œç©ºé—´topic_practice_ws,åœ¨æ–°çš„å·¥ä½œç©ºé—´ä¸­æ–°å»ºsrcæ–‡ä»¶å¤¹åˆ›å»ºæ¶ˆæ¯æ¥å£çš„åŠŸèƒ½åŒ… ros2 pkg create status_interfaces \u0026ndash;dependencies builtin_interfaces rosidl_default_generators \u0026ndash;license Apache-2.0 (2). åœ¨ç”Ÿæˆçš„å·¥ä½œåŒ…ä¸­æ–°å»ºmsgæ–‡ä»¶å¤¹æ–°å»ºå¥½è‡ªå·±çš„çš„æ¶ˆæ¯æ¥å£æ–‡ä»¶,(å‘½åè§„åˆ™è¦æ±‚ä¸ºéª†é©¼å³°å‘½åï¼Œå³å¼€å¤´ç¬¬ä¸€ä¸ªå­—æ¯ä¸ºå¤§å†™,åç¼€ä¸º.msg),SystemStatus.msg 1 2 3 4 5 6 7 8 builtin_interfaces/Time stamp #è®°å½•æ—¶é—´è¾å¼•å…¥å…¶ä»–åŠŸèƒ½åŒ…çš„æ¶ˆæ¯æ¥å£ï¼Œæ³¨æ„å»é™¤msgæ–‡ä»¶è·¯å¾„ string host_name # ä¸»æœºåå­— float32 cpu_percent # CPUä½¿ç”¨ç‡ float32 memory_percent # å†…å­˜ä½¿ç”¨ç‡ float32 memory_total # å†…å­˜æ€»å¤§å° float32 memory_available # å†…å­˜å‰©äºé‡ float32 net_sent # ç½‘ç»œå‘é€æ•°æ®æ€»é‡ 1MB=1Mb float32 net_recv # ç½‘ç»œæ•°æ®æ¥å—æ€»é‡ 1MB=1Mb (3). åœ¨cmakelistæ–‡ä»¶ä¸­æ·»åŠ ä¸€æ®µï¼š -```cpp # cmake å‡½æ•°ï¼Œæ¥è‡ªrosidl_default_generators ç”¨äºå°†msgç­‰æ¶ˆæ¯å°†æ¥å£å®šä¹‰æ–‡ä»¶è½¬æ¢æˆåº“æˆ–è€…å¤´æ–‡ä»¶ç±» rosidl_generators_interfaces{ ${PROJECT_NAME} \u0026ldquo;msg/SystemStatus.msg\u0026rdquo; DEPENDENCIES builtin_interfaces } (4). å†åœ¨package.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œå£°æ˜åº”ç”¨äº†å…¶ä»–æ–‡ä»¶åŠŸèƒ½åŒ…ï¼š \u0026lt;member_of_group\u0026gt;rosidl_interface_packages\u0026lt;/member_of_group\u0026gt; (5). å›åˆ°srcåŒçº§ç›®å½•ä¸‹è¿›è¡Œcolcon buildæ„å»º,ä¹‹åå…ˆsource install/setup.bashæ›´æ–°ä¸€ä¸‹ç¯å¢ƒå˜é‡ï¼Œä¹‹åå¯ä»¥è¿è¡Œï¼šros2 interface show status_interfaces/msg/SystemStatus æŸ¥çœ‹ä¸€ä¸‹æ¥å£ä¿¡æ¯æ˜¯å¦æ­£ç¡® ç¬¬äºŒæ­¥ï¼šç³»ç»Ÿä¿¡æ¯è·å–å’Œå‘å¸ƒ (1). å…ˆåœ¨åŒä¸€ä¸ªå·¥ä½œç©ºé—´ä¸‹æ–°å»ºä¸€ä¸ªpythonåŠŸèƒ½åŒ… (2). å†æ–°å»ºä¸€ä¸ªpyæ–‡ä»¶ ä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 import rclpy from status_interfaces.msg import SystemStatus from rclpy.node import Node import psutil #è·å–ç³»ç»Ÿä¿¡æ¯åº“ import platform class SysStatusPub(Node): def __init__(self,node_name): super().__init__(node_name) self.status_publisher_ =self.create_publisher( SystemStatus,\u0026#39;sys_status\u0026#39;,10 ) self.timer_ =self.create_timer(1.0,self.timer_callback) def timer_callback(self): # builtin_interfaces/Time stamp #è®°å½•æ—¶é—´è¾å¼•å…¥å…¶ä»–åŠŸèƒ½åŒ…çš„æ¶ˆæ¯æ¥å£ï¼Œæ³¨æ„å»é™¤msgæ–‡ä»¶è·¯å¾„ # string host_name # ä¸»æœºåå­— # float32 cpu_percent # CPUä½¿ç”¨ç‡ # float32 memory_percent # å†…å­˜ä½¿ç”¨ç‡ # float32 memory_total # å†…å­˜æ€»å¤§å° # float32 memory_available # å†…å­˜å‰©äºé‡ # float32 net_sent # ç½‘ç»œå‘é€æ•°æ®æ€»é‡ 1MB=1Mb # float32 net_recv # ç½‘ç»œæ•°æ®æ¥å—æ€»é‡ 1MB=1Mb cpu_percent = psutil.cpu_percent() #cpuå½“å‰ä½¿ç”¨ç‡ memory_info=psutil.virtual_memory() # å†…å­˜ç›¸å…³ä¿¡æ¯ net_io_counters=psutil.net_io_counters() # ç½‘ç»œè¾“å…¥è¾“å‡ºç›¸å…³ä¿¡æ¯ msg=SystemStatus() msg.stamp=self.get_clock().now().to_msg() msg.host_name=platform.node() msg.cpu_percent=cpu_percent msg.memory_percent=memory_info.percent msg.memory_total=memory_info.total/1024/1024 msg.memory_available=memory_info.available/1024/1024 msg.net_sent=net_io_counters.bytes_sent/1024/1024 msg.net_recv=net_io_counters.bytes_recv/1024/1024 self.get_logger().info(f\u0026#39;å‘å¸ƒï¼š{str(msg)}\u0026#39;)#rosä¿¡æ¯ç»ˆç«¯æ‰“å°ä¿¡æ¯ self.status_publisher_.publish(msg) #å‘å¸ƒä¿¡æ¯ def main(): rclpy.init() node=SysStatusPub(\u0026#39;sys_status_pub\u0026#39;) #åˆ›å»ºèŠ‚ç‚¹ rclpy.spin(node) #spinè¿è¡ŒèŠ‚ç‚¹ rclpy.shutdown()#è¿è¡Œå®Œä¹‹åå…³é—­ (3). åœ¨setup.pyæ–‡ä»¶ä¸­åŠ å…¥ï¼š\u0026lsquo;sys_status_pub=status_publisher.sys_status_pub:main\u0026rsquo;, (4). æœ€åcolcon buildä»¥åŠsourceä¹‹åè¿è¡Œï¼šros2 run status_publisher sys_status_pubï¼Œä¹‹åå¯ä»¥æ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯sourceä¹‹åè¿è¡Œï¼šros2 topic echo /sys_status ï¼Œæ‰“å°å½“å‰è¿è¡Œçš„sys_status_pubèŠ‚ç‚¹çš„å‘å¸ƒçš„sys_statusè¯é¢˜ï¼Œæ­¤è¯é¢˜å‘å¸ƒäº†ç”µè„‘çŠ¶æ€çš„msgä¿¡æ¯ ç¬¬ä¸‰æ­¥ï¼šåœ¨åŠŸèƒ½åŒ…ä¸­ä½¿ç”¨QT (1). åœ¨å·¥ä½œç¯å¢ƒçš„srcæ–‡ä»¶å¤¹å†…æ–°å»ºstatus_displayåŠŸèƒ½åŒ…ï¼Œé»˜è®¤æ˜¯cppæ–‡ä»¶ç±»å‹ï¼Œéœ€è¦åŠ è½½rclcppå’Œstatus_interfaceï¼Œç„¶åæ–°å»ºä¸€ä¸ªhello_qt.cppæ–‡ä»¶ ä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QLabel\u0026gt; #include \u0026lt;QString\u0026gt; int main(int argc,char *argv[]) { QApplication app(argc,argv); QLabel* lable=new QLabel(); QString message=QString::fromStdString(\u0026#34;Hello Qt!\u0026#34;); lable-\u0026gt;setText(message); lable-\u0026gt;show(); app.exec();//æ‰§è¡Œåº”ç”¨ï¼Œé˜»å¡ä»£ç  return 0; } (2). å†åœ¨cmakelistæ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢4è¡Œ,ä¹‹åæ„å»ºè¿è¡Œå³å¯ find_package(Qt5 REQUIRED COMPONENTS Widgets) # æŸ¥æ‰¾åº“ add_executable(hello_qt src/hello_qt.cpp) # æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶ target_link_libraries(hello_qt Qt5::Widgets) # é“¾æ¥åº“ install(TARGETS hello_qt DESTINATION lib/${PROJECT_NAME}) # å¤‡ä»½æ–‡ä»¶ (3). åŸºäºæœ¬å®æˆ˜ç³»ç»ŸçŠ¶æ€æ˜¾ç¤ºé¡¹ç›®ï¼Œå¦‚ä¸‹æ–°å»ºä¸€ä¸ªsys_status_display.cppï¼š ä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QLabel\u0026gt; #include \u0026lt;QString\u0026gt; #include \u0026lt;rclcpp/rclcpp.hpp\u0026gt; #include \u0026lt;status_interfaces/msg/system_status.hpp\u0026gt; using SystemStatus = status_interfaces::msg::SystemStatus; class SysStatusDisplay : public rclcpp::Node { private: /* data */ rclcpp::Subscription\u0026lt;SystemStatus\u0026gt;::SharedPtr subscriber_; QLabel *lable; public: SysStatusDisplay(/* args */) : Node(\u0026#34;sys_status_display\u0026#34;) { lable = new QLabel(); subscriber_ = this-\u0026gt;create_subscription\u0026lt;SystemStatus\u0026gt;(\u0026#34;sys_status\u0026#34;, 10, [\u0026amp;](const SystemStatus::SharedPtr msg) -\u0026gt; void { lable-\u0026gt;setText(get_qstr_from_msg(msg)); }); lable-\u0026gt;setText(get_qstr_from_msg(std::make_shared\u0026lt;SystemStatus\u0026gt;())); lable-\u0026gt;show(); }; // msg.stamp=self.get_clock().now().to_msg() // msg.host_name=platform.node() // msg.cpu_percent=cpu_percent // msg.memory_percent=memory_info.percent // msg.memory_total=memory_info.total/1024/1024 // msg.memory_available=memory_info.available/1024/1024 // msg.net_sent=net_io_counters.bytes_sent/1024/1024 // msg.net_recv=net_io_counters.bytes_recv/1024/1024 QString get_qstr_from_msg(const SystemStatus::SharedPtr msg) { std::stringstream show_str; show_str \u0026lt;\u0026lt;\u0026#34;========ç³»ç»ŸçŠ¶æ€å¯è§†åŒ–æ˜¾ç¤ºå·¥å…·==========\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; æ•° æ® æ—¶ é—´ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;stamp.sec\u0026lt;\u0026lt;\u0026#34;\\ts\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; ä¸» æœº å å­—ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;host_name\u0026lt;\u0026lt;\u0026#34;\\ts\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; CPU ä½¿ ç”¨ ç‡ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;cpu_percent\u0026lt;\u0026lt;\u0026#34;\\t%\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; å†… å­˜ ä½¿ ç”¨ ç‡ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;memory_percent\u0026lt;\u0026lt;\u0026#34;\\t%\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; å†… å­˜ æ€» é‡ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;memory_total\u0026lt;\u0026lt;\u0026#34;\\tMB\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; å†… å­˜ å‰© ä½™ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;memory_available\u0026lt;\u0026lt;\u0026#34;\\tMB\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; ç½‘ ç»œ å‘ é€ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;net_sent\u0026lt;\u0026lt;\u0026#34;\\tMB\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; ç½‘ ç»œ æ¥ å—ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;net_recv\u0026lt;\u0026lt;\u0026#34;\\tMB\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34;=====================================\u0026#34; ; return QString::fromStdString(show_str.str()); } }; int main(int argc, char *argv[]) { rclcpp::init(argc,argv); QApplication app(argc, argv); auto node=std::make_shared\u0026lt;SysStatusDisplay\u0026gt;(); std::thread spin_thread([\u0026amp;]()-\u0026gt;void{ rclcpp::spin(node); //å¯åŠ¨nodeèŠ‚ç‚¹,é˜»å¡ä»£ç  }); spin_thread.detach(); app.exec(); // æ‰§è¡Œåº”ç”¨ï¼Œé˜»å¡ä»£ç  return 0; } (4). æ›´æ”¹å¥½cmakelistæ–‡ä»¶å†…å®¹ï¼Œé“¾æ¥å¥½åº“ï¼š 1 2 3 4 5 6 add_executable(sys_status_display src/sys_status_display.cpp) # æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶ target_link_libraries(sys_status_display Qt5::Widgets) # é“¾æ¥åº“ ament_target_dependencies(sys_status_display rclcpp status_interfaces) install(TARGETS hello_qt sys_status_display DESTINATION lib/${PROJECT_NAME} ) # å¤‡ä»½æ–‡ä»¶ (5). æœ€ååˆ†åˆ«è¿è¡Œstatus_publisher sys_status_pubå’Œstatus_display sys_status_display æ­£å¸¸çœ‹åˆ°æ˜¾ç¤ºå³å¤§åŠŸå‘Šæˆï¼ 3.13 æœåŠ¡ åˆæ­¥è®¤è¯†ä½¿ç”¨æœåŠ¡ï¼š\nç¤ºä¾‹ï¼š æ‰“å¼€å°æµ·é¾Ÿæ˜¾ç¤ºèŠ‚ç‚¹(è®°ä¸èµ·æ¥å°±åŒtap) ros2 run turtlesim turtlesim_node ä¹‹åå†æ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯(ctrl+alt+t)è¿è¡Œä¸‹é¢å›¾ç‰‡æŸ¥çœ‹æœåŠ¡ï¼ŒæŸ¥çœ‹æŸä¸ªæœåŠ¡æ¶ˆæ¯è¯¦æƒ…ï¼Œcallå¯åŠ¨ä¸€ä¸ªæœåŠ¡æ¶ˆæ¯ ros2 service list -t ros2 interface show turtlesim/srv/Spawn ros2 service call spawn turtlesim/srv/Spawn \u0026ldquo;{x: 1, y: 1}\u0026rdquo; ä½¿ç”¨å›¾å½¢åŒ–äº¤äº’ç•Œé¢ï¼šrqt åŸºäºæœåŠ¡çš„å‚æ•°é€šä¿¡\næœåŠ¡çš„ä¸€äº›å‚æ•°åˆ—è¡¨å±•ç¤º:ros2 param list ä¹‹åå¯ä»¥æ‰“å°è¯¦ç»†çš„å‚æ•°ä»‹ç»ä¿¡æ¯ï¼šros2 param describe /turtlesim background_r è¿˜å¯ä»¥æ‰“å°è·å–å½“å‰å‚æ•°çš„å€¼ï¼šros2 param get /turtlesim background_r è¿˜å¯ä»¥è®¾ç½®å½“å‰å‚æ•°çš„å€¼ï¼šros2 param set /turtlesim background_r 255 ä¸€èˆ¬é…ç½®å¤šä¸ªå‚æ•°æ—¶æœ€å¿«ä¾¿æ·æ–¹æ³•æ˜¯å¯¼å‡ºyamlå‚æ•°æ–‡ä»¶ï¼Œä¹‹åç¼–è¾‘æ–‡ä»¶ä¸­çš„å‚æ•°æ—¢å¯ï¼Œéšåè¿è¡Œç›¸åº”èŠ‚ç‚¹æ—¶å°†yamlå‚æ•°é…ç½®æ–‡ä»¶ä¸€èµ·å¯ç”¨é…ç½® å¯¼å‡ºæœåŠ¡å‚æ•°ä¸ºyamlæ–‡ä»¶ï¼š ros2 param dump /turtlesim \u0026gt; turtlesim_param.yaml æŸ¥çœ‹å½“å‰å¯¼å‡ºçš„yamlæ–‡ä»¶ cat turtlesim_param.yaml å¯åŠ¨èŠ‚ç‚¹æ—¶ä½¿ç”¨yamlçš„é…ç½®æ–‡ä»¶ï¼š ros2 run turtlesim turtlesim_node \u0026ndash;ros-args \u0026ndash;params-file turtlesim_param.yaml ã€å…¶å®å°±æ˜¯rclcpp.init(argc,argv)æ—¶å°†yamlä¼ å…¥ä½œä¸ºåˆå§‹åŒ–å‚æ•°ã€‘ æˆ–è€…æ˜¯rqtä¸­çš„åŠ¨æ€é…ç½®configurationç›´æ¥è°ƒæ•´ä¿®æ”¹å€¼ è‡ªå®šä¹‰æœåŠ¡æ¥å£(äººè„¸è¯†åˆ«ç¤ºä¾‹)\næ–°å»ºå·chapt4æ–‡ä»¶ä¸‹srcå†…æ–°å»ºä¸€ä¸ªchapt4_interfacesåŠŸèƒ½åŒ…ï¼š\nros2 pkg create chapt4_interfaces \u0026ndash;dependencies sensor_msgs rosidl_default_generators \u0026ndash;license Apache-2.0 å†åœ¨åŠŸèƒ½åŒ…å†…æ–°å»ºsrvæœåŠ¡æ¥å£æ–‡ä»¶å¤¹ï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹å†…æ–°å»ºFaceDetector.srvæ–‡ä»¶å¹¶ä¸”æ›´æ”¹cmakelistå’Œpackage.xmlæ–‡ä»¶å†…å®¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 sensor_msgs/Image image #äººè„¸å›¾åƒ --- int16 number #è¯†åˆ«åˆ°çš„äººè„¸ä¸ªæ•° float32 use_time #è¯†åˆ«è€—æ—¶ int32[] top #äººè„¸åœ¨å›¾åƒä¸­çš„ä½ç½® int32[] right int32[] bottom int32[] left rosidl_generate_interfaces(${PROJECT_NAME} \u0026#34;srv/FaceDetector.srv\u0026#34; DEPENDENCIES sensor_msgs ) \u0026lt;member_of_group\u0026gt;rosidl_interface_packages\u0026lt;/member_of_group\u0026gt; ä¹‹ååˆ‡æ¢åˆ°srcçš„åŒçº§ç›®å½•ä¸‹è¿›è¡Œcolcon buildå†source install/setup.bash ï¼Œæœ€åè¿è¡Œros2 interface show chapt4_interfaces/srv/FaceDetector æŸ¥çœ‹æ˜¯å¦æœ‰å¯¹åº”çš„æœåŠ¡æ¥å£ä¿¡æ¯æ—¢å¯\näººè„¸æ£€æµ‹pythonæœåŠ¡é€šä¿¡ï¼š(pythonåœ¨mvenvç¯å¢ƒä¸‹)\næ–°å»ºä¸€ä¸ªstart_mvenv.shæ–‡ä»¶ä¸€é”®é…ç½®è™šæ‹Ÿç¯å¢ƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ source ~/mvenv/bin/activate # é…ç½® ROS2 ç¯å¢ƒ éœ€è¦æ ¹æ®è‡ªå·±çš„ç³»ç»Ÿæ¥é…ç½® source /opt/ros/jazzy/setup.bash # é…ç½®ä½ çš„å·¥ä½œç©ºé—´ source ~/chapt4/chapt4_ws/install/setup.bash # æŠŠè™šæ‹Ÿç¯å¢ƒçš„ Python è·¯å¾„åŠ å…¥åˆ° ROS2 çš„ Python è·¯å¾„ä¸­ åç»­å…¶ä»–å·¥ç¨‹æˆ–è€…å·¥ä½œç©ºé—´çš„pythonä¸­éœ€è¦ros2è°ƒç”¨è‡ªå·±åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒçš„ç¬¬ä¸‰æ–¹åº“æ—¶ç›´æ¥ä¿®è¯¥è¿™æ®µä¸­çš„å¯¹åº”è™šæ‹Ÿç¯å¢ƒçš„åè¯/ä½ç½®å³å¯ export PYTHONPATH=$PYTHONPATH:/home/robot/mvenv/lib/python3.12/site-packages echo \u0026#34;ROS2 + Python è™šæ‹Ÿç¯å¢ƒå·²é…ç½®å®Œæˆï¼\u0026#34; æ–°å»ºåŠŸèƒ½åŒ…ros2 pkg create demo_python_service \u0026ndash;build-type ament_python \u0026ndash;dependencies rclpy chapt4_interfaces \u0026ndash;license Apache-2.0 éœ€è¦æ‰¾åˆ°ä¸€å¼ éœ€è¦æ£€æµ‹çš„ç…§ç‰‡æ”¾åˆ°resourceæ–‡ä»¶å¤¹å†…ï¼Œéšåæ›´æ”¹setup.pyæ–‡ä»¶ï¼Œè¡¨ç¤ºåœ¨colcon buildæ‹·è´ä¸€ä»½æ—¶å°†sourceæ–‡ä»¶ä¸‹çš„è¿™å¼ ç…§ç‰‡ä¹Ÿä¸€èµ·æ‹·è´ (\u0026lsquo;share/\u0026rsquo; + package_name+\u0026quot;/resource\u0026quot;, [\u0026lsquo;resource/defult.jpg\u0026rsquo;]), ç„¶åæ–°å»ºlearn_face_detect.pyï¼Œä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import face_recognition import cv2 from ament_index_python.packages import get_package_share_directory #å¯¼å…¥åŠŸèƒ½åŒ…shareç›®å½•ç»å¯¹è·¯å¾„ import os def main(): #è·å–å›¾ç‰‡çš„çœŸå®è·¯å¾„ /home/robot/chapt4/chapt4_ws/install/demo_python_service/share/demo_python_service default_image_path=os.path.join(get_package_share_directory(\u0026#39;demo_python_service\u0026#39;),\u0026#39;/resource/defult.jpg\u0026#39;)#osåº“è‡ªåŠ¨åˆ¤æ–­è¿æ¥è·¯å¾„æ˜¯å¦éœ€è¦/é“¾æ¥ print(f\u0026#34;å›¾ç‰‡çš„çœŸå®è·¯å¾„ï¼š{default_image_path}\u0026#34;) #ä½¿ç”¨cv2åŠ è½½å›¾ç‰‡ image=cv2.imread(default_image_path) #æ£€æµ‹äººè„¸ face_locations=face_recognition.face_locations(image,number_of_times_to_upsample=1,model=\u0026#39;hog\u0026#39;) #ç»˜åˆ¶äººè„¸æ¡† for top,right,bottom,left in face_locations: cv2.rectangle(image,(left,top),(right,bottom),(255,0,0),4) #ç»“æœæ˜¾ç¤º cv2.imshow(\u0026#39;Face Detecte result\u0026#39;,image) cv2.waitKey(0) ç„¶ååˆ†åˆ«è¿è¡Œ,ä¹‹åå†è¿è¡Œros2 run demo_python_service learn_face_detect source start_mvenv.sh colcon build source install/setup.bash ä¸‹é¢ä¸ºæ­£å¼å¼€å§‹äººè„¸æ£€æµ‹æœåŠ¡éƒ¨åˆ†ï¼š æ–°å»ºface_detect_node.pyä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 import rclpy from rclpy.node import Node from chapt4_interfaces.srv import FaceDetector import face_recognition import cv2 from ament_index_python.packages import get_package_share_directory #å¯¼å…¥åŠŸèƒ½åŒ…shareç›®å½•ç»å¯¹è·¯å¾„ import os from cv_bridge import CvBridge import time class FaceDetectNode(Node): def __init__(self): super().__init__(\u0026#39;face_detect_node\u0026#39;) self.service_=self.create_service(FaceDetector,\u0026#39;face_detect\u0026#39;,self.detect_face_callback) self.bridge=CvBridge() self.number_of_times_to_upsample=1 self.model=\u0026#39;hog\u0026#39; self.default_image_path=os.path.join(get_package_share_directory(\u0026#39;demo_python_service\u0026#39;),\u0026#39;resource/defult.jpg\u0026#39;)#osåº“è‡ªåŠ¨åˆ¤æ–­è¿æ¥è·¯å¾„æ˜¯å¦éœ€è¦/é“¾æ¥ self.get_logger().info(f\u0026#34;äººè„¸æ£€æµ‹æœåŠ¡æˆåŠŸå¼€å¯ï¼\u0026#34;) def detect_face_callback(self,request,response): if request.image.data: cv_image=self.bridge.imgmsg_to_cv2(request.image) else: cv_image=cv2.imread(self.default_image_path)#è‹¥è¯·æ±‚çš„å›¾ç‰‡å†…å®¹ä¸ºç©ºåˆ™è¯†åˆ«é»˜è®¤çš„ç…§ç‰‡å†…å®¹ï¼Œç›®å½•ä½ç½®ä¸ºä¸Šé¢ self.get_logger().info(f\u0026#34;ä¼ å…¥å›¾åƒä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤å›¾åƒï¼\u0026#34;) #æ­¤å¤„çš„cv_imageå›¾åƒå·²ç»æ˜¯ä¸€ä¸ªopencvæ ¼å¼çš„å›¾åƒ start_time=time.time() self.get_logger().info(f\u0026#34;åŠ è½½å®Œæˆå›¾åƒï¼Œå¼€å§‹äººè„¸è¯†åˆ«ï¼\u0026#34;) face_locations=face_recognition.face_locations(cv_image,number_of_times_to_upsample=self.number_of_times_to_upsample,model=self.model) response.use_time=time.time()-start_time response.number=len(face_locations) #face_locationsæ˜¯ä¸€ä¸ªåˆ—è¡¨é‡Œé¢å…¶å®å°±æ˜¯è¯†åˆ«å‡ºæ¥æœ‰å¤šå°‘ç»„äººé“¾æ•°ç»„ for top,right,bottom,left in face_locations: response.top.append(top) response.right.append(right) response.bottom.append(bottom) response.left.append(left) return response #å¿…é¡»è¿”å›response def main(): rclpy.init() node=FaceDetectNode() rclpy.spin(node) rclpy.shutdown() ä¹‹åä¿®æ”¹å¥½setup.pyç„¶åç›´æ¥è¿è¡Œå³å¯ï¼Œæ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯åˆ—å‡ºæœåŠ¡ï¼šros2 service list -tï¼Œä¹‹åå†è¿è¡Œservice callè¿™ä¸ªå‘å¸ƒçš„æœåŠ¡æ¶ˆæ¯æ¥å£å³å¯ï¼Œè¯†åˆ«å‡ºé»˜è®¤çš„å›¾ç‰‡å†…å®¹ äººè„¸æ£€æµ‹çš„å®¢æˆ·ç«¯å®ç° ç°åœ¨resourceç›®å½•ä¸‹æ·»åŠ å¥½éœ€è¦è¯†åˆ«çš„ç…§ç‰‡ï¼Œç„¶åä¿®æ”¹å¥½setup.pyåœ¨colcon buildæ—¶å°†ç…§ç‰‡ä¹Ÿä¸€èµ·æ‹·è´è¿‡å» ç„¶åæ­£å¸¸åœ°æ–°å»ºå¥½face_detect_client_node.pyä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 import rclpy from rclpy.node import Node from chapt4_interfaces.srv import FaceDetector import face_recognition import cv2 from ament_index_python.packages import get_package_share_directory #å¯¼å…¥åŠŸèƒ½åŒ…shareç›®å½•ç»å¯¹è·¯å¾„ import os from cv_bridge import CvBridge import time class FaceDetectClientNode(Node): def __init__(self): super().__init__(\u0026#39;face_detect_client_node\u0026#39;) self.bridge=CvBridge() self.default_image_path=os.path.join(get_package_share_directory(\u0026#39;demo_python_service\u0026#39;),\u0026#39;resource/peoples.jpg\u0026#39;)#osåº“è‡ªåŠ¨åˆ¤æ–­è¿æ¥è·¯å¾„æ˜¯å¦éœ€è¦/é“¾æ¥ self.get_logger().info(f\u0026#34;äººè„¸æ£€æµ‹å®¢æˆ·ç«¯æˆåŠŸå¼€å¯ï¼\u0026#34;) self.client=self.create_client(FaceDetector,\u0026#39;face_detect\u0026#39;) self.image=cv2.imread(self.default_image_path) def send_request(self): # 1.åˆ¤æ–­æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while self.client.wait_for_service(timeout_sec=1.0) is False: self.get_logger().info(f\u0026#34;æ­£åœ¨ç­‰å¾…æœåŠ¡ç«¯ä¸Šçº¿.....\u0026#34;) # 2.æ„é€ Request request=FaceDetector.Request() request.image=self.bridge.cv2_to_imgmsg(self.image) # 3.å‘é€è¯·æ±‚å¹¶ç­‰å¾…å¤„ç†å®Œæˆ future=self.client.call_async(request) # while not future.done(): # time.sleep(1.0) #ä¼‘çœ å½“å‰çº¿ç¨‹ï¼Œç­‰å¾…æœåŠ¡å¤„ç†å®Œæˆ==é€ æˆå½“å‰çº¿ç¨‹æ— æ³•å†æ¥å—æ¥è‡ªæœåŠ¡ç«¯çš„è¿”å›ï¼Œå¯¼è‡´æ°¸è¿œæ— æ³•å®Œæˆfuture.done()æ— æ³•è¿”å›True # rclpy.spin_until_future_complete(self,future) #ç­‰å¾…æœåŠ¡ç«¯è¿”å›å“åº” def result_callback(result_future): response =result_future.result() #è·å–å“åº”ç»“æœ self.get_logger().info(f\u0026#34;æ¥æ”¶åˆ°å“åº”ï¼Œå…±è€—æ—¶{response.use_time}s,æ€»å…±æ£€æµ‹åˆ°{response.number}ä¸ªäººè„¸\u0026#34;) self.show_response(response) future.add_done_callback(result_callback) def show_response(self,resonse): for i in range(resonse.number): top=resonse.top[i] left=resonse.left[i] right=resonse.right[i] bottom=resonse.bottom[i] cv2.rectangle(self.image,(left,top),(right,bottom),(255,0,0),4) #ç»“æœæ˜¾ç¤º cv2.imshow(\u0026#39;Face Detecte result\u0026#39;,self.image) cv2.waitKey(0)#é˜»å¡ def main(): rclpy.init() node=FaceDetectClientNode() node.send_request() rclpy.spin(node) rclpy.shutdown() ä¹‹åæ­£å¸¸è¿è¡Œå…ˆå¼€å§‹ä¹‹å‰çš„æœåŠ¡ç«¯èŠ‚ç‚¹ï¼Œç„¶åå†å¼€å¯å®¢æˆ·ç«¯èŠ‚ç‚¹è¿›è¡Œè¯†åˆ«æ—¢å¯çœ‹åˆ°ç°è±¡ C++å°ä¹Œé¾Ÿå·¡èˆªæœåŠ¡ï¼š\næ–°å»ºæœåŠ¡é€šè®¯æ¥å£ï¼šåœ¨srvæ–‡ä»¶ä¸‹æ–°å»ºPatrol.srvï¼Œå†…å®¹ç¤ºä¾‹ï¼š 1 2 3 4 5 6 float32 target_x float32 target_y --- int8 SUCESS=1 int8 FAIL=0 int8 result # ç»“æœ è¿”å› SUCESS / FAIL å–å…¶ä¸­ä¹‹ä¸€ éšåæ›´æ”¹cmakelistæ–‡ä»¶å°†è¯¥srvæ–‡ä»¶è·¯å¾„æ›´æ–°åˆ°é‡Œé¢ï¼Œå‚è€ƒä¸Šé¢pythonçš„srvæ›´æ–°ã€‚ä¹‹åç›´æ¥colcon buildå·²ç»sourceæ—¢å¯ï¼ŒæŸ¥çœ‹ros2 interface show chapt4_interface/srv/Patrol æ—¢å¯çœ‹åˆ°æ¥å£è¯¦ç»†ä¿¡æ¯ (æœåŠ¡ç«¯)åœ¨srcä¸‹æ–°å»ºåŠŸèƒ½åŒ…ï¼š ros2 pkg create demo_cpp_service \u0026ndash;build-type ament_cmake \u0026ndash;dependencies chapt4_interfaces rclcpp geometry_msgs turtlesim \u0026ndash;license Apache-2.0 éšååœ¨é¡¹ç›®åç§°ä¸‹æ–°å»ºæœåŠ¡ç«¯turtle_control.cppä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; #include \u0026#34;chapt4_interfaces/srv/patrol.hpp\u0026#34; using Patrol=chapt4_interfaces::srv::Patrol; using namespace std::chrono_literals; class TurtrlControlNode:public rclcpp::Node { private: rclcpp::Service\u0026lt;Patrol\u0026gt;::SharedPtr patrol_service_; rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr subscription_;//è¨‚é–±è€…çš„æ™ºèƒ½æŒ‡é‡ double target_x_{1.0};//ç›®æ¨™ä½ç½®xåº§æ¨™ double target_y_{1.0}; //ç›®æ¨™ä½ç½®yåº§æ¨™ double k_{1.0}; // æ¯”ä¾‹ä¿‚æ•¸ double max_speed_{3.0}; //æœ€å¤§é€Ÿåº¦ public: explicit TurtrlControlNode(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { patrol_service_=this-\u0026gt;create_service\u0026lt;Patrol\u0026gt;(\u0026#34;patrol\u0026#34;,[\u0026amp;](const Patrol::Request::SharedPtr request,Patrol::Response::SharedPtr response)-\u0026gt;void{ if( (0\u0026lt;request-\u0026gt;target_x\u0026amp;\u0026amp;request-\u0026gt;target_x\u0026lt;12.0f)\u0026amp;\u0026amp; (0\u0026lt;request-\u0026gt;target_y\u0026amp;\u0026amp;request-\u0026gt;target_y\u0026lt;12.0f) ) { this-\u0026gt;target_x_=request-\u0026gt;target_x; this-\u0026gt;target_y_=request-\u0026gt;target_y; response-\u0026gt;result=Patrol::Response::SUCESS; } else { response-\u0026gt;result=Patrol::Response::FAIL; } }); publisher_=this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;,10); // timer_=this-\u0026gt;create_wall_timer(1000ms,std::bind(\u0026amp;TurtrlControlNode::timer_callback,this)); subscription_=this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;(\u0026#34;/turtle1/pose\u0026#34;,10,std::bind(\u0026amp;TurtrlControlNode::on_pose_recevied,this,std::placeholders::_1)); } void on_pose_recevied(const turtlesim::msg::Pose::SharedPtr pose) //åƒæ•¸ï¼šæ”¶åˆ°æ•¸æ“šçš„å…±äº«æŒ‡é‡ { //1.ç²å–ç•¶å‰ä½ç½® auto current_x=pose-\u0026gt;x; auto current_y=pose-\u0026gt;y; RCLCPP_INFO(get_logger(),\u0026#34;ç•¶å‰çš„ï¼šx=%f,y=%f\u0026#34;,current_x,current_y); //2.è¨ˆç®—ç•¶å‰çš„ä½ç½®å’Œç›®æ¨™ä½ç½®çš„è·é›¢å’Œæœå‘çš„å·® auto distance=std::sqrt( (target_x_-current_x)*(target_x_-current_x)+ (target_y_-current_y)*(target_y_-current_y) ); auto angle= std::atan2((target_y_-current_y),(target_x_-current_x)) - pose-\u0026gt;theta; //3.åˆ©ç”¨è§’åº¦å·®å’Œä½ç½®å·®è¼¸å‡ºæ§åˆ¶ auto msg=geometry_msgs::msg::Twist(); if(distance\u0026gt;0.2) { if(fabs(angle)\u0026gt;0.2) { msg.angular.z=fabs(angle); } else { msg.linear.x=k_*distance; } } //4.é™åˆ¶ç·šé€Ÿåº¦æœ€å¤§å€¼ if(msg.linear.x\u0026gt;max_speed_) { msg.linear.x=max_speed_; } publisher_-\u0026gt;publish(msg); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;TurtrlControlNode\u0026gt;(\u0026#34;turtle_control\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } ä¹‹åå†cmakelistæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–å·²ç»éœ€è¦ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å·²ç»æ‹·è´å†…å®¹3ä¸ªéƒ¨åˆ†ï¼Œä¹‹åå°±å¯ä»¥æ­£å¸¸åœ°colconå·²ç»sourceï¼Œæµ‹è¯•éœ€è¦å¼€å¯å°æµ·é¾ŸèŠ‚ç‚¹ï¼Œå¯ä»¥å†å¼€ä¸€ä¸ªrqtå¯è§†åŒ–å·¥å…·æ¥å‘å¸ƒrequestæœåŠ¡çš„æ¥å£å†…å®¹ï¼Œè§‚å¯Ÿæ˜¯å¦èƒ½æ§åˆ¶å°æµ·é¾Ÿè¿åŠ¨æ—¢å¯ (å®¢æˆ·ç«¯)åœ¨srcçš„demo_cpp_serviceä¸‹æ–°å»ºä¸€ä¸ªpatrol_client.cppï¼Œä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;chapt4_interfaces/srv/patrol.hpp\u0026#34; #include \u0026lt;ctime\u0026gt; using Patrol=chapt4_interfaces::srv::Patrol; using namespace std::chrono_literals; //å®šä¹‰ä¹‹åå¯ä»¥ä½¿ç”¨10s,100ms class PatrolClient:public rclcpp::Node { private: rclcpp::TimerBase::SharedPtr timer_; rclcpp::Client\u0026lt;Patrol\u0026gt;::SharedPtr patrol_client_; public: explicit PatrolClient(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { srand(time(NULL)); //åˆå§‹åŒ–éšæœºæ•°ç§å­ patrol_client_=this-\u0026gt;create_client\u0026lt;Patrol\u0026gt;(\u0026#34;patrol\u0026#34;); timer_=this-\u0026gt;create_wall_timer(10s,[\u0026amp;]()-\u0026gt;void{ //1.æ£€æµ‹æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while (!this-\u0026gt;patrol_client_-\u0026gt;wait_for_service(1s)) { if(!rclcpp::ok()) { RCLCPP_ERROR(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­ï¼ŒrclcppæŒ‚äº†ã€‚è‡£é€€ä¸‹äº†\u0026#34;); return; } RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­......\u0026#34;); } //2.æ„é€ è¯·æ±‚çš„å¯¹è±¡ auto request=std::make_shared\u0026lt;Patrol::Request\u0026gt;(); request-\u0026gt;target_x=rand()%12; request-\u0026gt;target_y=rand()%12; RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‡†å¤‡å¥½ç›®æ ‡ç‚¹ï¼š%f,%f\u0026#34;,request-\u0026gt;target_x,request-\u0026gt;target_y); //3.å‘é€è¯·æ±‚ this-\u0026gt;patrol_client_-\u0026gt;async_send_request(request,[\u0026amp;](rclcpp::Client\u0026lt;Patrol\u0026gt;::SharedFuture result_future)-\u0026gt;void{ auto response =result_future.get(); if(response-\u0026gt;result==Patrol::Response::SUCESS) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;è¯·æ±‚å·¡é€»ç›®æ ‡ç‚¹æˆåŠŸï¼\u0026#34;); } if(response-\u0026gt;result==Patrol::Response::FAIL) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;è¯·æ±‚å·¡é€»ç›®æ ‡ç‚¹å¤±è´¥....\u0026#34;); } }); }); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;PatrolClient\u0026gt;(\u0026#34;patrol_client_node\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } ä¹‹åä¿®æ”¹cmakelisté…ç½®æ–‡ä»¶ç„¶åæ­£å¸¸åœ°colconæ—¢å¯ï¼Œä¹‹åæ­£å¸¸è¿è¡Œå…ˆè¿è¡Œæµ·é¾Ÿnodeç„¶åå†æŠŠæœåŠ¡ç«¯çš„èŠ‚ç‚¹å¼€å¯ï¼Œæœ€åå¼€å¯å®¢æˆ·ç«¯å°±å¯ä»¥çœ‹åˆ°å°æµ·é¾Ÿè‡ªåŠ¨åŠ¨èµ·æ¥äº†ï¼š å‚æ•°ç›¸å…³\nå‚æ•°å£°æ˜é…ç½® 1 2 3 4 5 6 #å‚æ•°å£°æ˜ åç§°ï¼‹å€¼ self.declare_parameter(\u0026#39;number_of_times_to_upsample\u0026#39;,1) self.declare_parameter(\u0026#39;model\u0026#39;,\u0026#39;hog\u0026#39;) #å‚æ•°å€¼è·å– self.number_of_times_to_upsample=self.get_parameter(\u0026#39;number_of_times_to_upsample\u0026#39;).value self.model=self.get_parameter(\u0026#39;model\u0026#39;).value å‚æ•°ä½¿ç”¨å’Œæ›´æ”¹ï¼š è¿è¡ŒèŠ‚ç‚¹æ—¶å¯æŒ‡ä»¤æ›´æ”¹å‚æ•°å€¼ï¼š ros2 run demo_python_service face_detect_node \u0026ndash;ros-args -p model:=cnn å¯åœ¨æ–°ç»ˆç«¯å…ˆè¿è¡ŒæŸ¥çœ‹å½“å‰å‚æ•°listï¼šros2 param list éšåå¯è¿è¡Œç±»ä¼¼setå‚æ•°å€¼ï¼šros2 param set /face_detect_node number_of_times_to_upsample 2 ä¹Ÿå¯ä»¥getå‚æ•°å€¼ï¼šros2 param get /face_detect_node model C++æ¥æ”¶å‚æ•°äº‹ä»¶ åˆ›å»ºå‚æ•°å¹¶ä¸”å¯ä»¥ä»£ç å†…éƒ¨ä¿®æ”¹å‚æ•°å€¼ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€rqtè®¾ç½®å‚æ•°ï¼Œé€šè¿‡è®¾ç½®å“åº”è®¾ç½®å‚æ•°çš„å›è°ƒå‡½æ•°æ¥åŠ¨æ€è®¾ç½®å‚æ•°æ•°å€¼å¹¶ä¸”èµ‹å€¼ç»™ä»£ç ä¸­çš„å…¶ä»–å‚æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; #include \u0026#34;chapt4_interfaces/srv/patrol.hpp\u0026#34; #include \u0026#34;rcl_interfaces/msg/set_parameters_result.hpp\u0026#34; using SetParametersResult=rcl_interfaces::msg::SetParametersResult; using Patrol=chapt4_interfaces::srv::Patrol; using namespace std::chrono_literals; class TurtrlControlNode:public rclcpp::Node { private: OnSetParametersCallbackHandle::SharedPtr parameter_callback_handle_; rclcpp::Service\u0026lt;Patrol\u0026gt;::SharedPtr patrol_service_; rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr subscription_;//è¨‚é–±è€…çš„æ™ºèƒ½æŒ‡é‡ double target_x_{1.0};//ç›®æ¨™ä½ç½®xåº§æ¨™ double target_y_{1.0}; //ç›®æ¨™ä½ç½®yåº§æ¨™ double k_{1.0}; // æ¯”ä¾‹ä¿‚æ•¸ double max_speed_{3.0}; //æœ€å¤§é€Ÿåº¦ public: explicit TurtrlControlNode(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { this-\u0026gt;declare_parameter(\u0026#34;k\u0026#34;,1.0); //åˆ›å»ºå‚æ•° this-\u0026gt;declare_parameter(\u0026#34;max_speed\u0026#34;,1.0); this-\u0026gt;get_parameter(\u0026#34;k\u0026#34;,k_); this-\u0026gt;get_parameter(\u0026#34;max_speed\u0026#34;,max_speed_); this-\u0026gt;set_parameter(rclcpp::Parameter(\u0026#34;k\u0026#34;,2.0)); //å†…éƒ¨ä¿®æ”¹å‚æ•° //å“åº”å›è°ƒå‡½æ•°åŠ¨æ€æ¥æ”¶å‚æ•°ä¿®æ”¹ parameter_callback_handle_=this-\u0026gt;add_on_set_parameters_callback([\u0026amp;] (const std::vector\u0026lt;rclcpp::Parameter\u0026gt; \u0026amp; parameters) -\u0026gt;rcl_interfaces::msg::SetParametersResult{ rcl_interfaces::msg::SetParametersResult result; result.successful = true; for (const auto \u0026amp; parameter : parameters) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;æ›´æ–°å‚æ•°çš„å€¼%s=%f\u0026#34;,parameter.get_name().c_str(),parameter.as_double()); if(parameter.get_name()==\u0026#34;k\u0026#34;) { k_=parameter.as_double(); } if(parameter.get_name()==\u0026#34;max_speed\u0026#34;) { max_speed_=parameter.as_double(); } } return result; }); patrol_service_=this-\u0026gt;create_service\u0026lt;Patrol\u0026gt;(\u0026#34;patrol\u0026#34;,[\u0026amp;](const Patrol::Request::SharedPtr request,Patrol::Response::SharedPtr response)-\u0026gt;void{ if( (0\u0026lt;request-\u0026gt;target_x\u0026amp;\u0026amp;request-\u0026gt;target_x\u0026lt;12.0f)\u0026amp;\u0026amp; (0\u0026lt;request-\u0026gt;target_y\u0026amp;\u0026amp;request-\u0026gt;target_y\u0026lt;12.0f) ) { this-\u0026gt;target_x_=request-\u0026gt;target_x; this-\u0026gt;target_y_=request-\u0026gt;target_y; response-\u0026gt;result=Patrol::Response::SUCESS; } else { response-\u0026gt;result=Patrol::Response::FAIL; } }); publisher_=this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;,10); // timer_=this-\u0026gt;create_wall_timer(1000ms,std::bind(\u0026amp;TurtrlControlNode::timer_callback,this)); subscription_=this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;(\u0026#34;/turtle1/pose\u0026#34;,10,std::bind(\u0026amp;TurtrlControlNode::on_pose_recevied,this,std::placeholders::_1)); } void on_pose_recevied(const turtlesim::msg::Pose::SharedPtr pose) //åƒæ•¸ï¼šæ”¶åˆ°æ•¸æ“šçš„å…±äº«æŒ‡é‡ { //1.ç²å–ç•¶å‰ä½ç½® auto current_x=pose-\u0026gt;x; auto current_y=pose-\u0026gt;y; RCLCPP_INFO(get_logger(),\u0026#34;ç•¶å‰çš„ï¼šx=%f,y=%f\u0026#34;,current_x,current_y); //2.è¨ˆç®—ç•¶å‰çš„ä½ç½®å’Œç›®æ¨™ä½ç½®çš„è·é›¢å’Œæœå‘çš„å·® auto distance=std::sqrt( (target_x_-current_x)*(target_x_-current_x)+ (target_y_-current_y)*(target_y_-current_y) ); auto angle= std::atan2((target_y_-current_y),(target_x_-current_x)) - pose-\u0026gt;theta; //3.åˆ©ç”¨è§’åº¦å·®å’Œä½ç½®å·®è¼¸å‡ºæ§åˆ¶ auto msg=geometry_msgs::msg::Twist(); if(distance\u0026gt;0.2) { if(fabs(angle)\u0026gt;0.2) { msg.angular.z=fabs(angle); } else { msg.linear.x=k_*distance; } } //4.é™åˆ¶ç·šé€Ÿåº¦æœ€å¤§å€¼ if(msg.linear.x\u0026gt;max_speed_) { msg.linear.x=max_speed_; } publisher_-\u0026gt;publish(msg); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;TurtrlControlNode\u0026gt;(\u0026#34;turtle_control\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } ä»£ç è·‘é€šåç›´æ¥åœ¨rqtä¸­parameter reconfigureåŠ¨æ€ä¿®æ”¹èŠ‚ç‚¹ä¸­çš„å¯¹åº”è®¾ç½®å¥½çš„kå’Œmax_speedçš„å€¼ï¼ŒéšåæŸ¥çœ‹ç»ˆç«¯æ˜¯å¦æ‰“å°ä¿®æ”¹æˆåŠŸä¿¡æ¯ C++ä¿®æ”¹å…¶ä»–èŠ‚ç‚¹çš„å‚æ•° åˆ†åˆ«æ–°å»ºå®¢æˆ·ç«¯ç”¨äºå‘é€è¯·æ±‚ï¼Œä»¥åŠæ–°å»ºæ›´æ–°å‚æ•°å€¼å‡½æ•°ï¼Œä¸»å‡½æ•°è°ƒç”¨æ›´æ–°å‚æ•°å€¼å‡½æ•°å³å¯ï¼Œä»£ç ç¤ºä¾‹ä¸­ä¸»è¦æ˜¯è®¾ç½®kçš„å‚æ•°å€¼ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹å…¶ä»–å‚æ•°å€¼ç›´æ¥æ–°å»ºè®¾ç½®å‡½æ•°å³å¯ï¼Œä¸»è¦å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;chapt4_interfaces/srv/patrol.hpp\u0026#34; #include \u0026lt;ctime\u0026gt; #include \u0026#34;rcl_interfaces/msg/parameter.hpp\u0026#34; #include \u0026#34;rcl_interfaces/msg/parameter_value.hpp\u0026#34; #include \u0026#34;rcl_interfaces/msg/parameter_type.hpp\u0026#34; #include \u0026#34;rcl_interfaces/srv/set_parameters.hpp\u0026#34; using SetP=rcl_interfaces::srv::SetParameters; using Patrol=chapt4_interfaces::srv::Patrol; using namespace std::chrono_literals; //å®šä¹‰ä¹‹åå¯ä»¥ä½¿ç”¨10s,100ms class PatrolClient:public rclcpp::Node { private: rclcpp::TimerBase::SharedPtr timer_; rclcpp::Client\u0026lt;Patrol\u0026gt;::SharedPtr patrol_client_; public: explicit PatrolClient(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { srand(time(NULL)); //åˆå§‹åŒ–éšæœºæ•°ç§å­ patrol_client_=this-\u0026gt;create_client\u0026lt;Patrol\u0026gt;(\u0026#34;patrol\u0026#34;); timer_=this-\u0026gt;create_wall_timer(10s,[\u0026amp;]()-\u0026gt;void{ //1.æ£€æµ‹æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while (!this-\u0026gt;patrol_client_-\u0026gt;wait_for_service(1s)) { if(!rclcpp::ok()) { RCLCPP_ERROR(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­ï¼ŒrclcppæŒ‚äº†ã€‚è‡£é€€ä¸‹äº†\u0026#34;); return; } RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­......\u0026#34;); } //2.æ„é€ è¯·æ±‚çš„å¯¹è±¡ auto request=std::make_shared\u0026lt;Patrol::Request\u0026gt;(); request-\u0026gt;target_x=rand()%12; request-\u0026gt;target_y=rand()%12; RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‡†å¤‡å¥½ç›®æ ‡ç‚¹ï¼š%f,%f\u0026#34;,request-\u0026gt;target_x,request-\u0026gt;target_y); //3.å‘é€è¯·æ±‚ this-\u0026gt;patrol_client_-\u0026gt;async_send_request(request,[\u0026amp;](rclcpp::Client\u0026lt;Patrol\u0026gt;::SharedFuture result_future)-\u0026gt;void{ auto response =result_future.get(); if(response-\u0026gt;result==Patrol::Response::SUCESS) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;è¯·æ±‚å·¡é€»ç›®æ ‡ç‚¹æˆåŠŸï¼\u0026#34;); } if(response-\u0026gt;result==Patrol::Response::FAIL) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;è¯·æ±‚å·¡é€»ç›®æ ‡ç‚¹å¤±è´¥....\u0026#34;); } }); }); } /* * åˆ›å»ºå®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œå¹¶ä¸”è¿”å›ç»“æœ */ SetP::Response::SharedPtr call_set_parameters(const rcl_interfaces::msg::Parameter \u0026amp;param) { auto param_client=this-\u0026gt;create_client\u0026lt;SetP\u0026gt;(\u0026#34;/turtle_control/set_parameters\u0026#34;); //1.æ£€æµ‹æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while (!param_client-\u0026gt;wait_for_service(1s)) { if(!rclcpp::ok()) { RCLCPP_ERROR(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…ç¬¬äºŒä¸ªset_paramæœåŠ¡ä¸Šçº¿ä¸­ï¼ŒrclcppæŒ‚äº†ã€‚è‡£é€€ä¸‹äº†\u0026#34;); return nullptr; } RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­......\u0026#34;); } //2.æ„é€ è¯·æ±‚çš„å¯¹è±¡ auto request=std::make_shared\u0026lt;SetP::Request\u0026gt;(); request-\u0026gt;parameters.push_back(param); //3.å‘é€è¯·æ±‚ auto furture=param_client-\u0026gt;async_send_request(request); rclcpp::spin_until_future_complete(this-\u0026gt;get_node_base_interface(),furture); auto response=furture.get(); return response; } /* * æ›´æ–°å‚æ•°å€¼ */ void update_server_param_k(double k) { //1.åˆ›å»ºä¸€ä¸ªå‚æ•°å¯¹è±¡ auto param=rcl_interfaces::msg::Parameter(); param.name=\u0026#34;k\u0026#34;; //2.åˆ›å»ºå‚æ•°å€¼ auto param_value=rcl_interfaces::msg::ParameterValue(); param_value.type=rcl_interfaces::msg::ParameterType::PARAMETER_DOUBLE; param_value.double_value=k; param.value=param_value; //3.è¯·æ±‚æ›´æ–°å‚èµ› auto response=this-\u0026gt;call_set_parameters(param); if(response==NULL) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‚æ•°è¿”å›å¤±è´¥\u0026#34;); return; } for(auto result:response-\u0026gt;results) { if(result.successful==false) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‚æ•°è¿”å›å¤±è´¥ï¼ŒåŸå› æ˜¯ï¼š%s\u0026#34;,result.reason.c_str()); } else{ RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‚æ•°è¿”å›æˆåŠŸ\u0026#34;); } } } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;PatrolClient\u0026gt;(\u0026#34;patrol_client_node\u0026#34;); node-\u0026gt;update_server_param_k(5.0); rclcpp::spin(node); rclcpp::shutdown(); } å†™å®Œåç¼–è¯‘ï¼Œå…ˆè¿è¡Œä¸Šä¸€èŠ‚çš„å‚æ•°å£°æ˜èŠ‚ç‚¹ï¼Œç„¶åå†è¿è¡Œæ–°å†™çš„ä¿®æ”¹å‚æ•°èŠ‚ç‚¹ï¼Œæ—¢å¯çœ‹åˆ°ç»ˆç«¯æ‰“å°çš„æ—¥å¿—å†…å®¹æ˜¯å¦æˆåŠŸæ£€æµ‹åˆ°æœåŠ¡ä¸Šçº¿ä»¥åŠæ˜¯å¦ä¿®æ”¹æˆåŠŸ ä½¿ç”¨launchæ–‡ä»¶\nç°åœ¨æƒ³è¦çš„åŠŸèƒ½åŒ…ä¸‹é¢æ–°å»ºlaunchæ–‡ä»¶å¤¹ï¼Œç„¶åå†launchæ–‡ä»¶å¤¹å†…æ–°å»ºä¸€ä¸ªdemo.launch.pyæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 import launch import launch_ros def generate_launch_description(): #æ­¤å‡½æ•°åæ˜¯å›ºå®šçš„ \u0026#34;\u0026#34;\u0026#34;äº§ç”Ÿlaunchæè¿°\u0026#34;\u0026#34;\u0026#34; action_node_turtlesim_node=launch_ros.actions.Node( package=\u0026#39;turtlesim\u0026#39;, executable=\u0026#39;turtlesim_node\u0026#39;, output=\u0026#39;screen\u0026#39; # è¾“å‡ºæ–¹å¼ä¸€ï¼šå±å¹• ) action_node_turtle_control=launch_ros.actions.Node( package=\u0026#39;demo_cpp_service\u0026#39;, executable=\u0026#39;turtle_control\u0026#39;, output=\u0026#39;log\u0026#39; # è¾“å‡ºæ–¹å¼äºŒï¼šæ—¥å¿—æ–‡ä»¶ ) action_node_patrol_client=launch_ros.actions.Node( package=\u0026#39;demo_cpp_service\u0026#39;, executable=\u0026#39;patrol_client\u0026#39;, output=\u0026#39;both\u0026#39; # è¾“å‡ºæ–¹å¼ä¸‰ï¼šä¸Šé¢ä¸¤ç§éƒ½è¦ ) return launch.LaunchDescription([ # actionsåŠ¨ä½œ action_node_turtlesim_node, action_node_turtle_control, action_node_patrol_client ]) éšåæ›´æ”¹æ‹·è´çš„æ„å»ºé…ç½®ï¼Œåœ¨C++ä¸­çš„cmakelistæ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢å†…å®¹æŒ‡å®šæ‹·è´çš„æ–‡ä»¶å¤¹åç§°å’Œæ–‡ä»¶è·¯å¾„å³å¯ï¼š 1 2 3 // install(DIRECTORY launch // DESTINATION share/${PROJECT_NAME} // ) åœ¨pythonä¸­çš„setup.pyä¸­æ·»åŠ ä¸‹é¢å†…å®¹ï¼ŒåŒæ ·æŒ‡å®šæ–‡ä»¶å¤¹å’Œæ–‡ä»¶è·¯å¾„ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 from setuptools import find_packages, setup from glob import glob # 1.å¼•å…¥æ­¤åŒ… package_name = \u0026#39;demo_python_service\u0026#39; setup( name=package_name, version=\u0026#39;0.0.0\u0026#39;, packages=find_packages(exclude=[\u0026#39;test\u0026#39;]), data_files=[ (\u0026#39;share/ament_index/resource_index/packages\u0026#39;, [\u0026#39;resource/\u0026#39; + package_name]), (\u0026#39;share/\u0026#39; + package_name, [\u0026#39;package.xml\u0026#39;]), (\u0026#39;share/\u0026#39; + package_name+\u0026#34;/resource\u0026#34;, [\u0026#39;resource/defult.jpg\u0026#39;]), (\u0026#39;share/\u0026#39; + package_name+\u0026#34;/resource\u0026#34;, [\u0026#39;resource/peoples.jpg\u0026#39;]), (\u0026#39;share/\u0026#39; + package_name+\u0026#34;/launch\u0026#34;, glob(\u0026#39;launch/*.launch.py\u0026#39;)), # 2.æ·»åŠ æŒ‡å®šè·¯å¾„ä»¥åŠæ–‡ä»¶ ], install_requires=[\u0026#39;setuptools\u0026#39;], zip_safe=True, maintainer=\u0026#39;robot\u0026#39;, maintainer_email=\u0026#39;robot@todo.todo\u0026#39;, description=\u0026#39;TODO: Package description\u0026#39;, license=\u0026#39;Apache-2.0\u0026#39;, tests_require=[\u0026#39;pytest\u0026#39;], entry_points={ \u0026#39;console_scripts\u0026#39;: [ \u0026#39;learn_face_detect=demo_python_service.learn_face_detect:main\u0026#39;, \u0026#39;face_detect_node=demo_python_service.face_detect_node:main\u0026#39;, \u0026#39;face_detect_client_node=demo_python_service.face_detect_client_node:main\u0026#39;, ], }, ) é…ç½®å¥½åå…ˆcolcon buildï¼Œéšåå†sourceå®Œï¼Œè¿è¡Œï¼šros2 launch åŠŸèƒ½åŒ…åï¼ˆåˆ›å»ºlaunchæ–‡ä»¶å¤¹çš„åŠŸèƒ½åŒ…ä½ç½®ï¼‰ demo.launch.py ä¹‹åå°±èƒ½çœ‹åˆ°é…ç½®çš„å¯¹åº”èŠ‚ç‚¹æˆåŠŸæ‰“å¼€ 4. å¿ƒå¾—æ€»ç»“ ç§»æ­¥å®Œè¿™ç¯‡ç¬”è®°å†…å®¹æ‰ç®—æ˜¯æŠŠæˆ‘æœ¬åœ°ç”µè„‘ä¸Šé‚£ä¸ªâ€œåŸå§‹äººçš„CMDç¬”è®°â€ç»™å®Œå…¨ç§»æ­¥å®ŒğŸ˜¥ï¼Œä¹Ÿç®—æ˜¯é€æ­¥çº æ­£è‡ªå·±çš„æ‹–å»¶ç—‡å’Œæ‡’äº†ğŸ˜©ã€‚å…¶å®Linuxçš„å­¦ä¹ æ„Ÿè§‰è¿˜æ˜¯æœ‰å¾ˆå¤šå®è·µå’Œæ“ä½œéœ€è¦åŠ¨æ‰‹è¾¹å­¦è¾¹è¿ç”¨æ‰èƒ½æ›´å¥½å¸æ”¶ï¼Œåé¢æ›´å¤šçš„è¿˜æ˜¯å¸¦å…¥å®é™…é¡¹ç›®ä¸­å»è¾¹å­¦è¾¹åšï¼è¿˜æœ‰åé¢éœ€è¦çš„ç»†åˆ†åœ¨Linuxç³»ç»Ÿä¸‹å…·ä½“åšä¾‹å¦‚éŸ³é¢‘ï¼Œç½‘ç»œç­‰ç­‰å¼€å‘å†æ ï¼Œå…ˆå­¦ä¹ è¿ç”¨åœ¨ROSæœºå™¨äººæ“ä½œç³»ç»Ÿä¸Šçš„å…·ä½“ä¾‹å¦‚è‡ªä¸»å¯¼èˆªï¼Œæ‰‹çœ¼æ ‡å®šæŠ“å–ç­‰ç­‰ï¼Œä¸€æ­¥ä¸€æ­¥æ€»ä¼šæ‰¾åˆ°å±äºè‡ªå·±æƒ³è¦çš„ğŸ¥±ğŸ¥±ğŸ¥±\n","date":"2025-10-22T00:00:00Z","image":"https://prominsegsj.github.io/p/ros2_learn/2_hu_10a77e11c215a0af.png","permalink":"https://prominsegsj.github.io/p/ros2_learn/","title":"ã€ROS2ã€‘é€šè®¯æ¶æ„çš„å­¦ä¹ "},{"content":"åŸºäºLinuxæ“ä½œç³»ç»Ÿä¸‹çš„ç›¸å…³å­¦ä¹  (æœ¬æ¬¡å­¦ä¹ å¼€å‘ç¯å¢ƒéƒ½æ˜¯åœ¨è™šæ‹Ÿæœºubantu24.04.2ç³»ç»Ÿç‰ˆæœ¬ä»¥åŠROS2çš„jazzyç‰ˆæœ¬ä¸‹çš„è®°å½•)æœ¬æ¥æ˜¯æƒ³åˆ†å¼€æ¥åˆ†åˆ«è®°å½•æ ‘è“æ´¾è·ŸROS2çš„ç›¸å…³å­¦ä¹ çš„ï¼Œä½†æ˜¯æƒ³æ¥ç°åœ¨çš„å­¦ä¹ æ·±åº¦å’Œç¬”è®°éƒ½è¾ƒä¸ºæµ…ï¼Œæˆ‘å°±æš‚ä¸ºæ”¾åˆ°ä¸€èµ·ç®—ä½œæ€»çš„Linuxå­¦ä¹ å¥½äº†ğŸ¤ŒğŸ¤Œ\n1. LinuxåŸºç¡€ç»ˆç«¯ ls -aã€åˆ—å‡ºå½“å‰æ–‡ä»¶å¤¹å†…æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ã€‘ source +æ–‡ä»¶åç§°ã€è¿è¡ŒæŸä¸ªæ–‡æœ¬æ–‡ä»¶ã€‘ ~/.bashrcã€æ–‡ä»¶æ˜¯ç»ˆç«¯è¿è¡Œæ—¶ä¼šè‡ªåŠ¨æå‰è¿è¡Œçš„è„šæœ¬ã€‘ nano æ–‡ä»¶åã€æ–‡ä»¶ç¼–è¾‘å™¨ç¼–è¾‘/åˆ›å»ºæ–‡ä»¶ã€‘ gedit æ–‡ä»¶åã€æ–‡ä»¶ç¼–è¾‘å™¨ç¼–è¾‘/åˆ›å»ºæ–‡ä»¶ã€‘ whereis è½¯ä»¶åç§°ã€æŸ¥è¯¢å®‰è£…è·¯å¾„ã€‘ code ./ ã€ä½¿ç”¨vscodeæ‰“å¼€å½“å‰æ–‡ä»¶è·¯å¾„æ–‡ä»¶å¤¹ã€‘ mv åŸæ–‡ä»¶å é‡å‘½åæ–‡ä»¶å ã€é‡å‘½åæ–‡ä»¶åã€‘ æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬ï¼šlsb_release -a 2. æ ‘è“æ´¾å­¦ä¹ ç¬”è®° å…¶å®æ ‘è“æ´¾å°±æ˜¯ä¸€ä¸ªé›†æˆçš„å°çš„ç¡¬ä»¶\u0026quot;å°ç”µè„‘\u0026quot;ï¼Œå®‰è£…å¥½å¯¹åº”çš„æ ‘è“æ´¾æˆ–è€…å…¶ä»–æ“ä½œç³»ç»Ÿå°±å¯ä»¥æ­£å¸¸å¼€å‘ä½¿ç”¨äº†ï¼Œå¯¹åº”çš„ä¸ªäººè®¤ä¸ºè¾ƒå¥½çš„æ•™ç¨‹å¯ä»¥çœ‹bç«™UPæ ‘å°æºªï¼Œæ•´ä½“çš„ç¯å¢ƒé…ç½®å’Œæµç¨‹æˆ‘å°±ä¸èµ˜è¿°äº†ï¼Œè¯¦ç»†ç›´æ¥çœ‹è¿™ä¸ªä»–çš„è§†é¢‘å³å¯ã€‚æ­¤å¤„åªåšä¸ªäººçš„å­¦ä¹ ç¬”è®°ï¼Œä»…ä¾›å‚è€ƒï¼è¡¥å……ï¼šæœ¬ç¬”è®°çš„ç³»ç»Ÿç¯å¢ƒæ˜¯æ ‘è“æ´¾çš„å®˜æ–¹ç¯å¢ƒRaspberry Pi OSã€‚\n2.1 åˆæ­¥è´¦å·è®¾ç½® ä¸»æœºï¼šmiaochuangbalou å¯†ç ï¼š111111 åœ°å€ï¼š192.168.137.92 ã€æ­¤å¤„æ˜¯æˆ‘ç»™æ ‘è“æ´¾é…ç½®çš„å›ºå®šipï¼Œè¯¦ç»†çœ‹æ•™ç¨‹ã€‘ 2.2 å¸¸ç”¨ç»ˆç«¯æŒ‡ä»¤ ç»ˆç«¯å¼€å¯æ ‘è“æ´¾é…ç½®é€‰é¡¹ï¼šsudo raspi-config æŸ¥çœ‹å½“å‰ç”µè„‘IP:hostname -I åˆ é™¤éç©ºç›®å½•æ–‡ä»¶å¤¹ï¼šrm -r æ–‡ä»¶å æ¸…å±æ“ä½œï¼šclear 2.3 é…ç½®ç¤ºä¾‹ä»£ç  ä»£ç 1ï¼šé…ç½®æ ‘è“æ´¾è‡ªåŠ¨å¼€å¯vnc ä¾‹ç¨‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #!/bin/sh export USER=\u0026#39;master\u0026#39; eval cd~$USER case \u0026#34;$1\u0026#34; in start) #å¯åŠ¨å‘½ä»¤è¡Œã€‚æ­¤å¤„è‡ªå®šä¹‰åˆ†è¾¨ç‡ã€æ§åˆ¶å°å·ç æˆ–å…¶å®ƒå‚æ•°ã€‚ su $USER -c \u0026#39;/usr/bin/vncserver -depth 24 -geometry 1920x1080:1\u0026#39; echo \u0026#34;Starting VNCServer for $USER\u0026#34; ;; stop) su $USER -c \u0026#39;/usr/bin/vncserver -kill:1\u0026#39; echo \u0026#34;VNCServer stopped\u0026#34; ;; *) echo \u0026#34;Usage: /etc/init.d/vncserver {start/stop}\u0026#34; exit 1 ;; esac exit 0 ä»£ç 2ï¼šè‡ªåŠ¨è¿æ¥çƒ­ç‚¹ ä¾‹ç¨‹ 1 2 3 4 5 6 7 8 9 10 11 #ï¼ˆwpa_supplicant.confï¼ˆæ–‡ä»¶åï¼‰ï¼‰ country=CN ctrl_interface=DIR=/var/run/wpa_supplicantï¼ŒGROUP=netdev update_config=1 network={ ssid=\u0026#34;WiFiåç§°\u0026#34; psk=\u0026#34;WiFiå¯†ç \u0026#34; key_mgmt=WPA-PSK priority=1 } 2.4 pythonå¼€å‘ç¯å¢ƒé…ç½®(venvè™šæ‹Ÿç¯å¢ƒ) æŸ¥çœ‹å½“å‰pythonç‰ˆæœ¬ï¼špython \u0026ndash;version åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š (1). sudo apt-get update ï¼ˆæ›´æ–°aptå·¥å…·ï¼‰ (2). sudo apt-get install python3-venvï¼ˆä¸‹è½½è™šæ‹Ÿç¯å¢ƒï¼‰ (3). python3 -m venv venv ï¼ˆå…ˆè¿›å…¥æƒ³è¦åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒçš„æ–‡ä»¶è·¯å¾„åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œæœ€åä¸ºç¯å¢ƒåç§°ï¼‰ (4). source venv/bin/activate ï¼ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼‰ (5). pip listï¼ˆæŸ¥çœ‹å½“å‰ç¯å¢ƒçš„pythonåŒ…ï¼‰ (6). deactivateï¼ˆé€€å‡ºå½“å‰çš„è™šæ‹Ÿç¯å¢ƒï¼‰ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒvenvæ—¶ç»§æ‰¿ç³»ç»Ÿçš„åŒ… æ–¹æ³• 1ï¼šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ—¶ç»§æ‰¿ç³»ç»ŸåŒ… python3 -m venv \u0026ndash;system-site-packages myenv è§£é‡Š1ï¼šmyenv æ˜¯ä½ çš„è™šæ‹Ÿç¯å¢ƒç›®å½•åï¼ˆå¯è‡ªå®šä¹‰ï¼‰ã€‚ è§£é‡Š2ï¼š\u0026ndash;system-site-packages ä¼šè®©è™šæ‹Ÿç¯å¢ƒç»§æ‰¿ç³»ç»Ÿä¸­å·²å®‰è£…çš„åŒ…ã€‚ æ–¹æ³• 2ï¼šå¯¹å·²å­˜åœ¨çš„è™šæ‹Ÿç¯å¢ƒå¯ç”¨ç³»ç»ŸåŒ… è§£é‡Šï¼šå¦‚æœè™šæ‹Ÿç¯å¢ƒå·²ç»åˆ›å»ºï¼Œä½†æ²¡æœ‰ç»§æ‰¿ç³»ç»ŸåŒ…ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹è™šæ‹Ÿç¯å¢ƒçš„é…ç½®æ–‡ä»¶æ‰‹åŠ¨å¯ç”¨. (1). æ‰¾åˆ°è™šæ‹Ÿç¯å¢ƒçš„ pyvenv.cfg æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨è™šæ‹Ÿç¯å¢ƒçš„æ ¹ç›®å½•ï¼‰ï¼š cat myenv/pyvenv.cfg (2). ä¿®æ”¹æˆ–æ·»åŠ ä»¥ä¸‹è¡Œä»£ç å†…å®¹ï¼š include-system-site-packages = true (3). é‡æ–°æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå³å¯ç”Ÿæ•ˆã€‚ 2.5 pythonå¼€å‘ åœ¨ Linux ä¸­ï¼Œè¦æŸ¥çœ‹ Python çš„ .py æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§å‘½ä»¤ï¼š ä½¿ç”¨ cat å‘½ä»¤ï¼š cat /path/to/your_python_file.pyï¼ˆcat å‘½ä»¤ç”¨äºæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œå°†ä¼šåœ¨ç»ˆç«¯è¾“å‡ºæ•´ä¸ª .py æ–‡ä»¶çš„å†…å®¹ï¼‰ ä½¿ç”¨ less å‘½ä»¤ï¼š less /path/to/your_python_file.pyï¼ˆless å‘½ä»¤å¯ä»¥æŒ‰é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œé€‚ç”¨äºè¾ƒå¤§çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´é”®å’Œ PageUp/PageDown é”®è¿›è¡Œæµè§ˆï¼‰ ä½¿ç”¨ more å‘½ä»¤ï¼š more /path/to/your_python_file.pyï¼ˆmore å‘½ä»¤ä¹Ÿå¯ä»¥æŒ‰é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œä¸ less ç±»ä¼¼ï¼Œä½†åœ¨æ˜¾ç¤ºæ–‡ä»¶å†…å®¹æ—¶çš„äº¤äº’æ–¹å¼ç•¥æœ‰ä¸åŒï¼‰ ä½¿ç”¨ vim æˆ– nano ç¼–è¾‘å™¨ï¼š(å‰ææ˜¯éœ€è¦å…ˆå®‰è£…å¥½æœ‰è¿™ä¸ªè¦ç”¨çš„ç¼–è¾‘å™¨,ä¸€èˆ¬nanoæ˜¯è‡ªå¸¦ä¼šæœ‰çš„) vim /path/to/your_python_file.pyæˆ–nano /path/to/your_python_file.pyï¼ˆvim å’Œ nano éƒ½æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æŸ¥çœ‹ .py æ–‡ä»¶çš„å†…å®¹ã€‚åœ¨ vim æˆ– nano ä¸­ï¼Œæ‚¨å¯ä»¥æŒ‰ Esc é”®é€€å‡ºæŸ¥çœ‹æ¨¡å¼ï¼Œç„¶åè¾“å…¥ :q å‘½ä»¤é€€å‡ºç¼–è¾‘å™¨ï¼‰ 2.6 vimç¼–è¾‘å™¨çš„ä½¿ç”¨ åˆå§‹æ¨¡å¼ï¼š :w ä¿å­˜ä¸é€€å‡º :q ä¸ä¿å­˜é€€å‡ºï¼Œä¸€èˆ¬ä¸wæ­é…:wqä¿å­˜å¹¶é€€å‡ºvimï¼Œå›åˆ°å‘½ä»¤è¡Œç•Œé¢ :! å¼ºåˆ¶æ€§æ“ä½œï¼Œä¸€èˆ¬ä¸qæ­é…:!q ä¸ºå¼ºåˆ¶é€€å‡ºä¸ä¿å­˜ / + æ–‡æœ¬ æŸ¥æ‰¾å­—ç¬¦ä¸²å‘½ä»¤ï¼ŒæŸ¥æ‰¾å¤šä¸ªåŒ¹é…ç»“æœï¼Œå¯ä»¥né”®å‘ä¸‹æŸ¥æ‰¾ï¼ŒNå‘ä¸ŠæŸ¥æ‰¾ã€‚ set nu æ˜¾ç¤ºè¡Œæ•°ã€‚ set nonu ä¸æ˜¾ç¤ºè¡Œæ•° sp + æ–‡ä»¶è·¯å¾„ å†æ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œspè¡¨ç¤ºæ°´å¹³åˆ‡åˆ†çª—å£ï¼Œvsè¡¨ç¤ºå‚ç›´åˆ‡åˆ†çª—å£ã€‚ v è¿›å…¥è§†å›¾æ¨¡å¼ i/a è¿›å…¥ç¼–è¾‘æ¨¡å¼ è§†å›¾æ¨¡å¼ï¼š ä¸Šã€ä¸‹ã€å·¦ã€å³é”®æˆ–è€… kï¼ˆä¸Šï¼‰ã€jï¼ˆä¸‹ï¼‰ã€hï¼ˆå·¦ï¼‰ã€lï¼ˆå³ï¼‰ å‘½ä»¤è¿›è¡Œå…‰æ ‡ç§»åŠ¨å¹¶é€‰ä¸­æ–‡å­— é€‰ä¸­æ–‡æœ¬åï¼Œdå‰ªåˆ‡ yå¤åˆ¶ pç²˜è´´ x åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„å•ä¸ªå­—ç¬¦ dd åˆ é™¤ä¸€æ•´è¡Œï¼ˆç›¸å½“äºå‰ªåˆ‡ï¼‰ï¼Œp ç²˜è´´ yy å¤åˆ¶å•è¡Œ u æ’¤é”€ EscæŒ‰é”® é€€å‡ºè§†å›¾æ¨¡å¼å›åˆ°åˆå§‹æ¨¡å¼ ç¼–è¾‘æ¨¡å¼ï¼š EscæŒ‰é”® é€€å‡ºè§†å›¾æ¨¡å¼å›åˆ°åˆå§‹æ¨¡å¼ å…¶ä»–æŒ‰é”®åˆ™æ­£å¸¸è¾“å…¥æ–‡æœ¬å³å¯ 3. ROS2å­¦ä¹ ç¬”è®° å¤§éƒ¨åˆ†æ˜¯æœ¬äººçš„å­¦ä¹ ç¬”è®°ï¼Œå­¦ä¹ è§†é¢‘ä¸»è¦æ˜¯é±¼é¦™ROSæœºå™¨äººä»–çš„çŸ¥è¯†ç‚¹å’Œè§†é¢‘å†…å®¹å¾ˆè¯¦ç»†ï¼ŒçœŸçš„æ˜¯åœ¨å°è¯\u0026quot;æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”\u0026quot;ã€‚æ­¤å¤–è¿˜ä¼šåŠ ä¸Šä¸€äº›ä¸ªäººç†è§£ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åŠ æ·±ç†è§£ï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒï¼\n3.1 ros2 run (1). å‘½ä»¤ros2 runä¼šä»ä¸€ä¸ªè½¯ä»¶åŒ…ä¸­å¯åŠ¨ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼š ros2 run \u0026lt;package_name\u0026gt; \u0026lt;executable_name\u0026gt; (2). è§£é‡Šï¼š egï¼šè¦è¿è¡Œturtlesimï¼Œè¯·æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š ros2 run turtlesim turtlesim_node turtlesimçª—å£å°†ä¼šæ‰“å¼€ è¿™é‡Œï¼ŒåŒ…åæ˜¯ ä½¿ç”¨ turtlesim ï¼Œå¯æ‰§è¡Œæ–‡ä»¶åæ˜¯ turtlesim_node ç„¶è€Œï¼Œæˆ‘ä»¬è¿˜ä¸çŸ¥é“èŠ‚ç‚¹åç§°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ ros2 node list å‘½ä»¤æŸ¥æ‰¾èŠ‚ç‚¹åç§°ã€‚ 3.2. ros2 node list (1). ros2 node list å‘½ä»¤å°†æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„èŠ‚ç‚¹çš„åç§°ã€‚å½“æ‚¨æƒ³ä¸èŠ‚ç‚¹è¿›è¡Œäº¤äº’æˆ–è€…ç³»ç»Ÿè¿è¡Œå¤šä¸ªèŠ‚ç‚¹æ—¶éœ€è¦è·Ÿè¸ªå®ƒä»¬æ—¶ï¼Œè¿™ç‰¹åˆ«æœ‰ç”¨ã€‚ (2). è§£é‡Šï¼š (A). åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼ŒåŒæ—¶ turtlesim ä»åœ¨è¿è¡Œï¼Œè¯·è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š ros2 node list (B). ç»ˆç«¯å°†è¿”å›èŠ‚ç‚¹åç§°ï¼š /turtlesim (C). å†æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ teleop èŠ‚ç‚¹ï¼š ros2 run turtlesim turtle_teleop_key ã€åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¬¡å¼•ç”¨äº†â€œturtlesimâ€è½¯ä»¶åŒ…ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åä¸ºâ€œturtle_teleop_keyâ€çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‘\n(D). è¿”å›åˆ°ä¹‹å‰è¿è¡Œros2 node listçš„ç»ˆç«¯ï¼Œå†æ¬¡è¿è¡Œè¯¥å‘½ä»¤ã€‚ä½ å°†ä¼šçœ‹åˆ°ä¸¤ä¸ªæ´»åŠ¨èŠ‚ç‚¹çš„åç§°ï¼š\n/turtlesim /teleop_turtle 3.3. é‡æ˜ å°„ (1). é‡æ˜ å°„ï¼šå…è®¸ä½ é‡æ–°åˆ†é…é»˜è®¤èŠ‚ç‚¹å±æ€§ï¼Œå¦‚èŠ‚ç‚¹åç§°ã€è¯é¢˜åç§°ã€æœåŠ¡åç§°ç­‰ï¼Œä»¥è‡ªå®šä¹‰çš„å€¼ã€‚åœ¨ä¸Šä¸€ä¸ªæ•™ç¨‹ä¸­ï¼Œä½ åœ¨turtle_teleop_keyä¸Šä½¿ç”¨äº†é‡æ˜ å°„æ¥æ”¹å˜cmd_velè¯é¢˜å’Œç›®æ ‡èŠ‚ç‚¹ä¸ºturtle2ã€‚ (2). è§£é‡Šï¼š - (A). ç°åœ¨ï¼Œè®©æˆ‘ä»¬é‡æ–°åˆ†é… /turtlesim èŠ‚ç‚¹çš„åç§°ã€‚åœ¨ä¸€ä¸ªæ–°çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š - ros2 run turtlesim turtlesim_node \u0026ndash;ros-args \u0026ndash;remap __node:=my_turtle - (B). ç”±äºæ‚¨å†æ¬¡è°ƒç”¨ros2 run å¯åŠ¨äº†turtlesimï¼Œå°†ä¼šæ‰“å¼€å¦ä¸€ä¸ªturtlesimçª—å£ã€‚ä½†æ˜¯ï¼Œç°åœ¨å¦‚æœæ‚¨è¿”å›åˆ°ä¹‹å‰è¿è¡Œros2 node listçš„ç»ˆç«¯ï¼Œå¹¶å†æ¬¡è¿è¡Œè¯¥å‘½ä»¤ï¼Œæ‚¨å°†çœ‹åˆ°ä¸‰ä¸ªèŠ‚ç‚¹åç§°ï¼š - /my_turtle - /turtlesim - /teleop_turtle 3.4. ros2èŠ‚ç‚¹ä¿¡æ¯ (æ—¢ç„¶æ‚¨çŸ¥é“äº†èŠ‚ç‚¹çš„åç§°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¿é—®æœ‰å…³å®ƒä»¬çš„æ›´å¤šä¿¡æ¯)\nros2 node info \u0026lt;node_name\u0026gt; (ä¾‹). è¦æŸ¥çœ‹æ‚¨æœ€æ–°çš„èŠ‚ç‚¹my_turtleï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š ros2 node info /my_turtle ros2 node infoè¿”å›è®¢é˜…è€…ã€å‘å¸ƒè€…ã€æœåŠ¡å’ŒåŠ¨ä½œçš„åˆ—è¡¨ï¼Œå³ä¸è¯¥èŠ‚ç‚¹è¿›è¡Œäº¤äº’çš„ROSå›¾è¿æ¥ã€‚è¾“å‡ºåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /my_turtle Subscribers: /parameter_events: rcl_interfaces/msg/ParameterEvent /turtle1/cmd_vel: geometry_msgs/msg/Twist Publishers: /parameter_events: rcl_interfaces/msg/ParameterEvent /rosout: rcl_interfaces/msg/Log /turtle1/color_sensor: turtlesim/msg/Color /turtle1/pose: turtlesim/msg/Pose Service Servers: /clear: std_srvs/srv/Empty /kill: turtlesim/srv/Kill /my_turtle/describe_parameters: rcl_interfaces/srv/DescribeParameters /my_turtle/get_parameter_types: rcl_interfaces/srv/GetParameterTypes /my_turtle/get_parameters: rcl_interfaces/srv/GetParameters /my_turtle/list_parameters: rcl_interfaces/srv/ListParameters /my_turtle/set_parameters: rcl_interfaces/srv/SetParameters /my_turtle/set_parameters_atomically: rcl_interfaces/srv/SetParametersAtomically /reset: std_srvs/srv/Empty /spawn: turtlesim/srv/Spawn /turtle1/set_pen: turtlesim/srv/SetPen /turtle1/teleport_absolute: turtlesim/srv/TeleportAbsolute /turtle1/teleport_relative: turtlesim/srv/TeleportRelative Service Clients: (none) Action Servers: /turtle1/rotate_absolute: turtlesim/action/RotateAbsolute Action Clients: (none) 3.5. ç¼–è¯‘è¿è¡ŒC++æ–‡ä»¶ (1). å…ˆåœ¨ç›®å½•ä¸‹ç¼–å†™CMakeFiles.txtï¼š\nç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 cmake_minimum_required(VERSION 3.8) project(ros2_cpp) add_executable(ros2_cpp_node ros2_cpp_node.cpp) find_package(rclcpp REQUIRED) # ç›´æ¥æŸ¥æ‰¾åˆ°å¯¹åº”çš„å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ message(STATUS ${rclcpp_INCLUDE_DIRS}) #å¤´æ–‡ä»¶åŠrclcppä¾èµ–çš„å¤´æ–‡ä»¶ message(STATUS ${rclcpp_LIBRARIES}) #åº“æ–‡ä»¶åŠrclcppä¾èµ–çš„åº“æ–‡ä»¶ target_include_directories(ros2_cpp_node PUBLIC ${rclcpp_INCLUDE_DIRS}) #å¤´æ–‡ä»¶åŒ…å¥½åˆ°ros2_cpp_nodeæ–‡ä»¶å†… target_link_libraries(ros2_cpp_node ${rclcpp_LIBRARIES}) #åº“æ–‡ä»¶é“¾æ¥åˆ°ros2_cpp_nodeæ–‡ä»¶å†… (2). å†åœ¨å½“å‰ç›®å½•ä¸‹è¿è¡Œç»ˆç«¯å‘½ä»¤ï¼š\ncmake . make ã€ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ–‡ä»¶ä¸ºç»¿è‰²çš„ï¼Œç›´æ¥ç»ˆç«¯è¾“å…¥æ—¢å¯è¿è¡Œã€‘ 3.6. åˆ›å»ºåŠŸèƒ½åŒ… å…ˆåˆ›å»ºä¸€ä¸ªå·¥ä½œç©ºé—´ï¼Œç„¶åå†å·¥ä½œç©ºé—´ä¸‹æ–°å»ºsrcæ–‡ä»¶å¤¹ï¼Œè¿›å…¥srcæ–‡ä»¶å¤¹å†…è¿è¡Œï¼šros2 pkg create demo_python_topic \u0026ndash;build-type ament_python \u0026ndash;dependencies rclpy example_interfaces \u0026ndash;license Apache-2.0ã€ä¸­é—´çš„\u0026ndash;æ˜¯å¯é€‰é¡¹é…ç½®ï¼Œæœ‰ç¼–è¯‘ç‰ˆæœ¬ï¼Œæ·»åŠ çš„ä¾èµ–ï¼Œè®¸å¯è¯ï¼Œå­˜æ”¾ç›®å½•ç­‰ç­‰ã€‘ ç„¶åå†å›åˆ°å·¥ä½œç©ºé—´æ–‡ä»¶å¤¹å†…è¿è¡Œï¼šcolcon build (âœ”ï¸). å¯ç”¨èŠ‚ç‚¹å‡½æ•° setup.pyæ·»åŠ ï¼š \u0026lsquo;python_NODE = demo_python_pkg.pyhon_node:main\u0026rsquo;, ã€ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ä»¥åŠåŒ…åå’Œè·¯å¾„ï¼Œå‡½æ•°åç§°ã€‘ (âœ”ï¸). å°†éœ€è¦å¯¼å…¥çš„åº“åŠ å…¥åˆ°package.xmlåŠŸèƒ½åŒ…æ¸…å•æ–‡ä»¶çš„å£°æ˜é‡Œé¢å¯¼å…¥åŒ…ï¼Œæ·»åŠ ä¾èµ–ä¿¡æ¯ï¼š 1 \u0026lt;depend\u0026gt;rclpy\u0026lt;/depend\u0026gt; (âœ”ï¸). æ·»åŠ å®Œä¹‹åéœ€è¦å¼€å¯æ„å»ºåŠŸèƒ½åŒ…ï¼šcolcon build ã€ç»ˆç«¯ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæ‰§è¡Œå®Œä¹‹åæ˜¯ä¼šæ ¹æ®ä½ ä¹‹å‰é…ç½®çš„è°ƒç”¨å‡½æ•°æ‹·è´å¤åˆ¶ä¸€ä»½ä¸€æ¨¡ä¸€æ ·çš„.pyæ–‡ä»¶ï¼Œç„¶åè¿è¡Œè°ƒç”¨çš„æ˜¯å¤åˆ¶è¿‡æ¥çš„æ–‡ä»¶ï¼Œä¸æ˜¯åŸæ¥çš„æœ¬èº«çš„æ–‡ä»¶ï¼Œæ‰€ä»¥åç»­å†™äº†æ›´æ–°ä¹‹åå®ƒçš„åŒ…è°ƒç”¨çš„æ˜¯ä½ ä¸Šä¸€æ¬¡æ‹·è´çš„ï¼Œä¸æ˜¯ä½ æ–°å†™çš„ã€‘ (âœ”ï¸). ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼šsource install/setup.bashã€æ­¤æ–‡ä»¶æ˜¯åˆ›å»ºæ—¶ç”Ÿæˆçš„ã€‘\næˆ–è€…ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ è¿™ä¸ªç¯å¢ƒå˜é‡ï¼š 1 export PYTHONPATH=/home/robot/chapt2/install/demo_python_pkg/lib/python3.12/site-packages:$PYTHONPATH # $PYTHONPATHè¡¨ç¤ºåŸæ¥çš„è·¯å¾„ä¸å˜ï¼Œç¼©å†™ï¼Œç„¶ååŠ ï¼šå‰é¢åŠ éœ€è¦æ·»åŠ çš„è·¯å¾„ 3.7. å…¶ä»– (A). echo ğŸ”µæŸ¥çœ‹å½“å‰ROS1/ROS2ï¼šecho $ROS_VERSIONã€ä¸­é—´æœ‰ä¸ªä¸‹åˆ’çº¿ã€‘ ğŸ”µæŸ¥çœ‹å½“å‰ROSç‰ˆæœ¬ï¼šecho $ROS_DISTRO (B). æ€»çš„æ‰“å°ç¯å¢ƒå˜é‡ä¿¡æ¯ ğŸŸ¡printenv æ‰“å°ç‰¹å®šçš„ä¿¡æ¯ï¼Œè¿›è¡Œä¿¡æ¯è¿‡æ»¤ï¼šprintenv | grep æƒ³è¦æ‰“å°çš„ç¯å¢ƒå˜é‡ (C). ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–‡ä»¶ä½ç½® ğŸŸ£export ç¯å¢ƒå˜é‡åç§°=æƒ³è¦ä¿®æ”¹çš„æ–‡ä»¶ä½ç½®ï¼ˆä»…åœ¨å½“å‰ç»ˆç«¯ä¸´æ—¶ä¿®æ”¹æˆæ•ˆï¼Œå†å¦å¼€è¿˜æ˜¯åŸæ¥çš„ç¯å¢ƒä½ç½®ï¼‰ (D). åœ¨linuxä¸­ï¼Œä»¥.å¼€å¤´çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œæ˜¯éšè—æ–‡ä»¶ ğŸ”´(ä¾‹). å¯åŠ¨è‡ªè¿è¡Œè„šæœ¬ï¼š~/.bashrc (E). å®‰è£…pythonæ’ä»¶åœ¨vscodeä¸­çš„ä»£ç æ³¨é‡ŠctrlåŠ å·¦é”®ï¼Œæˆ–è€…é•¿æ”¾æç¤ºçš„æ³¨é‡Šå½¢å¼ (F). å¢åŠ å¯æ‰§è¡Œæ–‡ä»¶çš„æ‰§è¡Œæƒé™ï¼Œç™½è‰²ä¸ºè¾ƒä½æƒé™ï¼Œç»¿è‰²ä¸ºè¾ƒé«˜æƒé™å¯è¿›è¡Œæ‰§è¡Œï¼š ğŸŸ chmod a+x æ–‡ä»¶å (G). æŸ¥çœ‹èŠ‚ç‚¹çš„å…·ä½“ä¿¡æ¯ âš«ros2 node info /èŠ‚ç‚¹åç§° æ‰“å°ç›®æ ‡è¯é¢˜çš„ä¿¡æ¯ ros2 topic echo ç›®æ ‡è¯é¢˜çš„åç§° æŸ¥çœ‹è¯é¢˜çš„è¯¦ç»†ä¿¡æ¯ ros2 topic info ç›®æ ‡è¯é¢˜çš„åç§° æ‰“å°è¯é¢˜çš„æŸä¸ªæ¥å£çš„è¯¦ç»†ä¿¡æ¯ ros2 interface show æ¥å£åç§° å‘å¸ƒä¸€ä¸ªè¯é¢˜ ros2 topic pub /turtle1/cmd_vel geometry_msgs/msg/Twist \u0026ldquo;{linear: {x: 0.4, y: 0.0} , angular: {z: 0.0}}\u0026rdquo; ã€è¯é¢˜åç§°ï¼‹æ¥å£åç§°ï¼‹å‘å¸ƒä¿¡æ¯ã€‘\næ‰“å°å½“å‰è¯é¢˜åˆ—è¡¨ ros2 topic list 3.8 å·¥ä½œç©ºé—´(WorkPlace) åˆ›å»ºä½¿ç”¨å·¥ä½œç©ºé—´ mkdir -p chapt2_ws/src ã€-pè¡¨ç¤ºåˆ›å»ºç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ã€‘ mv demo_cpp_pkg/ chapt2_ws/src/ã€å°†è¦æ•´åˆçš„åŒ…å‰ªåˆ‡ç§»åŠ¨åˆ°å·¥ä½œç©ºé—´ä¸‹ã€‘ mv demo_cpp_pkg/ chapt2_ws/src/ cd chapt2_ws/ã€è¿›å…¥å·¥ä½œç©ºé—´å†æ„å»ºä¸»ï¼Œä¿è¯æ¶æ„çš„æ¸…æ™°å®Œæ•´ã€‘ colcon build ã€æ„å»ºã€‘ å¦‚æœæœ‰åŠŸèƒ½åŒ…çš„ä¾èµ–å…³ç³»éœ€è¦æ›´æ”¹æ„å»ºé¡ºåºå°±åœ¨å¯¹åº”éœ€è¦ä¾èµ–çš„package.xmlæ–‡ä»¶å†…æ·»åŠ å¯¹åº”çš„ä¾èµ–åŒ…æ—¢å¯ï¼Œç³»ç»Ÿå°±ä¼šå…ˆç¼–è¯‘æ„å»ºè¢«ä¾èµ–çš„åŒ… è¢«ä¾èµ–çš„åŒ…å 3.9 Pythonå­¦ä¹  ç®€å•çš„ç±»å’Œå‡½æ•°ä»¥åŠinitæ–¹æ³•çš„ç†è§£ ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class PersonNode: def __init__(self,name_value:str,age_value:int): print(\u0026#39;PersonNode __init__æ–¹æ³•è¢«è°ƒç”¨å¹¶ä¸”è¿˜æ·»åŠ äº†ä¸¤ä¸ªå±æ€§ï¼\u0026#39;) self.name=name_value self.age=age_value def eat(self,food_name:str): \u0026#34;\u0026#34;\u0026#34; æ–¹æ³•ï¼šåƒä¸œè¥¿ :food_name é£Ÿç‰©åå­— \u0026#34;\u0026#34;\u0026#34; print(f\u0026#34;{self.name},{self.age}å²ï¼Œçˆ±åƒ{food_name}ï¼\u0026#34;) def main(): node = PersonNode(\u0026#39;æ³•å¤–ç‹‚å¾’å¼ ä¸‰\u0026#39;,20) node2 = PersonNode(\u0026#39;æ³•å¤–ç‹‚å¾’é‡Œæ–¯\u0026#39;,19) node.eat(\u0026#39;é»„ç„–é¸¡ç±³é¥­\u0026#39;) node2.eat(\u0026#39;é±¼é¦™è‚‰ä¸\u0026#39;) ç®€å•çš„ç»§æ‰¿æ€æƒ³ ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import rclpy from rclpy.node import Node #å€’å…¥Nodeç±» class PersonNode(Node):#æ­¤å¤„çš„Nodeå°±æ˜¯ç»§æ‰¿äºå¯¼å…¥çš„rclpy.nodeé‡Œé¢çš„Nodeç±» def __init__(self,node_name:str,name_value:str,age_value:int): print(\u0026#39;PersonNode __init__æ–¹æ³•è¢«è°ƒç”¨å¹¶ä¸”è¿˜æ·»åŠ äº†ä¸¤ä¸ªå±æ€§ï¼\u0026#39;) super().__init__(node_name) #åˆå§‹åŒ–èŠ‚ç‚¹ self.name=name_value self.age=age_value def eat(self,food_name:str): \u0026#34;\u0026#34;\u0026#34; æ–¹æ³•ï¼šåƒä¸œè¥¿ :food_name é£Ÿç‰©åå­— \u0026#34;\u0026#34;\u0026#34; # print(f\u0026#34;{self.name},{self.age}å²ï¼Œçˆ±åƒ{food_name}ï¼\u0026#34;) self.get_logger().info(f\u0026#34;{self.name},{self.age}å²ï¼Œçˆ±åƒ{food_name}ï¼\u0026#34;) #å°†å†…å®¹æ·»åŠ åˆ°rosæ—¥å¿—é‡Œé¢å¹¶ä¸”æ‰“å° def main(): rclpy.init() #ä½¿ç”¨ros2å‰éœ€è¦æ‰§è¡Œinitåˆå§‹åŒ–èµ„æºé…ç½® node = PersonNode(\u0026#39;zhangsan_node\u0026#39;,\u0026#39;æ³•å¤–ç‹‚å¾’å¼ ä¸‰\u0026#39;,20) node.eat(\u0026#39;é»„ç„–é¸¡ç±³é¥­\u0026#39;) rclpy.spin(node) #æ”¶é›†èŠ‚ç‚¹æ•°æ® rclpy.shutdown() #å…³é—­èŠ‚ç‚¹ å¤šçº¿ç¨‹åŠå›è°ƒå‡½æ•° ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 import threading import requests class Download: def download(sel,url,callback_word_count): print(f\u0026#34;çº¿ç¨‹ï¼š{threading.get_ident()}å¼€å§‹ä¸‹è½½ï¼š{url}\u0026#34;) response = requests.get(url) response.encoding=\u0026#39;utf-8\u0026#39; #ç»™è¯·æ±‚çš„ç»“æœä¸€ä¸ªç¼–ç  callback_word_count(url,response.text) #è°ƒç”¨å›è°ƒå‡½æ•° #pass def start_download(self,url,callback_word_count): thread = threading.Thread(target=self.download,args=(url,callback_word_count)) #åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ targetç›®æ ‡å‡½æ•°ï¼Œargséœ€è¦ä¼ å…¥çš„å‚æ•° thread.start() #å¯åŠ¨çº¿ç¨‹ # pass def world_count(url,result): \u0026#34;\u0026#34;\u0026#34; æ™®é€šçš„å‡½æ•°ï¼Œç”¨äºå›è°ƒ \u0026#34;\u0026#34;\u0026#34; print(f\u0026#34;{url}:{len(result)}-\u0026gt;{result[:5]}\u0026#34;) def main(): download = Download() download.start_download(\u0026#39;urlç½‘å€\u0026#39;,world_count) download.start_download(\u0026#39;urlç½‘å€\u0026#39;,world_count) download.start_download(\u0026#39;urlç½‘å€\u0026#39;,world_count) 3.10 C++å­¦ä¹  C++ vscodeçš„æ‰©å±•é‡åˆ°includeæŠ¥é”™æ‰¾ä¸åˆ°è·¯å¾„å°±åœ¨ä»–æ‰©å±•é…ç½®ä¸­æ·»åŠ ç±»ä¼¼ï¼š/opt/ros/jazzy/include/** ä¾æ®ç±»ä¼¼çš„é¢å‘å¯¹è±¡ç¼–ç¨‹åŸç†ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; // å®šä¹‰ä¸€ä¸ªPersionNodeçš„ç±»å¹¶ä¸”ç»§æ‰¿rclcppçš„Nodeä½œä¸ºçˆ¶ç±» class PersonNode : public rclcpp::Node { private: // å£°æ˜ std::string name_; int age_; public: PersonNode(const std::string \u0026amp;node_name, const std::string \u0026amp;name, const int \u0026amp;age) : Node(node_name) /*è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç­‰åŒäºpythonä¸­çš„ super().__init__(),ä¼ å…¥èŠ‚ç‚¹çš„åç§°ä½œä¸ºå‚æ•°*/ { this-\u0026gt;name_ = name; this-\u0026gt;age_ = age; }; void eat(const std::string \u0026amp;food_name) { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;æˆ‘æ˜¯%s,%då²äº†,çˆ±åƒ%s\u0026#34;, this-\u0026gt;name_.c_str(), this-\u0026gt;age_, food_name.c_str()); }; }; int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;PersonNode\u0026gt;(\u0026#34;persion_node\u0026#34;, \u0026#34;å°è¿‡\u0026#34;, 20); node-\u0026gt;eat(\u0026#34;é»„ç„–é¸¡ç±³é¥­\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); return 0; } å°†ä»£ç æ·»åŠ åˆ°src/ç›®å½•ä¸‹åˆ›å»ºçš„person_node.cppæ–‡ä»¶å†…ï¼Œç¼–å†™å¥½åå†åˆ°CmkeList.txtæ–‡ä»¶å†…æ·»åŠ æŒ‡å®šè¾“å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶åå’Œéœ€è¦è¿æ¥çš„åŒ…åä»¥åŠæ‰§è¡Œç¼–è¯‘ æœ€ç»ˆè¿›å…¥åˆ°CmkeList.txtç›®å½•ç»“æ„ä¸‹ï¼ˆä¾‹å¦‚å›¾ç‰‡ä¸­çš„ç›®å½•åº”è¿›å…¥chart2_ws/ï¼‰è¿è¡Œ colcon build #ç¼–è¯‘ source install/setup.bash C++æ–°ç‰¹æ€§ autoè‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include \u0026#34;iostream\u0026#34; int main() { //auto çš„è‡ªåŠ¨ç±»å‹æ¨å¯¼ auto xn = 2 ; //int xn = 2; auto yn = 3.14f; //float yn = 3.1415; auto zn = \u0026#39;a\u0026#39;;//char zn = \u0026#39;a\u0026#39;; std::cout\u0026lt;\u0026lt;xn\u0026lt;\u0026lt;std::endl; std::cout\u0026lt;\u0026lt;yn\u0026lt;\u0026lt;std::endl; std::cout\u0026lt;\u0026lt;zn\u0026lt;\u0026lt;std::endl; return 0; } å…±äº«æŒ‡é’ˆ ä½¿ç”¨å…±äº«æŒ‡é’ˆä¸è¦ç”¨é‡å¤æ–°å¢å†…å­˜åœ°å€ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨å›æ”¶ä¸ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œä¾‹å¦‚ä¸‹é¢çš„make_sharedä¾‹å­ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include \u0026#34;iostream\u0026#34; #include \u0026#34;memory\u0026#34; int main() { auto p1 = std::make_shared\u0026lt;std::string\u0026gt;(\u0026#34;This is a str.\u0026#34;); // std::make_shared\u0026lt;æ•°æ®ç±»å‹/ç±»\u0026gt;ï¼ˆå‚æ•°ï¼‰ï¼›è¿”å›å€¼ï¼Œå¯¹åº”çš„å…±äº«æŒ‡é’ˆ std::shared_ptr\u0026lt;std::string\u0026gt; å†™æˆ auto std::cout\u0026lt;\u0026lt;\u0026#34;p1çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p1.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p1.get()\u0026lt;\u0026lt;std::endl; // 1 auto p2 =p1; std::cout\u0026lt;\u0026lt;\u0026#34;p1çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p1.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p1.get()\u0026lt;\u0026lt;std::endl; // 2 std::cout\u0026lt;\u0026lt;\u0026#34;p2çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p2.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p2.get()\u0026lt;\u0026lt;std::endl; // 2 p1.reset(); //é‡Šæ”¾å¼•ç”¨ï¼Œä¸æŒ‡å‘â€œThis is a str.â€æ‰€åœ¨å†…å­˜ std::cout\u0026lt;\u0026lt;\u0026#34;p1çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p1.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p1.get()\u0026lt;\u0026lt;std::endl; // 0 std::cout\u0026lt;\u0026lt;\u0026#34;p2çš„å¼•ç”¨è®¡æ•°\u0026#34;\u0026lt;\u0026lt; p2.use_count()\u0026lt;\u0026lt;\u0026#34;,æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p2.get()\u0026lt;\u0026lt;std::endl; // 2-1=1 std::cout\u0026lt;\u0026lt;\u0026#34;p2çš„æŒ‡å‘å†…å­˜åœ°å€ï¼š\u0026#34;\u0026lt;\u0026lt;p2-\u0026gt;c_str()\u0026lt;\u0026lt;std::endl; // è°ƒç”¨æˆå‘˜æ–¹æ³• This is a str. return 0; } åŒ¿åå‡½æ•° æ¢ä¸€ç§è¯­æ³•çš„å‡½æ•° ä¸‹é¢lambdaå‡½æ•°ç¤ºä¾‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #include \u0026#34;iostream\u0026#34; #include \u0026lt;algorithm\u0026gt; int main() { auto add = [](int a,int b) -\u0026gt; int {return a+b;}; int sum = add(200,50); auto print_sum = [sum]() -\u0026gt; void //æ­¤å¤„ç›´æ¥å°†sumå†…å®¹è°ƒç”¨è¿‡æ¥ { std::cout\u0026lt;\u0026lt;sum\u0026lt;\u0026lt;std::endl; }; print_sum(); return 0; } å‡½æ•°åŒ…è£…å™¨ï¼Œç†è§£ä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 #include \u0026lt;iostream\u0026gt; #include \u0026lt;functional\u0026gt; // è‡ªç”±å‡½æ•° void save_with_free_fun(const std::string \u0026amp;file_name) { std::cout \u0026lt;\u0026lt; \u0026#34;è‡ªç”±å‡½æ•°ï¼š\u0026#34; \u0026lt;\u0026lt; file_name \u0026lt;\u0026lt; std::endl; } // æˆå‘˜å‡½æ•° class FileSave { private: public: FileSave(/* args */) = default; ~FileSave() = default; void save_with_member_fun(const std::string \u0026amp;file_name) { std::cout \u0026lt;\u0026lt; \u0026#34;æˆå‘˜æ–¹æ³•ï¼š\u0026#34; \u0026lt;\u0026lt; file_name \u0026lt;\u0026lt; std::endl; }; }; int main() { FileSave file_save; // Lambdaå‡½æ•° auto save_with_lambda_fun = [](const std::string \u0026amp;file_name) -\u0026gt; void { std::cout \u0026lt;\u0026lt; \u0026#34;Lambda å‡½æ•°ï¼š\u0026#34; \u0026lt;\u0026lt; file_name \u0026lt;\u0026lt; std::endl; }; //å¸¸è§çš„æ™®é€šå‡½æ•°è°ƒç”¨ // save_with_lambda_fun(\u0026#34;file.txt\u0026#34;); // Lambdaå‡½æ•°çš„è°ƒç”¨ // file_save.save_with_member_fun(\u0026#34;file.txt\u0026#34;); // æˆå‘˜å‡½æ•°çš„è°ƒç”¨ // save_with_free_fun(\u0026#34;file.txt\u0026#34;); // è‡ªç”±å‡½æ•°çš„è°ƒç”¨ //ä½¿ç”¨å‡½æ•°åŒ…è£…å™¨ä¹‹åçš„ï¼š std::function\u0026lt;void(const std::string\u0026amp;)\u0026gt; save1=save_with_free_fun; std::function\u0026lt;void(const std::string\u0026amp;)\u0026gt; save2=save_with_lambda_fun; //æˆå‘˜å‡½æ•°ï¼Œæ”¾å…¥åŒ…è£…å™¨ std::function\u0026lt;void(const std::string\u0026amp;)\u0026gt; save3=std::bind(\u0026amp;FileSave::save_with_member_fun, \u0026amp;file_save,std::placeholders::_1); //ä¿æŠ¤ç±»çš„å…¶ä»–æ–¹æ³•ä¸è¢«è°ƒç”¨ //ç»Ÿä¸€çš„è°ƒç”¨æ–¹æ³• save1(\u0026#34;file.txt\u0026#34;); save2(\u0026#34;file.txt\u0026#34;); save3(\u0026#34;file.txt\u0026#34;); return 0; } 3.11 å¤šçº¿ç¨‹ä»¥åŠå›è°ƒå‡½æ•° C++å…·ä½“(æœ‰å…³httpæœåŠ¡çš„è¯·æ±‚ç­‰éƒ¨åˆ†è¾ƒä¸ºå¤æ‚ï¼Œè¯¦ç»†è¯·çœ‹ROS2 å°é±¼) ã€æ‰“å¼€httpæœåŠ¡ï¼špython3 -m http.serverã€‘ ç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #include \u0026lt;iostream\u0026gt; #include \u0026lt;thread\u0026gt; //å¤šçº¿ç¨‹ #include \u0026lt;chrono\u0026gt; //æ—¶é—´ç›¸å…³ #include \u0026lt;functional\u0026gt; //å‡½æ•°åŒ…è£…å™¨ #include \u0026#34;cpp-httplib/httplib.h\u0026#34; //ä¸‹è½½ç›¸å…³ class Download { private: /* data */ public: void download(const std::string \u0026amp;host,const std::string \u0026amp;path,const std::function\u0026lt;void(const std::string\u0026amp;,const std::string\u0026amp;)\u0026gt; \u0026amp;callback_word_count) { std::cout\u0026lt;\u0026lt;\u0026#34;çº¿ç¨‹\u0026#34;\u0026lt;\u0026lt;std::this_thread::get_id()\u0026lt;\u0026lt;std::endl; httplib::Client client(host); auto response=client.Get(path); if(response\u0026amp;\u0026amp;response-\u0026gt;status==200) { callback_word_count(path,response-\u0026gt;body); } }; void start_download(const std::string \u0026amp;host,const std::string \u0026amp;path,const std::function\u0026lt;void(const std::string\u0026amp;,const std::string\u0026amp;)\u0026gt; \u0026amp;callback_word_count) { auto download_fun=std::bind(\u0026amp;Download::download,this,std::placeholders::_1,std::placeholders::_2,std::placeholders::_3); std::thread thread(download_fun,host,path,callback_word_count); thread.detach(); //çº¿ç¨‹åˆ†ç¦»ï¼ }; }; int main() { auto d=Download(); auto word_count =[](const std::string \u0026amp;path,const std::string \u0026amp;result) -\u0026gt;void { std::cout\u0026lt;\u0026lt;\u0026#34;ä¸‹è½½å®Œæˆ\u0026#34;\u0026lt;\u0026lt;path\u0026lt;\u0026lt;\u0026#34;:\u0026#34;\u0026lt;\u0026lt;result.length()\u0026lt;\u0026lt;\u0026#34;-\u0026gt;\u0026#34;\u0026lt;\u0026lt;result.substr(0,5)\u0026lt;\u0026lt;std::endl; }; d.start_download(\u0026#34;hoståŸŸå\u0026#34;,\u0026#34;path1åœ°å€\u0026#34;,word_count); d.start_download(\u0026#34;hoståŸŸå\u0026#34;,\u0026#34;path2åœ°å€\u0026#34;,word_count); d.start_download(\u0026#34;hoståŸŸå\u0026#34;,\u0026#34;path3åœ°å€\u0026#34;,word_count); std::this_thread::sleep_for(std::chrono::milliseconds(1000*100));//ä¼‘çœ 10s return 0; } 3.12 è¯é¢˜ è¯é¢˜çš„å‘å¸ƒ ç¤ºä¾‹pythonèŠ‚ç‚¹ä»£ç å‘å¸ƒè¯é¢˜ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 import rclpy from rclpy.node import Node import requests from example_interfaces.msg import String from queue import Queue class NovelPuNode(Node): def __init__(self,node_name): super().__init__(node_name) self.get_logger().info(f\u0026#34;{node_name},å¯åŠ¨ï¼\u0026#34;) self.novel_queue_=Queue() #åˆ›å»ºé˜Ÿåˆ— æ”¾åœ¨å‰é¢ self.novel_publisher_ = self.create_publisher(String,\u0026#39;novel\u0026#39;,10) self.create_timer(5,self.timer_callback) def timer_callback(self): if self.novel_queue_.qsize()\u0026gt;0: line = self.novel_queue_.get() msg=String() #ç»„è£… msg.data=line self.novel_publisher_.publish(msg) self.get_logger().info(f\u0026#34;å‘å¸ƒäº†ï¼š{msg} è¿™æ¡ä¿¡æ¯ï¼\u0026#34;) def download(self,url): response = requests.get(url) #å‘é€å¼€å§‹è¯·æ±‚ response.encoding=\u0026#39;utf-8\u0026#39; #ç»™è¯·æ±‚çš„ç»“æœä¸€ä¸ªç¼–ç  text =response.text self.get_logger().info(f\u0026#34;ä¸‹è½½{url},{len(text)}\u0026#34;) for line in text.splitlines(): #è·å–åˆ°æ¯ä¸€è¡Œçš„æ•°æ®å­˜å‚¨åˆ°é˜Ÿåˆ—ä¸­ æŒ‰è¡Œåˆ†å‰² self.novel_queue_.put(line) def main(): rclpy.init() node = NovelPuNode(\u0026#39;novel_pub\u0026#39;) node.download(\u0026#39;http://0.0.0.0:8000/novel1.txt\u0026#39;) rclpy.spin(node) rclpy.shutdown() è®¢é˜…è¯é¢˜ pythonç¤ºä¾‹ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 import espeakng import rclpy from rclpy.node import Node from example_interfaces.msg import String from queue import Queue import threading import time class NovelSubNode(Node): def __init__(self,node_name): super().__init__(node_name) self.get_logger().info(f\u0026#34;{node_name},å¯åŠ¨ï¼\u0026#34;) self.novels_queue_ =Queue() self.novel_subscriber_=self.create_subscription(String,\u0026#39;novel\u0026#39;,self.novel_callback,10) self.speech_thread_ =threading.Thread(target=self.speake_thread) self.speech_thread_.start() def novel_callback(self,msg): self.novels_queue_.put(msg.data) def speake_thread(self): speaker =espeakng.Speaker() speaker.voice=\u0026#39;zh-yue\u0026#39; while rclpy.ok(): #æ£€æµ‹å½“å‰ROSä¸Šä¸‹æ–‡æ˜¯å¦OK if self.novels_queue_.qsize()\u0026gt;0: text =self.novels_queue_.get() self.get_logger().info(f\u0026#39;æœ—è¯µï¼š{text}\u0026#39;) speaker.say(text) #è¯´ speaker.wait() #ç­‰ä»–è¯´å®Œ else: # è®©å½“å‰è¿›ç¨‹ä¼‘çœ 1s time.sleep(1) def main(): rclpy.init() node = NovelSubNode(\u0026#39;novel_sub\u0026#39;) rclpy.spin(node) rclpy.shutdown() å®‰è£…espeakngè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼šï¼ˆå»ºè®®æ˜¯ç›´æ¥åˆ›å»ºä¸€ä¸ªåˆé€‚çš„è™šæ‹Ÿç¯å¢ƒvenvç„¶åä¸‹è½½ä½ åç»­éœ€è¦çš„åº“ï¼Œä¸è¦ç”¨å…¨å±€ç³»ç»Ÿï¼‰ ç›´æ¥å…ˆè¿›å…¥åˆ°ä½ æƒ³è¦æ”¾ç½®è™šæ‹Ÿç¯å¢ƒçš„æ–‡ä»¶ä¸­ï¼Œå»ºè®®æ˜¯ç›´æ¥æ”¾åˆ°~/ç›®å½•ä¸‹ï¼Œç„¶åè¿è¡Œï¼š 1 2 # ä½¿ç”¨å…¨å±€Pythonåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶ç»§æ‰¿ç³»ç»ŸåŒ… # /bin/python3 -m venv --system-site-packages ~/mvenv éšååœ¨ä½ çš„vscodeä¸­æ›¿æ¢ä¸ºä½ æ–°å»ºçš„ç¯å¢ƒï¼š ä¹‹åä½ ç¼ºå°‘å“ªä¸ªåº“ï¼Œå°±åœ¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒä¸‹ç›´æ¥ï¼š(pip install åº“å ) æ—¢å¯ æœ€ç»ˆçš„ç¼–è¯‘åä½¿ç”¨ros2 run æ—¶éœ€è¦æå‰åœ¨æœ¬å·¥ä½œç©ºé—´æ–°å»ºä¸€ä¸ª.shè„šæœ¬æ–‡ä»¶ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ source ~/mvenv/bin/activate # é…ç½® ROS2 ç¯å¢ƒ éœ€è¦æ ¹æ®è‡ªå·±çš„ç³»ç»Ÿæ¥é…ç½® source /opt/ros/jazzy/setup.bash # é…ç½®ä½ çš„å·¥ä½œç©ºé—´ source ~/chapt3/topic_ws/install/setup.bash # æŠŠè™šæ‹Ÿç¯å¢ƒçš„ Python è·¯å¾„åŠ å…¥åˆ° ROS2 çš„ Python è·¯å¾„ä¸­ åç»­å…¶ä»–å·¥ç¨‹æˆ–è€…å·¥ä½œç©ºé—´çš„pythonä¸­éœ€è¦ros2è°ƒç”¨è‡ªå·±åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒçš„ç¬¬ä¸‰æ–¹åº“æ—¶ç›´æ¥ä¿®è¯¥è¿™æ®µä¸­çš„å¯¹åº”è™šæ‹Ÿç¯å¢ƒçš„åè¯/ä½ç½®å³å¯ export PYTHONPATH=$PYTHONPATH:/home/robot/mvenv/lib/python3.12/site-packages echo \u0026#34;ROS2 + Python è™šæ‹Ÿç¯å¢ƒå·²é…ç½®å®Œæˆï¼\u0026#34; ç„¶åæ­£å¸¸colcon buildå’Œsource install/setup.bashæ—¢å¯è¿è¡Œros2 run C++å‘å¸ƒè¯é¢˜æ§åˆ¶å°æµ·é¾Ÿè¿åŠ¨ ç¤ºä¾‹ä»£ç (ä»…å‘å¸ƒè¯é¢˜)ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; using namespace std::chrono_literals; class TurtlrCircleNode:public rclcpp::Node { private: rclcpp::TimerBase::SharedPtr timer_; //åˆ›å»ºè®¡æ—¶å™¨ rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ public: explicit TurtlrCircleNode(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { publisher_=this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;,10); timer_=this-\u0026gt;create_wall_timer(1000ms,std::bind(\u0026amp;TurtlrCircleNode::timer_callback,this)); } void timer_callback() { auto msg=geometry_msgs::msg::Twist(); msg.linear.x=1.0; msg.angular.z=0.5; publisher_-\u0026gt;publish(msg); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;TurtlrCircleNode\u0026gt;(\u0026#34;turtle_circle\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } ç¤ºä¾‹ä»£ç (è®¢é˜…åŠ å‘å¸ƒè¯é¢˜ æ§åˆ¶å°æµ·é¾Ÿåˆ°è®¾å®šçš„ç›®æ ‡ç‚¹) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; using namespace std::chrono_literals; class TurtrlControlNode:public rclcpp::Node { private: // rclcpp::TimerBase::SharedPtr timer_; //åˆ›å»ºè®¡æ—¶å™¨ rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr subscription_;//è¨‚é–±è€…çš„æ™ºèƒ½æŒ‡é‡ double target_x_{1.0};//ç›®æ¨™ä½ç½®xåº§æ¨™ double target_y_{1.0}; //ç›®æ¨™ä½ç½®yåº§æ¨™ double k_{1.0}; // æ¯”ä¾‹ä¿‚æ•¸ double max_speed_{3.0}; //æœ€å¤§é€Ÿåº¦ public: explicit TurtrlControlNode(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { publisher_=this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;,10); // timer_=this-\u0026gt;create_wall_timer(1000ms,std::bind(\u0026amp;TurtrlControlNode::timer_callback,this)); subscription_=this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;(\u0026#34;/turtle1/pose\u0026#34;,10,std::bind(\u0026amp;TurtrlControlNode::on_pose_recevied,this,std::placeholders::_1)); } void on_pose_recevied(const turtlesim::msg::Pose::SharedPtr pose) //åƒæ•¸ï¼šæ”¶åˆ°æ•¸æ“šçš„å…±äº«æŒ‡é‡ { //1.ç²å–ç•¶å‰ä½ç½® auto current_x=pose-\u0026gt;x; auto current_y=pose-\u0026gt;y; RCLCPP_INFO(get_logger(),\u0026#34;ç•¶å‰çš„ï¼šx=%f,y=%f\u0026#34;,current_x,current_y); //2.è¨ˆç®—ç•¶å‰çš„ä½ç½®å’Œç›®æ¨™ä½ç½®çš„è·é›¢å’Œæœå‘çš„å·® auto distance=std::sqrt( (target_x_-current_x)*(target_x_-current_x)+ (target_y_-current_y)*(target_y_-current_y) ); auto angle= std::atan2((target_y_-current_y),(target_x_-current_x)) - pose-\u0026gt;theta; //3.åˆ©ç”¨è§’åº¦å·®å’Œä½ç½®å·®è¼¸å‡ºæ§åˆ¶ auto msg=geometry_msgs::msg::Twist(); if(distance\u0026gt;0.2) { if(fabs(angle)\u0026gt;0.2) { msg.angular.z=fabs(angle); } else { msg.linear.x=k_*distance; } } //4.é™åˆ¶ç·šé€Ÿåº¦æœ€å¤§å€¼ if(msg.linear.x\u0026gt;max_speed_) { msg.linear.x=max_speed_; } publisher_-\u0026gt;publish(msg); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;TurtrlControlNode\u0026gt;(\u0026#34;turtle_control\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } å®æˆ˜è¯é¢˜å°é¡¹ç›®ï¼šè·å–ç³»ç»ŸçŠ¶æ€å¹¶ä¸”qtæ˜¾ç¤ºï¼Œé€šè¿‡ROSé€šè®¯å®ç°å±€åŸŸç½‘é€šè®¯ ç¬¬ä¸€æ­¥ï¼šè‡ªå®šä¹‰é€šè®¯æ¥å£ (1). æ–°å»ºå·¥ä½œç©ºé—´topic_practice_ws,åœ¨æ–°çš„å·¥ä½œç©ºé—´ä¸­æ–°å»ºsrcæ–‡ä»¶å¤¹åˆ›å»ºæ¶ˆæ¯æ¥å£çš„åŠŸèƒ½åŒ… ros2 pkg create status_interfaces \u0026ndash;dependencies builtin_interfaces rosidl_default_generators \u0026ndash;license Apache-2.0 (2). åœ¨ç”Ÿæˆçš„å·¥ä½œåŒ…ä¸­æ–°å»ºmsgæ–‡ä»¶å¤¹æ–°å»ºå¥½è‡ªå·±çš„çš„æ¶ˆæ¯æ¥å£æ–‡ä»¶,(å‘½åè§„åˆ™è¦æ±‚ä¸ºéª†é©¼å³°å‘½åï¼Œå³å¼€å¤´ç¬¬ä¸€ä¸ªå­—æ¯ä¸ºå¤§å†™,åç¼€ä¸º.msg),SystemStatus.msg 1 2 3 4 5 6 7 8 builtin_interfaces/Time stamp #è®°å½•æ—¶é—´è¾å¼•å…¥å…¶ä»–åŠŸèƒ½åŒ…çš„æ¶ˆæ¯æ¥å£ï¼Œæ³¨æ„å»é™¤msgæ–‡ä»¶è·¯å¾„ string host_name # ä¸»æœºåå­— float32 cpu_percent # CPUä½¿ç”¨ç‡ float32 memory_percent # å†…å­˜ä½¿ç”¨ç‡ float32 memory_total # å†…å­˜æ€»å¤§å° float32 memory_available # å†…å­˜å‰©äºé‡ float32 net_sent # ç½‘ç»œå‘é€æ•°æ®æ€»é‡ 1MB=1Mb float32 net_recv # ç½‘ç»œæ•°æ®æ¥å—æ€»é‡ 1MB=1Mb (3). åœ¨cmakelistæ–‡ä»¶ä¸­æ·»åŠ ä¸€æ®µï¼š -```cpp # cmake å‡½æ•°ï¼Œæ¥è‡ªrosidl_default_generators ç”¨äºå°†msgç­‰æ¶ˆæ¯å°†æ¥å£å®šä¹‰æ–‡ä»¶è½¬æ¢æˆåº“æˆ–è€…å¤´æ–‡ä»¶ç±» rosidl_generators_interfaces{ ${PROJECT_NAME} \u0026ldquo;msg/SystemStatus.msg\u0026rdquo; DEPENDENCIES builtin_interfaces } (4). å†åœ¨package.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œå£°æ˜åº”ç”¨äº†å…¶ä»–æ–‡ä»¶åŠŸèƒ½åŒ…ï¼š \u0026lt;member_of_group\u0026gt;rosidl_interface_packages\u0026lt;/member_of_group\u0026gt; (5). å›åˆ°srcåŒçº§ç›®å½•ä¸‹è¿›è¡Œcolcon buildæ„å»º,ä¹‹åå…ˆsource install/setup.bashæ›´æ–°ä¸€ä¸‹ç¯å¢ƒå˜é‡ï¼Œä¹‹åå¯ä»¥è¿è¡Œï¼šros2 interface show status_interfaces/msg/SystemStatus æŸ¥çœ‹ä¸€ä¸‹æ¥å£ä¿¡æ¯æ˜¯å¦æ­£ç¡® ç¬¬äºŒæ­¥ï¼šç³»ç»Ÿä¿¡æ¯è·å–å’Œå‘å¸ƒ (1). å…ˆåœ¨åŒä¸€ä¸ªå·¥ä½œç©ºé—´ä¸‹æ–°å»ºä¸€ä¸ªpythonåŠŸèƒ½åŒ… (2). å†æ–°å»ºä¸€ä¸ªpyæ–‡ä»¶ ä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 import rclpy from status_interfaces.msg import SystemStatus from rclpy.node import Node import psutil #è·å–ç³»ç»Ÿä¿¡æ¯åº“ import platform class SysStatusPub(Node): def __init__(self,node_name): super().__init__(node_name) self.status_publisher_ =self.create_publisher( SystemStatus,\u0026#39;sys_status\u0026#39;,10 ) self.timer_ =self.create_timer(1.0,self.timer_callback) def timer_callback(self): # builtin_interfaces/Time stamp #è®°å½•æ—¶é—´è¾å¼•å…¥å…¶ä»–åŠŸèƒ½åŒ…çš„æ¶ˆæ¯æ¥å£ï¼Œæ³¨æ„å»é™¤msgæ–‡ä»¶è·¯å¾„ # string host_name # ä¸»æœºåå­— # float32 cpu_percent # CPUä½¿ç”¨ç‡ # float32 memory_percent # å†…å­˜ä½¿ç”¨ç‡ # float32 memory_total # å†…å­˜æ€»å¤§å° # float32 memory_available # å†…å­˜å‰©äºé‡ # float32 net_sent # ç½‘ç»œå‘é€æ•°æ®æ€»é‡ 1MB=1Mb # float32 net_recv # ç½‘ç»œæ•°æ®æ¥å—æ€»é‡ 1MB=1Mb cpu_percent = psutil.cpu_percent() #cpuå½“å‰ä½¿ç”¨ç‡ memory_info=psutil.virtual_memory() # å†…å­˜ç›¸å…³ä¿¡æ¯ net_io_counters=psutil.net_io_counters() # ç½‘ç»œè¾“å…¥è¾“å‡ºç›¸å…³ä¿¡æ¯ msg=SystemStatus() msg.stamp=self.get_clock().now().to_msg() msg.host_name=platform.node() msg.cpu_percent=cpu_percent msg.memory_percent=memory_info.percent msg.memory_total=memory_info.total/1024/1024 msg.memory_available=memory_info.available/1024/1024 msg.net_sent=net_io_counters.bytes_sent/1024/1024 msg.net_recv=net_io_counters.bytes_recv/1024/1024 self.get_logger().info(f\u0026#39;å‘å¸ƒï¼š{str(msg)}\u0026#39;)#rosä¿¡æ¯ç»ˆç«¯æ‰“å°ä¿¡æ¯ self.status_publisher_.publish(msg) #å‘å¸ƒä¿¡æ¯ def main(): rclpy.init() node=SysStatusPub(\u0026#39;sys_status_pub\u0026#39;) #åˆ›å»ºèŠ‚ç‚¹ rclpy.spin(node) #spinè¿è¡ŒèŠ‚ç‚¹ rclpy.shutdown()#è¿è¡Œå®Œä¹‹åå…³é—­ (3). åœ¨setup.pyæ–‡ä»¶ä¸­åŠ å…¥ï¼š\u0026lsquo;sys_status_pub=status_publisher.sys_status_pub:main\u0026rsquo;, (4). æœ€åcolcon buildä»¥åŠsourceä¹‹åè¿è¡Œï¼šros2 run status_publisher sys_status_pubï¼Œä¹‹åå¯ä»¥æ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯sourceä¹‹åè¿è¡Œï¼šros2 topic echo /sys_status ï¼Œæ‰“å°å½“å‰è¿è¡Œçš„sys_status_pubèŠ‚ç‚¹çš„å‘å¸ƒçš„sys_statusè¯é¢˜ï¼Œæ­¤è¯é¢˜å‘å¸ƒäº†ç”µè„‘çŠ¶æ€çš„msgä¿¡æ¯ ç¬¬ä¸‰æ­¥ï¼šåœ¨åŠŸèƒ½åŒ…ä¸­ä½¿ç”¨QT (1). åœ¨å·¥ä½œç¯å¢ƒçš„srcæ–‡ä»¶å¤¹å†…æ–°å»ºstatus_displayåŠŸèƒ½åŒ…ï¼Œé»˜è®¤æ˜¯cppæ–‡ä»¶ç±»å‹ï¼Œéœ€è¦åŠ è½½rclcppå’Œstatus_interfaceï¼Œç„¶åæ–°å»ºä¸€ä¸ªhello_qt.cppæ–‡ä»¶ ä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QLabel\u0026gt; #include \u0026lt;QString\u0026gt; int main(int argc,char *argv[]) { QApplication app(argc,argv); QLabel* lable=new QLabel(); QString message=QString::fromStdString(\u0026#34;Hello Qt!\u0026#34;); lable-\u0026gt;setText(message); lable-\u0026gt;show(); app.exec();//æ‰§è¡Œåº”ç”¨ï¼Œé˜»å¡ä»£ç  return 0; } (2). å†åœ¨cmakelistæ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢4è¡Œ,ä¹‹åæ„å»ºè¿è¡Œå³å¯ find_package(Qt5 REQUIRED COMPONENTS Widgets) # æŸ¥æ‰¾åº“ add_executable(hello_qt src/hello_qt.cpp) # æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶ target_link_libraries(hello_qt Qt5::Widgets) # é“¾æ¥åº“ install(TARGETS hello_qt DESTINATION lib/${PROJECT_NAME}) # å¤‡ä»½æ–‡ä»¶ (3). åŸºäºæœ¬å®æˆ˜ç³»ç»ŸçŠ¶æ€æ˜¾ç¤ºé¡¹ç›®ï¼Œå¦‚ä¸‹æ–°å»ºä¸€ä¸ªsys_status_display.cppï¼š ä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 #include \u0026lt;QApplication\u0026gt; #include \u0026lt;QLabel\u0026gt; #include \u0026lt;QString\u0026gt; #include \u0026lt;rclcpp/rclcpp.hpp\u0026gt; #include \u0026lt;status_interfaces/msg/system_status.hpp\u0026gt; using SystemStatus = status_interfaces::msg::SystemStatus; class SysStatusDisplay : public rclcpp::Node { private: /* data */ rclcpp::Subscription\u0026lt;SystemStatus\u0026gt;::SharedPtr subscriber_; QLabel *lable; public: SysStatusDisplay(/* args */) : Node(\u0026#34;sys_status_display\u0026#34;) { lable = new QLabel(); subscriber_ = this-\u0026gt;create_subscription\u0026lt;SystemStatus\u0026gt;(\u0026#34;sys_status\u0026#34;, 10, [\u0026amp;](const SystemStatus::SharedPtr msg) -\u0026gt; void { lable-\u0026gt;setText(get_qstr_from_msg(msg)); }); lable-\u0026gt;setText(get_qstr_from_msg(std::make_shared\u0026lt;SystemStatus\u0026gt;())); lable-\u0026gt;show(); }; // msg.stamp=self.get_clock().now().to_msg() // msg.host_name=platform.node() // msg.cpu_percent=cpu_percent // msg.memory_percent=memory_info.percent // msg.memory_total=memory_info.total/1024/1024 // msg.memory_available=memory_info.available/1024/1024 // msg.net_sent=net_io_counters.bytes_sent/1024/1024 // msg.net_recv=net_io_counters.bytes_recv/1024/1024 QString get_qstr_from_msg(const SystemStatus::SharedPtr msg) { std::stringstream show_str; show_str \u0026lt;\u0026lt;\u0026#34;========ç³»ç»ŸçŠ¶æ€å¯è§†åŒ–æ˜¾ç¤ºå·¥å…·==========\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; æ•° æ® æ—¶ é—´ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;stamp.sec\u0026lt;\u0026lt;\u0026#34;\\ts\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; ä¸» æœº å å­—ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;host_name\u0026lt;\u0026lt;\u0026#34;\\ts\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; CPU ä½¿ ç”¨ ç‡ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;cpu_percent\u0026lt;\u0026lt;\u0026#34;\\t%\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; å†… å­˜ ä½¿ ç”¨ ç‡ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;memory_percent\u0026lt;\u0026lt;\u0026#34;\\t%\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; å†… å­˜ æ€» é‡ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;memory_total\u0026lt;\u0026lt;\u0026#34;\\tMB\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; å†… å­˜ å‰© ä½™ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;memory_available\u0026lt;\u0026lt;\u0026#34;\\tMB\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; ç½‘ ç»œ å‘ é€ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;net_sent\u0026lt;\u0026lt;\u0026#34;\\tMB\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34; ç½‘ ç»œ æ¥ å—ï¼š\\t\u0026#34;\u0026lt;\u0026lt;msg-\u0026gt;net_recv\u0026lt;\u0026lt;\u0026#34;\\tMB\\n\u0026#34; \u0026lt;\u0026lt;\u0026#34;=====================================\u0026#34; ; return QString::fromStdString(show_str.str()); } }; int main(int argc, char *argv[]) { rclcpp::init(argc,argv); QApplication app(argc, argv); auto node=std::make_shared\u0026lt;SysStatusDisplay\u0026gt;(); std::thread spin_thread([\u0026amp;]()-\u0026gt;void{ rclcpp::spin(node); //å¯åŠ¨nodeèŠ‚ç‚¹,é˜»å¡ä»£ç  }); spin_thread.detach(); app.exec(); // æ‰§è¡Œåº”ç”¨ï¼Œé˜»å¡ä»£ç  return 0; } (4). æ›´æ”¹å¥½cmakelistæ–‡ä»¶å†…å®¹ï¼Œé“¾æ¥å¥½åº“ï¼š 1 2 3 4 5 6 add_executable(sys_status_display src/sys_status_display.cpp) # æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶ target_link_libraries(sys_status_display Qt5::Widgets) # é“¾æ¥åº“ ament_target_dependencies(sys_status_display rclcpp status_interfaces) install(TARGETS hello_qt sys_status_display DESTINATION lib/${PROJECT_NAME} ) # å¤‡ä»½æ–‡ä»¶ (5). æœ€ååˆ†åˆ«è¿è¡Œstatus_publisher sys_status_pubå’Œstatus_display sys_status_display æ­£å¸¸çœ‹åˆ°æ˜¾ç¤ºå³å¤§åŠŸå‘Šæˆï¼ 3.13 æœåŠ¡ åˆæ­¥è®¤è¯†ä½¿ç”¨æœåŠ¡ï¼š\nç¤ºä¾‹ï¼š æ‰“å¼€å°æµ·é¾Ÿæ˜¾ç¤ºèŠ‚ç‚¹(è®°ä¸èµ·æ¥å°±åŒtap) ros2 run turtlesim turtlesim_node ä¹‹åå†æ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯(ctrl+alt+t)è¿è¡Œä¸‹é¢å›¾ç‰‡æŸ¥çœ‹æœåŠ¡ï¼ŒæŸ¥çœ‹æŸä¸ªæœåŠ¡æ¶ˆæ¯è¯¦æƒ…ï¼Œcallå¯åŠ¨ä¸€ä¸ªæœåŠ¡æ¶ˆæ¯ ros2 service list -t ros2 interface show turtlesim/srv/Spawn ros2 service call spawn turtlesim/srv/Spawn \u0026ldquo;{x: 1, y: 1}\u0026rdquo; ä½¿ç”¨å›¾å½¢åŒ–äº¤äº’ç•Œé¢ï¼šrqt åŸºäºæœåŠ¡çš„å‚æ•°é€šä¿¡\næœåŠ¡çš„ä¸€äº›å‚æ•°åˆ—è¡¨å±•ç¤º:ros2 param list ä¹‹åå¯ä»¥æ‰“å°è¯¦ç»†çš„å‚æ•°ä»‹ç»ä¿¡æ¯ï¼šros2 param describe /turtlesim background_r è¿˜å¯ä»¥æ‰“å°è·å–å½“å‰å‚æ•°çš„å€¼ï¼šros2 param get /turtlesim background_r è¿˜å¯ä»¥è®¾ç½®å½“å‰å‚æ•°çš„å€¼ï¼šros2 param set /turtlesim background_r 255 ä¸€èˆ¬é…ç½®å¤šä¸ªå‚æ•°æ—¶æœ€å¿«ä¾¿æ·æ–¹æ³•æ˜¯å¯¼å‡ºyamlå‚æ•°æ–‡ä»¶ï¼Œä¹‹åç¼–è¾‘æ–‡ä»¶ä¸­çš„å‚æ•°æ—¢å¯ï¼Œéšåè¿è¡Œç›¸åº”èŠ‚ç‚¹æ—¶å°†yamlå‚æ•°é…ç½®æ–‡ä»¶ä¸€èµ·å¯ç”¨é…ç½® å¯¼å‡ºæœåŠ¡å‚æ•°ä¸ºyamlæ–‡ä»¶ï¼š ros2 param dump /turtlesim \u0026gt; turtlesim_param.yaml æŸ¥çœ‹å½“å‰å¯¼å‡ºçš„yamlæ–‡ä»¶ cat turtlesim_param.yaml å¯åŠ¨èŠ‚ç‚¹æ—¶ä½¿ç”¨yamlçš„é…ç½®æ–‡ä»¶ï¼š ros2 run turtlesim turtlesim_node \u0026ndash;ros-args \u0026ndash;params-file turtlesim_param.yaml ã€å…¶å®å°±æ˜¯rclcpp.init(argc,argv)æ—¶å°†yamlä¼ å…¥ä½œä¸ºåˆå§‹åŒ–å‚æ•°ã€‘ æˆ–è€…æ˜¯rqtä¸­çš„åŠ¨æ€é…ç½®configurationç›´æ¥è°ƒæ•´ä¿®æ”¹å€¼ è‡ªå®šä¹‰æœåŠ¡æ¥å£(äººè„¸è¯†åˆ«ç¤ºä¾‹)\næ–°å»ºå·chapt4æ–‡ä»¶ä¸‹srcå†…æ–°å»ºä¸€ä¸ªchapt4_interfacesåŠŸèƒ½åŒ…ï¼š\nros2 pkg create chapt4_interfaces \u0026ndash;dependencies sensor_msgs rosidl_default_generators \u0026ndash;license Apache-2.0 å†åœ¨åŠŸèƒ½åŒ…å†…æ–°å»ºsrvæœåŠ¡æ¥å£æ–‡ä»¶å¤¹ï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹å†…æ–°å»ºFaceDetector.srvæ–‡ä»¶å¹¶ä¸”æ›´æ”¹cmakelistå’Œpackage.xmlæ–‡ä»¶å†…å®¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 sensor_msgs/Image image #äººè„¸å›¾åƒ --- int16 number #è¯†åˆ«åˆ°çš„äººè„¸ä¸ªæ•° float32 use_time #è¯†åˆ«è€—æ—¶ int32[] top #äººè„¸åœ¨å›¾åƒä¸­çš„ä½ç½® int32[] right int32[] bottom int32[] left rosidl_generate_interfaces(${PROJECT_NAME} \u0026#34;srv/FaceDetector.srv\u0026#34; DEPENDENCIES sensor_msgs ) \u0026lt;member_of_group\u0026gt;rosidl_interface_packages\u0026lt;/member_of_group\u0026gt; ä¹‹ååˆ‡æ¢åˆ°srcçš„åŒçº§ç›®å½•ä¸‹è¿›è¡Œcolcon buildå†source install/setup.bash ï¼Œæœ€åè¿è¡Œros2 interface show chapt4_interfaces/srv/FaceDetector æŸ¥çœ‹æ˜¯å¦æœ‰å¯¹åº”çš„æœåŠ¡æ¥å£ä¿¡æ¯æ—¢å¯\näººè„¸æ£€æµ‹pythonæœåŠ¡é€šä¿¡ï¼š(pythonåœ¨mvenvç¯å¢ƒä¸‹)\næ–°å»ºä¸€ä¸ªstart_mvenv.shæ–‡ä»¶ä¸€é”®é…ç½®è™šæ‹Ÿç¯å¢ƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ source ~/mvenv/bin/activate # é…ç½® ROS2 ç¯å¢ƒ éœ€è¦æ ¹æ®è‡ªå·±çš„ç³»ç»Ÿæ¥é…ç½® source /opt/ros/jazzy/setup.bash # é…ç½®ä½ çš„å·¥ä½œç©ºé—´ source ~/chapt4/chapt4_ws/install/setup.bash # æŠŠè™šæ‹Ÿç¯å¢ƒçš„ Python è·¯å¾„åŠ å…¥åˆ° ROS2 çš„ Python è·¯å¾„ä¸­ åç»­å…¶ä»–å·¥ç¨‹æˆ–è€…å·¥ä½œç©ºé—´çš„pythonä¸­éœ€è¦ros2è°ƒç”¨è‡ªå·±åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒçš„ç¬¬ä¸‰æ–¹åº“æ—¶ç›´æ¥ä¿®è¯¥è¿™æ®µä¸­çš„å¯¹åº”è™šæ‹Ÿç¯å¢ƒçš„åè¯/ä½ç½®å³å¯ export PYTHONPATH=$PYTHONPATH:/home/robot/mvenv/lib/python3.12/site-packages echo \u0026#34;ROS2 + Python è™šæ‹Ÿç¯å¢ƒå·²é…ç½®å®Œæˆï¼\u0026#34; æ–°å»ºåŠŸèƒ½åŒ…ros2 pkg create demo_python_service \u0026ndash;build-type ament_python \u0026ndash;dependencies rclpy chapt4_interfaces \u0026ndash;license Apache-2.0 éœ€è¦æ‰¾åˆ°ä¸€å¼ éœ€è¦æ£€æµ‹çš„ç…§ç‰‡æ”¾åˆ°resourceæ–‡ä»¶å¤¹å†…ï¼Œéšåæ›´æ”¹setup.pyæ–‡ä»¶ï¼Œè¡¨ç¤ºåœ¨colcon buildæ‹·è´ä¸€ä»½æ—¶å°†sourceæ–‡ä»¶ä¸‹çš„è¿™å¼ ç…§ç‰‡ä¹Ÿä¸€èµ·æ‹·è´ (\u0026lsquo;share/\u0026rsquo; + package_name+\u0026quot;/resource\u0026quot;, [\u0026lsquo;resource/defult.jpg\u0026rsquo;]), ç„¶åæ–°å»ºlearn_face_detect.pyï¼Œä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import face_recognition import cv2 from ament_index_python.packages import get_package_share_directory #å¯¼å…¥åŠŸèƒ½åŒ…shareç›®å½•ç»å¯¹è·¯å¾„ import os def main(): #è·å–å›¾ç‰‡çš„çœŸå®è·¯å¾„ /home/robot/chapt4/chapt4_ws/install/demo_python_service/share/demo_python_service default_image_path=os.path.join(get_package_share_directory(\u0026#39;demo_python_service\u0026#39;),\u0026#39;/resource/defult.jpg\u0026#39;)#osåº“è‡ªåŠ¨åˆ¤æ–­è¿æ¥è·¯å¾„æ˜¯å¦éœ€è¦/é“¾æ¥ print(f\u0026#34;å›¾ç‰‡çš„çœŸå®è·¯å¾„ï¼š{default_image_path}\u0026#34;) #ä½¿ç”¨cv2åŠ è½½å›¾ç‰‡ image=cv2.imread(default_image_path) #æ£€æµ‹äººè„¸ face_locations=face_recognition.face_locations(image,number_of_times_to_upsample=1,model=\u0026#39;hog\u0026#39;) #ç»˜åˆ¶äººè„¸æ¡† for top,right,bottom,left in face_locations: cv2.rectangle(image,(left,top),(right,bottom),(255,0,0),4) #ç»“æœæ˜¾ç¤º cv2.imshow(\u0026#39;Face Detecte result\u0026#39;,image) cv2.waitKey(0) ç„¶ååˆ†åˆ«è¿è¡Œ,ä¹‹åå†è¿è¡Œros2 run demo_python_service learn_face_detect source start_mvenv.sh colcon build source install/setup.bash ä¸‹é¢ä¸ºæ­£å¼å¼€å§‹äººè„¸æ£€æµ‹æœåŠ¡éƒ¨åˆ†ï¼š æ–°å»ºface_detect_node.pyä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 import rclpy from rclpy.node import Node from chapt4_interfaces.srv import FaceDetector import face_recognition import cv2 from ament_index_python.packages import get_package_share_directory #å¯¼å…¥åŠŸèƒ½åŒ…shareç›®å½•ç»å¯¹è·¯å¾„ import os from cv_bridge import CvBridge import time class FaceDetectNode(Node): def __init__(self): super().__init__(\u0026#39;face_detect_node\u0026#39;) self.service_=self.create_service(FaceDetector,\u0026#39;face_detect\u0026#39;,self.detect_face_callback) self.bridge=CvBridge() self.number_of_times_to_upsample=1 self.model=\u0026#39;hog\u0026#39; self.default_image_path=os.path.join(get_package_share_directory(\u0026#39;demo_python_service\u0026#39;),\u0026#39;resource/defult.jpg\u0026#39;)#osåº“è‡ªåŠ¨åˆ¤æ–­è¿æ¥è·¯å¾„æ˜¯å¦éœ€è¦/é“¾æ¥ self.get_logger().info(f\u0026#34;äººè„¸æ£€æµ‹æœåŠ¡æˆåŠŸå¼€å¯ï¼\u0026#34;) def detect_face_callback(self,request,response): if request.image.data: cv_image=self.bridge.imgmsg_to_cv2(request.image) else: cv_image=cv2.imread(self.default_image_path)#è‹¥è¯·æ±‚çš„å›¾ç‰‡å†…å®¹ä¸ºç©ºåˆ™è¯†åˆ«é»˜è®¤çš„ç…§ç‰‡å†…å®¹ï¼Œç›®å½•ä½ç½®ä¸ºä¸Šé¢ self.get_logger().info(f\u0026#34;ä¼ å…¥å›¾åƒä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤å›¾åƒï¼\u0026#34;) #æ­¤å¤„çš„cv_imageå›¾åƒå·²ç»æ˜¯ä¸€ä¸ªopencvæ ¼å¼çš„å›¾åƒ start_time=time.time() self.get_logger().info(f\u0026#34;åŠ è½½å®Œæˆå›¾åƒï¼Œå¼€å§‹äººè„¸è¯†åˆ«ï¼\u0026#34;) face_locations=face_recognition.face_locations(cv_image,number_of_times_to_upsample=self.number_of_times_to_upsample,model=self.model) response.use_time=time.time()-start_time response.number=len(face_locations) #face_locationsæ˜¯ä¸€ä¸ªåˆ—è¡¨é‡Œé¢å…¶å®å°±æ˜¯è¯†åˆ«å‡ºæ¥æœ‰å¤šå°‘ç»„äººé“¾æ•°ç»„ for top,right,bottom,left in face_locations: response.top.append(top) response.right.append(right) response.bottom.append(bottom) response.left.append(left) return response #å¿…é¡»è¿”å›response def main(): rclpy.init() node=FaceDetectNode() rclpy.spin(node) rclpy.shutdown() ä¹‹åä¿®æ”¹å¥½setup.pyç„¶åç›´æ¥è¿è¡Œå³å¯ï¼Œæ‰“å¼€å¦å¤–ä¸€ä¸ªç»ˆç«¯åˆ—å‡ºæœåŠ¡ï¼šros2 service list -tï¼Œä¹‹åå†è¿è¡Œservice callè¿™ä¸ªå‘å¸ƒçš„æœåŠ¡æ¶ˆæ¯æ¥å£å³å¯ï¼Œè¯†åˆ«å‡ºé»˜è®¤çš„å›¾ç‰‡å†…å®¹ äººè„¸æ£€æµ‹çš„å®¢æˆ·ç«¯å®ç° ç°åœ¨resourceç›®å½•ä¸‹æ·»åŠ å¥½éœ€è¦è¯†åˆ«çš„ç…§ç‰‡ï¼Œç„¶åä¿®æ”¹å¥½setup.pyåœ¨colcon buildæ—¶å°†ç…§ç‰‡ä¹Ÿä¸€èµ·æ‹·è´è¿‡å» ç„¶åæ­£å¸¸åœ°æ–°å»ºå¥½face_detect_client_node.pyä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 import rclpy from rclpy.node import Node from chapt4_interfaces.srv import FaceDetector import face_recognition import cv2 from ament_index_python.packages import get_package_share_directory #å¯¼å…¥åŠŸèƒ½åŒ…shareç›®å½•ç»å¯¹è·¯å¾„ import os from cv_bridge import CvBridge import time class FaceDetectClientNode(Node): def __init__(self): super().__init__(\u0026#39;face_detect_client_node\u0026#39;) self.bridge=CvBridge() self.default_image_path=os.path.join(get_package_share_directory(\u0026#39;demo_python_service\u0026#39;),\u0026#39;resource/peoples.jpg\u0026#39;)#osåº“è‡ªåŠ¨åˆ¤æ–­è¿æ¥è·¯å¾„æ˜¯å¦éœ€è¦/é“¾æ¥ self.get_logger().info(f\u0026#34;äººè„¸æ£€æµ‹å®¢æˆ·ç«¯æˆåŠŸå¼€å¯ï¼\u0026#34;) self.client=self.create_client(FaceDetector,\u0026#39;face_detect\u0026#39;) self.image=cv2.imread(self.default_image_path) def send_request(self): # 1.åˆ¤æ–­æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while self.client.wait_for_service(timeout_sec=1.0) is False: self.get_logger().info(f\u0026#34;æ­£åœ¨ç­‰å¾…æœåŠ¡ç«¯ä¸Šçº¿.....\u0026#34;) # 2.æ„é€ Request request=FaceDetector.Request() request.image=self.bridge.cv2_to_imgmsg(self.image) # 3.å‘é€è¯·æ±‚å¹¶ç­‰å¾…å¤„ç†å®Œæˆ future=self.client.call_async(request) # while not future.done(): # time.sleep(1.0) #ä¼‘çœ å½“å‰çº¿ç¨‹ï¼Œç­‰å¾…æœåŠ¡å¤„ç†å®Œæˆ==é€ æˆå½“å‰çº¿ç¨‹æ— æ³•å†æ¥å—æ¥è‡ªæœåŠ¡ç«¯çš„è¿”å›ï¼Œå¯¼è‡´æ°¸è¿œæ— æ³•å®Œæˆfuture.done()æ— æ³•è¿”å›True # rclpy.spin_until_future_complete(self,future) #ç­‰å¾…æœåŠ¡ç«¯è¿”å›å“åº” def result_callback(result_future): response =result_future.result() #è·å–å“åº”ç»“æœ self.get_logger().info(f\u0026#34;æ¥æ”¶åˆ°å“åº”ï¼Œå…±è€—æ—¶{response.use_time}s,æ€»å…±æ£€æµ‹åˆ°{response.number}ä¸ªäººè„¸\u0026#34;) self.show_response(response) future.add_done_callback(result_callback) def show_response(self,resonse): for i in range(resonse.number): top=resonse.top[i] left=resonse.left[i] right=resonse.right[i] bottom=resonse.bottom[i] cv2.rectangle(self.image,(left,top),(right,bottom),(255,0,0),4) #ç»“æœæ˜¾ç¤º cv2.imshow(\u0026#39;Face Detecte result\u0026#39;,self.image) cv2.waitKey(0)#é˜»å¡ def main(): rclpy.init() node=FaceDetectClientNode() node.send_request() rclpy.spin(node) rclpy.shutdown() ä¹‹åæ­£å¸¸è¿è¡Œå…ˆå¼€å§‹ä¹‹å‰çš„æœåŠ¡ç«¯èŠ‚ç‚¹ï¼Œç„¶åå†å¼€å¯å®¢æˆ·ç«¯èŠ‚ç‚¹è¿›è¡Œè¯†åˆ«æ—¢å¯çœ‹åˆ°ç°è±¡ C++å°ä¹Œé¾Ÿå·¡èˆªæœåŠ¡ï¼š\næ–°å»ºæœåŠ¡é€šè®¯æ¥å£ï¼šåœ¨srvæ–‡ä»¶ä¸‹æ–°å»ºPatrol.srvï¼Œå†…å®¹ç¤ºä¾‹ï¼š 1 2 3 4 5 6 float32 target_x float32 target_y --- int8 SUCESS=1 int8 FAIL=0 int8 result # ç»“æœ è¿”å› SUCESS / FAIL å–å…¶ä¸­ä¹‹ä¸€ éšåæ›´æ”¹cmakelistæ–‡ä»¶å°†è¯¥srvæ–‡ä»¶è·¯å¾„æ›´æ–°åˆ°é‡Œé¢ï¼Œå‚è€ƒä¸Šé¢pythonçš„srvæ›´æ–°ã€‚ä¹‹åç›´æ¥colcon buildå·²ç»sourceæ—¢å¯ï¼ŒæŸ¥çœ‹ros2 interface show chapt4_interface/srv/Patrol æ—¢å¯çœ‹åˆ°æ¥å£è¯¦ç»†ä¿¡æ¯ (æœåŠ¡ç«¯)åœ¨srcä¸‹æ–°å»ºåŠŸèƒ½åŒ…ï¼š ros2 pkg create demo_cpp_service \u0026ndash;build-type ament_cmake \u0026ndash;dependencies chapt4_interfaces rclcpp geometry_msgs turtlesim \u0026ndash;license Apache-2.0 éšååœ¨é¡¹ç›®åç§°ä¸‹æ–°å»ºæœåŠ¡ç«¯turtle_control.cppä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; #include \u0026#34;chapt4_interfaces/srv/patrol.hpp\u0026#34; using Patrol=chapt4_interfaces::srv::Patrol; using namespace std::chrono_literals; class TurtrlControlNode:public rclcpp::Node { private: rclcpp::Service\u0026lt;Patrol\u0026gt;::SharedPtr patrol_service_; rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr subscription_;//è¨‚é–±è€…çš„æ™ºèƒ½æŒ‡é‡ double target_x_{1.0};//ç›®æ¨™ä½ç½®xåº§æ¨™ double target_y_{1.0}; //ç›®æ¨™ä½ç½®yåº§æ¨™ double k_{1.0}; // æ¯”ä¾‹ä¿‚æ•¸ double max_speed_{3.0}; //æœ€å¤§é€Ÿåº¦ public: explicit TurtrlControlNode(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { patrol_service_=this-\u0026gt;create_service\u0026lt;Patrol\u0026gt;(\u0026#34;patrol\u0026#34;,[\u0026amp;](const Patrol::Request::SharedPtr request,Patrol::Response::SharedPtr response)-\u0026gt;void{ if( (0\u0026lt;request-\u0026gt;target_x\u0026amp;\u0026amp;request-\u0026gt;target_x\u0026lt;12.0f)\u0026amp;\u0026amp; (0\u0026lt;request-\u0026gt;target_y\u0026amp;\u0026amp;request-\u0026gt;target_y\u0026lt;12.0f) ) { this-\u0026gt;target_x_=request-\u0026gt;target_x; this-\u0026gt;target_y_=request-\u0026gt;target_y; response-\u0026gt;result=Patrol::Response::SUCESS; } else { response-\u0026gt;result=Patrol::Response::FAIL; } }); publisher_=this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;,10); // timer_=this-\u0026gt;create_wall_timer(1000ms,std::bind(\u0026amp;TurtrlControlNode::timer_callback,this)); subscription_=this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;(\u0026#34;/turtle1/pose\u0026#34;,10,std::bind(\u0026amp;TurtrlControlNode::on_pose_recevied,this,std::placeholders::_1)); } void on_pose_recevied(const turtlesim::msg::Pose::SharedPtr pose) //åƒæ•¸ï¼šæ”¶åˆ°æ•¸æ“šçš„å…±äº«æŒ‡é‡ { //1.ç²å–ç•¶å‰ä½ç½® auto current_x=pose-\u0026gt;x; auto current_y=pose-\u0026gt;y; RCLCPP_INFO(get_logger(),\u0026#34;ç•¶å‰çš„ï¼šx=%f,y=%f\u0026#34;,current_x,current_y); //2.è¨ˆç®—ç•¶å‰çš„ä½ç½®å’Œç›®æ¨™ä½ç½®çš„è·é›¢å’Œæœå‘çš„å·® auto distance=std::sqrt( (target_x_-current_x)*(target_x_-current_x)+ (target_y_-current_y)*(target_y_-current_y) ); auto angle= std::atan2((target_y_-current_y),(target_x_-current_x)) - pose-\u0026gt;theta; //3.åˆ©ç”¨è§’åº¦å·®å’Œä½ç½®å·®è¼¸å‡ºæ§åˆ¶ auto msg=geometry_msgs::msg::Twist(); if(distance\u0026gt;0.2) { if(fabs(angle)\u0026gt;0.2) { msg.angular.z=fabs(angle); } else { msg.linear.x=k_*distance; } } //4.é™åˆ¶ç·šé€Ÿåº¦æœ€å¤§å€¼ if(msg.linear.x\u0026gt;max_speed_) { msg.linear.x=max_speed_; } publisher_-\u0026gt;publish(msg); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;TurtrlControlNode\u0026gt;(\u0026#34;turtle_control\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } ä¹‹åå†cmakelistæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–å·²ç»éœ€è¦ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å·²ç»æ‹·è´å†…å®¹3ä¸ªéƒ¨åˆ†ï¼Œä¹‹åå°±å¯ä»¥æ­£å¸¸åœ°colconå·²ç»sourceï¼Œæµ‹è¯•éœ€è¦å¼€å¯å°æµ·é¾ŸèŠ‚ç‚¹ï¼Œå¯ä»¥å†å¼€ä¸€ä¸ªrqtå¯è§†åŒ–å·¥å…·æ¥å‘å¸ƒrequestæœåŠ¡çš„æ¥å£å†…å®¹ï¼Œè§‚å¯Ÿæ˜¯å¦èƒ½æ§åˆ¶å°æµ·é¾Ÿè¿åŠ¨æ—¢å¯ (å®¢æˆ·ç«¯)åœ¨srcçš„demo_cpp_serviceä¸‹æ–°å»ºä¸€ä¸ªpatrol_client.cppï¼Œä»£ç ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;chapt4_interfaces/srv/patrol.hpp\u0026#34; #include \u0026lt;ctime\u0026gt; using Patrol=chapt4_interfaces::srv::Patrol; using namespace std::chrono_literals; //å®šä¹‰ä¹‹åå¯ä»¥ä½¿ç”¨10s,100ms class PatrolClient:public rclcpp::Node { private: rclcpp::TimerBase::SharedPtr timer_; rclcpp::Client\u0026lt;Patrol\u0026gt;::SharedPtr patrol_client_; public: explicit PatrolClient(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { srand(time(NULL)); //åˆå§‹åŒ–éšæœºæ•°ç§å­ patrol_client_=this-\u0026gt;create_client\u0026lt;Patrol\u0026gt;(\u0026#34;patrol\u0026#34;); timer_=this-\u0026gt;create_wall_timer(10s,[\u0026amp;]()-\u0026gt;void{ //1.æ£€æµ‹æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while (!this-\u0026gt;patrol_client_-\u0026gt;wait_for_service(1s)) { if(!rclcpp::ok()) { RCLCPP_ERROR(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­ï¼ŒrclcppæŒ‚äº†ã€‚è‡£é€€ä¸‹äº†\u0026#34;); return; } RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­......\u0026#34;); } //2.æ„é€ è¯·æ±‚çš„å¯¹è±¡ auto request=std::make_shared\u0026lt;Patrol::Request\u0026gt;(); request-\u0026gt;target_x=rand()%12; request-\u0026gt;target_y=rand()%12; RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‡†å¤‡å¥½ç›®æ ‡ç‚¹ï¼š%f,%f\u0026#34;,request-\u0026gt;target_x,request-\u0026gt;target_y); //3.å‘é€è¯·æ±‚ this-\u0026gt;patrol_client_-\u0026gt;async_send_request(request,[\u0026amp;](rclcpp::Client\u0026lt;Patrol\u0026gt;::SharedFuture result_future)-\u0026gt;void{ auto response =result_future.get(); if(response-\u0026gt;result==Patrol::Response::SUCESS) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;è¯·æ±‚å·¡é€»ç›®æ ‡ç‚¹æˆåŠŸï¼\u0026#34;); } if(response-\u0026gt;result==Patrol::Response::FAIL) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;è¯·æ±‚å·¡é€»ç›®æ ‡ç‚¹å¤±è´¥....\u0026#34;); } }); }); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;PatrolClient\u0026gt;(\u0026#34;patrol_client_node\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } ä¹‹åä¿®æ”¹cmakelisté…ç½®æ–‡ä»¶ç„¶åæ­£å¸¸åœ°colconæ—¢å¯ï¼Œä¹‹åæ­£å¸¸è¿è¡Œå…ˆè¿è¡Œæµ·é¾Ÿnodeç„¶åå†æŠŠæœåŠ¡ç«¯çš„èŠ‚ç‚¹å¼€å¯ï¼Œæœ€åå¼€å¯å®¢æˆ·ç«¯å°±å¯ä»¥çœ‹åˆ°å°æµ·é¾Ÿè‡ªåŠ¨åŠ¨èµ·æ¥äº†ï¼š å‚æ•°ç›¸å…³\nå‚æ•°å£°æ˜é…ç½® 1 2 3 4 5 6 #å‚æ•°å£°æ˜ åç§°ï¼‹å€¼ self.declare_parameter(\u0026#39;number_of_times_to_upsample\u0026#39;,1) self.declare_parameter(\u0026#39;model\u0026#39;,\u0026#39;hog\u0026#39;) #å‚æ•°å€¼è·å– self.number_of_times_to_upsample=self.get_parameter(\u0026#39;number_of_times_to_upsample\u0026#39;).value self.model=self.get_parameter(\u0026#39;model\u0026#39;).value å‚æ•°ä½¿ç”¨å’Œæ›´æ”¹ï¼š è¿è¡ŒèŠ‚ç‚¹æ—¶å¯æŒ‡ä»¤æ›´æ”¹å‚æ•°å€¼ï¼š ros2 run demo_python_service face_detect_node \u0026ndash;ros-args -p model:=cnn å¯åœ¨æ–°ç»ˆç«¯å…ˆè¿è¡ŒæŸ¥çœ‹å½“å‰å‚æ•°listï¼šros2 param list éšåå¯è¿è¡Œç±»ä¼¼setå‚æ•°å€¼ï¼šros2 param set /face_detect_node number_of_times_to_upsample 2 ä¹Ÿå¯ä»¥getå‚æ•°å€¼ï¼šros2 param get /face_detect_node model C++æ¥æ”¶å‚æ•°äº‹ä»¶ åˆ›å»ºå‚æ•°å¹¶ä¸”å¯ä»¥ä»£ç å†…éƒ¨ä¿®æ”¹å‚æ•°å€¼ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€rqtè®¾ç½®å‚æ•°ï¼Œé€šè¿‡è®¾ç½®å“åº”è®¾ç½®å‚æ•°çš„å›è°ƒå‡½æ•°æ¥åŠ¨æ€è®¾ç½®å‚æ•°æ•°å€¼å¹¶ä¸”èµ‹å€¼ç»™ä»£ç ä¸­çš„å…¶ä»–å‚æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; #include \u0026#34;chapt4_interfaces/srv/patrol.hpp\u0026#34; #include \u0026#34;rcl_interfaces/msg/set_parameters_result.hpp\u0026#34; using SetParametersResult=rcl_interfaces::msg::SetParametersResult; using Patrol=chapt4_interfaces::srv::Patrol; using namespace std::chrono_literals; class TurtrlControlNode:public rclcpp::Node { private: OnSetParametersCallbackHandle::SharedPtr parameter_callback_handle_; rclcpp::Service\u0026lt;Patrol\u0026gt;::SharedPtr patrol_service_; rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr subscription_;//è¨‚é–±è€…çš„æ™ºèƒ½æŒ‡é‡ double target_x_{1.0};//ç›®æ¨™ä½ç½®xåº§æ¨™ double target_y_{1.0}; //ç›®æ¨™ä½ç½®yåº§æ¨™ double k_{1.0}; // æ¯”ä¾‹ä¿‚æ•¸ double max_speed_{3.0}; //æœ€å¤§é€Ÿåº¦ public: explicit TurtrlControlNode(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { this-\u0026gt;declare_parameter(\u0026#34;k\u0026#34;,1.0); //åˆ›å»ºå‚æ•° this-\u0026gt;declare_parameter(\u0026#34;max_speed\u0026#34;,1.0); this-\u0026gt;get_parameter(\u0026#34;k\u0026#34;,k_); this-\u0026gt;get_parameter(\u0026#34;max_speed\u0026#34;,max_speed_); this-\u0026gt;set_parameter(rclcpp::Parameter(\u0026#34;k\u0026#34;,2.0)); //å†…éƒ¨ä¿®æ”¹å‚æ•° //å“åº”å›è°ƒå‡½æ•°åŠ¨æ€æ¥æ”¶å‚æ•°ä¿®æ”¹ parameter_callback_handle_=this-\u0026gt;add_on_set_parameters_callback([\u0026amp;] (const std::vector\u0026lt;rclcpp::Parameter\u0026gt; \u0026amp; parameters) -\u0026gt;rcl_interfaces::msg::SetParametersResult{ rcl_interfaces::msg::SetParametersResult result; result.successful = true; for (const auto \u0026amp; parameter : parameters) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;æ›´æ–°å‚æ•°çš„å€¼%s=%f\u0026#34;,parameter.get_name().c_str(),parameter.as_double()); if(parameter.get_name()==\u0026#34;k\u0026#34;) { k_=parameter.as_double(); } if(parameter.get_name()==\u0026#34;max_speed\u0026#34;) { max_speed_=parameter.as_double(); } } return result; }); patrol_service_=this-\u0026gt;create_service\u0026lt;Patrol\u0026gt;(\u0026#34;patrol\u0026#34;,[\u0026amp;](const Patrol::Request::SharedPtr request,Patrol::Response::SharedPtr response)-\u0026gt;void{ if( (0\u0026lt;request-\u0026gt;target_x\u0026amp;\u0026amp;request-\u0026gt;target_x\u0026lt;12.0f)\u0026amp;\u0026amp; (0\u0026lt;request-\u0026gt;target_y\u0026amp;\u0026amp;request-\u0026gt;target_y\u0026lt;12.0f) ) { this-\u0026gt;target_x_=request-\u0026gt;target_x; this-\u0026gt;target_y_=request-\u0026gt;target_y; response-\u0026gt;result=Patrol::Response::SUCESS; } else { response-\u0026gt;result=Patrol::Response::FAIL; } }); publisher_=this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;,10); // timer_=this-\u0026gt;create_wall_timer(1000ms,std::bind(\u0026amp;TurtrlControlNode::timer_callback,this)); subscription_=this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;(\u0026#34;/turtle1/pose\u0026#34;,10,std::bind(\u0026amp;TurtrlControlNode::on_pose_recevied,this,std::placeholders::_1)); } void on_pose_recevied(const turtlesim::msg::Pose::SharedPtr pose) //åƒæ•¸ï¼šæ”¶åˆ°æ•¸æ“šçš„å…±äº«æŒ‡é‡ { //1.ç²å–ç•¶å‰ä½ç½® auto current_x=pose-\u0026gt;x; auto current_y=pose-\u0026gt;y; RCLCPP_INFO(get_logger(),\u0026#34;ç•¶å‰çš„ï¼šx=%f,y=%f\u0026#34;,current_x,current_y); //2.è¨ˆç®—ç•¶å‰çš„ä½ç½®å’Œç›®æ¨™ä½ç½®çš„è·é›¢å’Œæœå‘çš„å·® auto distance=std::sqrt( (target_x_-current_x)*(target_x_-current_x)+ (target_y_-current_y)*(target_y_-current_y) ); auto angle= std::atan2((target_y_-current_y),(target_x_-current_x)) - pose-\u0026gt;theta; //3.åˆ©ç”¨è§’åº¦å·®å’Œä½ç½®å·®è¼¸å‡ºæ§åˆ¶ auto msg=geometry_msgs::msg::Twist(); if(distance\u0026gt;0.2) { if(fabs(angle)\u0026gt;0.2) { msg.angular.z=fabs(angle); } else { msg.linear.x=k_*distance; } } //4.é™åˆ¶ç·šé€Ÿåº¦æœ€å¤§å€¼ if(msg.linear.x\u0026gt;max_speed_) { msg.linear.x=max_speed_; } publisher_-\u0026gt;publish(msg); } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;TurtrlControlNode\u0026gt;(\u0026#34;turtle_control\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); } ä»£ç è·‘é€šåç›´æ¥åœ¨rqtä¸­parameter reconfigureåŠ¨æ€ä¿®æ”¹èŠ‚ç‚¹ä¸­çš„å¯¹åº”è®¾ç½®å¥½çš„kå’Œmax_speedçš„å€¼ï¼ŒéšåæŸ¥çœ‹ç»ˆç«¯æ˜¯å¦æ‰“å°ä¿®æ”¹æˆåŠŸä¿¡æ¯ C++ä¿®æ”¹å…¶ä»–èŠ‚ç‚¹çš„å‚æ•° åˆ†åˆ«æ–°å»ºå®¢æˆ·ç«¯ç”¨äºå‘é€è¯·æ±‚ï¼Œä»¥åŠæ–°å»ºæ›´æ–°å‚æ•°å€¼å‡½æ•°ï¼Œä¸»å‡½æ•°è°ƒç”¨æ›´æ–°å‚æ•°å€¼å‡½æ•°å³å¯ï¼Œä»£ç ç¤ºä¾‹ä¸­ä¸»è¦æ˜¯è®¾ç½®kçš„å‚æ•°å€¼ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹å…¶ä»–å‚æ•°å€¼ç›´æ¥æ–°å»ºè®¾ç½®å‡½æ•°å³å¯ï¼Œä¸»è¦å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; #include \u0026#34;chapt4_interfaces/srv/patrol.hpp\u0026#34; #include \u0026lt;ctime\u0026gt; #include \u0026#34;rcl_interfaces/msg/parameter.hpp\u0026#34; #include \u0026#34;rcl_interfaces/msg/parameter_value.hpp\u0026#34; #include \u0026#34;rcl_interfaces/msg/parameter_type.hpp\u0026#34; #include \u0026#34;rcl_interfaces/srv/set_parameters.hpp\u0026#34; using SetP=rcl_interfaces::srv::SetParameters; using Patrol=chapt4_interfaces::srv::Patrol; using namespace std::chrono_literals; //å®šä¹‰ä¹‹åå¯ä»¥ä½¿ç”¨10s,100ms class PatrolClient:public rclcpp::Node { private: rclcpp::TimerBase::SharedPtr timer_; rclcpp::Client\u0026lt;Patrol\u0026gt;::SharedPtr patrol_client_; public: explicit PatrolClient(const std::string \u0026amp;node_name):Node(node_name) //åŠ å…¥explicitå…³é”®å­—æ˜¯é˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ æ­¤å¤„åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨èµ‹å€¼æ„é€ ï¼Œä½†æ˜¯ä¸è¦å…è®¸è¿™æ ·å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ { srand(time(NULL)); //åˆå§‹åŒ–éšæœºæ•°ç§å­ patrol_client_=this-\u0026gt;create_client\u0026lt;Patrol\u0026gt;(\u0026#34;patrol\u0026#34;); timer_=this-\u0026gt;create_wall_timer(10s,[\u0026amp;]()-\u0026gt;void{ //1.æ£€æµ‹æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while (!this-\u0026gt;patrol_client_-\u0026gt;wait_for_service(1s)) { if(!rclcpp::ok()) { RCLCPP_ERROR(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­ï¼ŒrclcppæŒ‚äº†ã€‚è‡£é€€ä¸‹äº†\u0026#34;); return; } RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­......\u0026#34;); } //2.æ„é€ è¯·æ±‚çš„å¯¹è±¡ auto request=std::make_shared\u0026lt;Patrol::Request\u0026gt;(); request-\u0026gt;target_x=rand()%12; request-\u0026gt;target_y=rand()%12; RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‡†å¤‡å¥½ç›®æ ‡ç‚¹ï¼š%f,%f\u0026#34;,request-\u0026gt;target_x,request-\u0026gt;target_y); //3.å‘é€è¯·æ±‚ this-\u0026gt;patrol_client_-\u0026gt;async_send_request(request,[\u0026amp;](rclcpp::Client\u0026lt;Patrol\u0026gt;::SharedFuture result_future)-\u0026gt;void{ auto response =result_future.get(); if(response-\u0026gt;result==Patrol::Response::SUCESS) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;è¯·æ±‚å·¡é€»ç›®æ ‡ç‚¹æˆåŠŸï¼\u0026#34;); } if(response-\u0026gt;result==Patrol::Response::FAIL) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;è¯·æ±‚å·¡é€»ç›®æ ‡ç‚¹å¤±è´¥....\u0026#34;); } }); }); } /* * åˆ›å»ºå®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œå¹¶ä¸”è¿”å›ç»“æœ */ SetP::Response::SharedPtr call_set_parameters(const rcl_interfaces::msg::Parameter \u0026amp;param) { auto param_client=this-\u0026gt;create_client\u0026lt;SetP\u0026gt;(\u0026#34;/turtle_control/set_parameters\u0026#34;); //1.æ£€æµ‹æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while (!param_client-\u0026gt;wait_for_service(1s)) { if(!rclcpp::ok()) { RCLCPP_ERROR(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…ç¬¬äºŒä¸ªset_paramæœåŠ¡ä¸Šçº¿ä¸­ï¼ŒrclcppæŒ‚äº†ã€‚è‡£é€€ä¸‹äº†\u0026#34;); return nullptr; } RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­......\u0026#34;); } //2.æ„é€ è¯·æ±‚çš„å¯¹è±¡ auto request=std::make_shared\u0026lt;SetP::Request\u0026gt;(); request-\u0026gt;parameters.push_back(param); //3.å‘é€è¯·æ±‚ auto furture=param_client-\u0026gt;async_send_request(request); rclcpp::spin_until_future_complete(this-\u0026gt;get_node_base_interface(),furture); auto response=furture.get(); return response; } /* * æ›´æ–°å‚æ•°å€¼ */ void update_server_param_k(double k) { //1.åˆ›å»ºä¸€ä¸ªå‚æ•°å¯¹è±¡ auto param=rcl_interfaces::msg::Parameter(); param.name=\u0026#34;k\u0026#34;; //2.åˆ›å»ºå‚æ•°å€¼ auto param_value=rcl_interfaces::msg::ParameterValue(); param_value.type=rcl_interfaces::msg::ParameterType::PARAMETER_DOUBLE; param_value.double_value=k; param.value=param_value; //3.è¯·æ±‚æ›´æ–°å‚èµ› auto response=this-\u0026gt;call_set_parameters(param); if(response==NULL) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‚æ•°è¿”å›å¤±è´¥\u0026#34;); return; } for(auto result:response-\u0026gt;results) { if(result.successful==false) { RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‚æ•°è¿”å›å¤±è´¥ï¼ŒåŸå› æ˜¯ï¼š%s\u0026#34;,result.reason.c_str()); } else{ RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;å‚æ•°è¿”å›æˆåŠŸ\u0026#34;); } } } }; int main(int argc,char* argv[]) { rclcpp::init(argc,argv); auto node =std::make_shared\u0026lt;PatrolClient\u0026gt;(\u0026#34;patrol_client_node\u0026#34;); node-\u0026gt;update_server_param_k(5.0); rclcpp::spin(node); rclcpp::shutdown(); } å†™å®Œåç¼–è¯‘ï¼Œå…ˆè¿è¡Œä¸Šä¸€èŠ‚çš„å‚æ•°å£°æ˜èŠ‚ç‚¹ï¼Œç„¶åå†è¿è¡Œæ–°å†™çš„ä¿®æ”¹å‚æ•°èŠ‚ç‚¹ï¼Œæ—¢å¯çœ‹åˆ°ç»ˆç«¯æ‰“å°çš„æ—¥å¿—å†…å®¹æ˜¯å¦æˆåŠŸæ£€æµ‹åˆ°æœåŠ¡ä¸Šçº¿ä»¥åŠæ˜¯å¦ä¿®æ”¹æˆåŠŸ ä½¿ç”¨launchæ–‡ä»¶\nç°åœ¨æƒ³è¦çš„åŠŸèƒ½åŒ…ä¸‹é¢æ–°å»ºlaunchæ–‡ä»¶å¤¹ï¼Œç„¶åå†launchæ–‡ä»¶å¤¹å†…æ–°å»ºä¸€ä¸ªdemo.launch.pyæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 import launch import launch_ros def generate_launch_description(): #æ­¤å‡½æ•°åæ˜¯å›ºå®šçš„ \u0026#34;\u0026#34;\u0026#34;äº§ç”Ÿlaunchæè¿°\u0026#34;\u0026#34;\u0026#34; action_node_turtlesim_node=launch_ros.actions.Node( package=\u0026#39;turtlesim\u0026#39;, executable=\u0026#39;turtlesim_node\u0026#39;, output=\u0026#39;screen\u0026#39; # è¾“å‡ºæ–¹å¼ä¸€ï¼šå±å¹• ) action_node_turtle_control=launch_ros.actions.Node( package=\u0026#39;demo_cpp_service\u0026#39;, executable=\u0026#39;turtle_control\u0026#39;, output=\u0026#39;log\u0026#39; # è¾“å‡ºæ–¹å¼äºŒï¼šæ—¥å¿—æ–‡ä»¶ ) action_node_patrol_client=launch_ros.actions.Node( package=\u0026#39;demo_cpp_service\u0026#39;, executable=\u0026#39;patrol_client\u0026#39;, output=\u0026#39;both\u0026#39; # è¾“å‡ºæ–¹å¼ä¸‰ï¼šä¸Šé¢ä¸¤ç§éƒ½è¦ ) return launch.LaunchDescription([ # actionsåŠ¨ä½œ action_node_turtlesim_node, action_node_turtle_control, action_node_patrol_client ]) éšåæ›´æ”¹æ‹·è´çš„æ„å»ºé…ç½®ï¼Œåœ¨C++ä¸­çš„cmakelistæ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢å†…å®¹æŒ‡å®šæ‹·è´çš„æ–‡ä»¶å¤¹åç§°å’Œæ–‡ä»¶è·¯å¾„å³å¯ï¼š 1 2 3 // install(DIRECTORY launch // DESTINATION share/${PROJECT_NAME} // ) åœ¨pythonä¸­çš„setup.pyä¸­æ·»åŠ ä¸‹é¢å†…å®¹ï¼ŒåŒæ ·æŒ‡å®šæ–‡ä»¶å¤¹å’Œæ–‡ä»¶è·¯å¾„ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 from setuptools import find_packages, setup from glob import glob # 1.å¼•å…¥æ­¤åŒ… package_name = \u0026#39;demo_python_service\u0026#39; setup( name=package_name, version=\u0026#39;0.0.0\u0026#39;, packages=find_packages(exclude=[\u0026#39;test\u0026#39;]), data_files=[ (\u0026#39;share/ament_index/resource_index/packages\u0026#39;, [\u0026#39;resource/\u0026#39; + package_name]), (\u0026#39;share/\u0026#39; + package_name, [\u0026#39;package.xml\u0026#39;]), (\u0026#39;share/\u0026#39; + package_name+\u0026#34;/resource\u0026#34;, [\u0026#39;resource/defult.jpg\u0026#39;]), (\u0026#39;share/\u0026#39; + package_name+\u0026#34;/resource\u0026#34;, [\u0026#39;resource/peoples.jpg\u0026#39;]), (\u0026#39;share/\u0026#39; + package_name+\u0026#34;/launch\u0026#34;, glob(\u0026#39;launch/*.launch.py\u0026#39;)), # 2.æ·»åŠ æŒ‡å®šè·¯å¾„ä»¥åŠæ–‡ä»¶ ], install_requires=[\u0026#39;setuptools\u0026#39;], zip_safe=True, maintainer=\u0026#39;robot\u0026#39;, maintainer_email=\u0026#39;robot@todo.todo\u0026#39;, description=\u0026#39;TODO: Package description\u0026#39;, license=\u0026#39;Apache-2.0\u0026#39;, tests_require=[\u0026#39;pytest\u0026#39;], entry_points={ \u0026#39;console_scripts\u0026#39;: [ \u0026#39;learn_face_detect=demo_python_service.learn_face_detect:main\u0026#39;, \u0026#39;face_detect_node=demo_python_service.face_detect_node:main\u0026#39;, \u0026#39;face_detect_client_node=demo_python_service.face_detect_client_node:main\u0026#39;, ], }, ) é…ç½®å¥½åå…ˆcolcon buildï¼Œéšåå†sourceå®Œï¼Œè¿è¡Œï¼šros2 launch åŠŸèƒ½åŒ…åï¼ˆåˆ›å»ºlaunchæ–‡ä»¶å¤¹çš„åŠŸèƒ½åŒ…ä½ç½®ï¼‰ demo.launch.py ä¹‹åå°±èƒ½çœ‹åˆ°é…ç½®çš„å¯¹åº”èŠ‚ç‚¹æˆåŠŸæ‰“å¼€ 4. å¿ƒå¾—æ€»ç»“ ç§»æ­¥å®Œè¿™ç¯‡ç¬”è®°å†…å®¹æ‰ç®—æ˜¯æŠŠæˆ‘æœ¬åœ°ç”µè„‘ä¸Šé‚£ä¸ªâ€œåŸå§‹äººçš„CMDç¬”è®°â€ç»™å®Œå…¨ç§»æ­¥å®ŒğŸ˜¥ï¼Œä¹Ÿç®—æ˜¯é€æ­¥çº æ­£è‡ªå·±çš„æ‹–å»¶ç—‡å’Œæ‡’äº†ğŸ˜©ã€‚å…¶å®Linuxçš„å­¦ä¹ æ„Ÿè§‰è¿˜æ˜¯æœ‰å¾ˆå¤šå®è·µå’Œæ“ä½œéœ€è¦åŠ¨æ‰‹è¾¹å­¦è¾¹è¿ç”¨æ‰èƒ½æ›´å¥½å¸æ”¶ï¼Œåé¢æ›´å¤šçš„è¿˜æ˜¯å¸¦å…¥å®é™…é¡¹ç›®ä¸­å»è¾¹å­¦è¾¹åšï¼è¿˜æœ‰åé¢éœ€è¦çš„ç»†åˆ†åœ¨Linuxç³»ç»Ÿä¸‹å…·ä½“åšä¾‹å¦‚éŸ³é¢‘ï¼Œç½‘ç»œç­‰ç­‰å¼€å‘å†æ ï¼Œå…ˆå­¦ä¹ è¿ç”¨åœ¨ROSæœºå™¨äººæ“ä½œç³»ç»Ÿä¸Šçš„å…·ä½“ä¾‹å¦‚è‡ªä¸»å¯¼èˆªï¼Œæ‰‹çœ¼æ ‡å®šæŠ“å–ç­‰ç­‰ï¼Œä¸€æ­¥ä¸€æ­¥æ€»ä¼šæ‰¾åˆ°å±äºè‡ªå·±æƒ³è¦çš„ğŸ¥±ğŸ¥±ğŸ¥±\n","date":"2025-09-13T00:00:00Z","image":"https://prominsegsj.github.io/p/linux_learn/2_hu_10a77e11c215a0af.png","permalink":"https://prominsegsj.github.io/p/linux_learn/","title":"ã€Linuxã€‘æ“ä½œç³»ç»Ÿçš„å­¦ä¹ "},{"content":"Githubçš„Gitä½¿ç”¨å­¦ä¹ ç¬”è®° å°é”…çš„Gitä½¿ç”¨ç¬”è®°è®°å½•ğŸ« (ä¸â€œã€Windosç³»ç»Ÿã€‘CMDå­¦ä¹ ä½¿ç”¨â€ç¬”è®°ä¸€åŒæŒªè¿‡æ¥çš„ğŸ¦Š)\n1. å¸¸ç”¨åŸºç¡€ Gitåˆå§‹åŒ–ï¼šgit initï¼ˆéœ€è¦å†å¯¹åº”æ–‡ä»¶ç›®å½•ä¸‹åˆå§‹åŒ–ï¼‰ æŸ¥çœ‹Gitä»“åº“çŠ¶æ€ï¼šgit status å°†æ–‡ä»¶æ”¾åˆ°ä¸­è½¬å­˜å‚¨åŒºï¼šgit add ï¼‹æ–‡ä»¶å(git add . (æ„æ€æ˜¯å°†å½“å‰æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº)) æäº¤åˆ°ä»“åº“ï¼šgit commitï¼ˆåªä¼šæäº¤æš‚å­˜åŒºçš„æ–‡ä»¶ä¹Ÿå°±æ˜¯æ ‡ç»¿çš„æ–‡ä»¶ï¼Œçº¢è‰²æ–‡ä»¶æ˜¯è¿˜æœªè¢«æ”¾åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ä¸ä¼šè¢«æäº¤ï¼‰ æ”¹æ–‡ä»¶åï¼šmvï¼‹è¦æ”¹çš„æ–‡ä»¶ï¼‹è¦æ”¹ä¸ºçš„åå­— æ‰¹é‡å°†æ–‡ä»¶æ”¾åˆ°æš‚å­˜åŒºï¼šadd *.æ–‡ä»¶æ ¼å¼ æŸ¥çœ‹æäº¤ä»“åº“è®°å½•ï¼šgit log å›é€€ç‰ˆæœ¬å‘½ä»¤ï¼šgit reset \u0026ndash;ä¸‰ç§æ¨¡å¼ æŸ¥çœ‹å½“å‰åˆ†æ”¯æƒ…å†µï¼šgit branch æ–°å»ºåˆ†æ”¯ï¼šgit branch åˆ†æ”¯å åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ï¼šgit checkout åˆ†æ”¯å æ–°å»ºåŠ åˆ‡æ¢ä¸€æ­¥åˆ°ä½ï¼šgit checkout -b åˆ†æ”¯å åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸Šï¼šgit merge éœ€è¦åˆå¹¶çš„åˆ†æ”¯å åˆ é™¤åˆ†æ”¯ï¼šgit branch -d åˆ†æ”¯åï¼ˆ-Dåˆ™ä¸ºå¼ºåˆ¶åˆ é™¤ï¼‰ ç»™å½“å‰å¼€å‘ä»£ç çŠ¶æ€åŠ ä¸Šæ ‡ç­¾ï¼šgit tag æ ‡ç­¾åï¼ˆä¾‹å¦‚ï¼šV1.0ï¼‰ åˆ‡æ¢åˆ°æƒ³è¦åˆ‡æ¢çš„æ ‡ç­¾çŠ¶æ€ï¼šgit checkout æ ‡ç­¾å 2. æäº¤å¹¶ä¸”ä¸Šä¼ åˆ°githubä»“åº“ä¸Šå¤§è‡´æµç¨‹ 2.1 é¦–æ¬¡æäº¤å¤§è‡´æµç¨‹ â†˜ï¸ 1.åœ¨éœ€è¦æäº¤æ–‡ä»¶ç›®å½•ä¸‹æ‰“å¼€git brash\nâ†˜ï¸ 2.git initï¼ˆåˆå§‹åŒ–æ–‡ä»¶å¤¹ä¸ºgitç®¡ç†ï¼‰\nâ†˜ï¸ 3.git add æ–‡ä»¶/.ï¼ˆå°†éœ€è¦æäº¤åˆ°ä»“åº“çš„æ–‡ä»¶æ”¾åˆ°æš‚å­˜åŒºï¼‰\nâ†˜ï¸ 4.git commit -m \u0026ldquo;(æ­¤æ¬¡æäº¤è®°å½•çš„å¤‡æ³¨)\u0026quot;\nâ†˜ï¸ 5.git branchï¼ˆæ£€æŸ¥å½“å‰æ‰€å¤„åˆ†æ”¯ï¼‰\nâ†˜ï¸ 6.git remote add origin ä»“åº“sshåœ°å€ï¼ˆåˆ›å»ºä¸€ä¸ªåä¸ºoriginçš„è¿œç¨‹ä»“åº“å¹¶ä¸”ä¸githubä¸Šçš„æŒ‡å®šä»“åº“è¿æ¥ï¼‰\nâ†˜ï¸ 7.git push -u origin main ï¼ˆæœ€åå°†å½“å‰mainåˆ†æ”¯çš„å·²commitçš„éƒ¨åˆ†pushåˆ°è¿œç¨‹ä»“åº“originä¸Šå³ä¸Šä¼ åˆ°githubä¸Šï¼‰\n2.2 ç–‘éš¾é—®é¢˜ é—®é¢˜1:åç»­ç¬¬äºŒæ¬¡ç­‰çš„æäº¤æ³¨æ„ é‡ç‚¹åœ¨åç»­ç‰ˆæœ¬çš„æäº¤æ—¶æˆ–è€…å¤šäººå¼€å‘æ—¶åº”è¯¥å…ˆï¼šgit pull origin main ï¼ˆåœ¨æäº¤ä¹‹å‰ä¹ æƒ¯æ€§éœ€è¦å…ˆæ›´æ–°æœ¬åœ°ä»“åº“è·Ÿè¿œç¨‹ä»“åº“åŒæ­¥ï¼Œè®°ä½æ˜¯åœ¨commitä¹‹å‰åŒæ­¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼‰å³ä½¿ç®€å•çš„é‡åˆ°å†å²æäº¤ä¸åŒ¹é…é—®é¢˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œï¼šgit pull è¿›è¡Œåˆå¹¶æ›´æ–° é—®é¢˜2:åˆ é™¤ç©ºçš„ originï¼ˆå¯é€‰ï¼‰ (ä¾‹). git remote remove origin é—®é¢˜3:å¼ºåˆ¶æ¨é€ï¼š (ä¾‹). git push -f origin main 3. å¿ƒå¾—æ€»ç»“ æ­¤ç¯‡ä¹Ÿæ˜¯åœ¨æˆ‘ä¹‹å‰çš„é‚£ç¯‡TXTæ–‡ä»¶é‡Œé¢è—ç€çš„åŸå§‹äººç¬”è®°ï¼Œæˆ‘æƒ³ç»™ä»–éš”å¼€æ¥å•ç‹¬ä½œä¸ºGitå­¦ä¹ çš„ç¬”è®°è®°å½•ã€‚Githubä½œä¸ºå…¨çƒæœ€å¤§çš„å¼€æºå¹³å°è¿˜æ˜¯å¾ˆå¤šåœ°æ–¹å¯ä»¥å­¦ä¹ ï¼Œæœ‰æµ·é‡çš„å…¨çƒä¼˜ç§€çš„å¼€æºä½œå“ï¼Œä¸ç®¡æ˜¯è‡ªå·±å­¦ä¹ ç”¨è¿˜æ˜¯åšé¡¹ç›®éƒ½åº”è¯¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨å’Œç®¡ç†è‡ªå·±çš„é¡¹ç›®ã€‚å¼€æºçš„æ€æƒ³æˆ‘è®¤ä¸ºä¹Ÿæ˜¯éå¸¸æ£’çš„è§‰æ‚Ÿæ€æƒ³(å¬è¯´å¥½åƒè¦æ•´æ”¹è¢«å¾®è½¯æ”¶è´­ï¼Œåé¢é£å‘ä¼šä¸ä¼šå˜ä¹Ÿä¸çŸ¥é“ï¼Œä½†æ˜¯æ„Ÿè§‰å¤§æ–¹å‘çš„å¼€æºæ ¸å¿ƒåº”è¯¥æ˜¯ä¸ä¼šå˜çš„å‘¢ğŸ§)ã€‚ä½œä¸ºå‘æ›´å¤šæ›´ä¼˜ç§€çš„äººå­¦ä¹ çš„ä¸€é¡¹å¿…å¤‡æŠ€èƒ½ï¼Œå¸Œæœ›å¤§å®¶(é‡ç‚¹Qè‡ªå·±)è¦å¥½å¥½å­¦ä¹ ï¼Œè¦åŠªåŠ›æå‡è‡ªå·±ï¼ğŸ˜\n","date":"2025-09-11T00:00:00Z","image":"https://prominsegsj.github.io/p/git_learn/1_hu_5f2d8854557f7f45.png","permalink":"https://prominsegsj.github.io/p/git_learn/","title":"ã€GitHubã€‘åŸºç¡€å­¦ä¹ "},{"content":"Windosç³»ç»Ÿä¸‹çš„cmd å°é”…çš„windosç»ˆç«¯ä½¿ç”¨è®°å½•ğŸ˜‡(æ‰©å±•åç»­äº†è§£å­¦ä¹ ä½¿ç”¨PowerShell)\n1. å¼€å¯æ™®é€šç»ˆç«¯CMD winï¼‹R é”®ç„¶åè¾“å…¥cmdæŒ‡ä»¤å¼€å¯ç»ˆç«¯çª—å£\n2. å¸¸ç”¨çš„ç»ˆç«¯æ“ä½œ åˆ é™¤ï¼š (1). åˆ é™¤æ–‡ä»¶å¤¹ï¼š rmdirï¼‹æ–‡ä»¶å¤¹åï¼ˆæ³¨æ„å’ŒdelåŒºåˆ†ï¼‰ æˆ–è€… rd æ–‡ä»¶å /sï¼ˆåé¦ˆé€‰æ‹©æ˜¯å¦åˆ é™¤éç©ºæ–‡ä»¶ï¼‰ æˆ–è€… rd æ–‡ä»¶å /q ï¼ˆä¸ä¼šåé¦ˆä»»ä½•ä¿¡æ¯ï¼Œå®‰é™åˆ é™¤ï¼‰ (2). åˆ é™¤æ–‡ä»¶ï¼šdelï¼‹æ–‡ä»¶ è·å–æ—¶é—´ (1). æ‰“å°å½“å‰æ—¥æœŸï¼šdate (2). æ‰“å°å½“å‰å…·ä½“æ—¶é—´ï¼štime å¤åˆ¶Â·å‰ªåˆ‡ (1). å¤åˆ¶æ–‡ä»¶å¤¹ï¼šcopy è¦å¤åˆ¶çš„æ–‡ä»¶ å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼ˆåªèƒ½å¤åˆ¶æ–‡ä»¶ï¼Œä¸èƒ½å¤åˆ¶æ–‡ä»¶å¤¹xcopyï¼‰ (2). å‰ªåˆ‡æ–‡ä»¶å¤¹ï¼šmove è¦å‰ªåˆ‡çš„æ–‡ä»¶å¤¹ åˆ°å“ªä¸ªæ–‡ä»¶å¤¹çš„ä½ç½® å›å£°æ“ä½œï¼š echo æ‰“å°æ–‡ä»¶å¤¹å†…å®¹ï¼š dir è½¬æ¢æ–‡ä»¶å¤¹ä½ç½®ï¼šæ–‡ä»¶å¤¹å: (æ­¤å¤„åé¢è¦çš„å†’å·è¦è®°å¾—åŠ ) è·³è½¬æ–‡ä»¶å¤¹ä½ç½®ï¼š cd æ‰“å¼€æ–‡ä»¶å¤¹å›¾å½¢ç•Œé¢ï¼š start åˆ›å»ºæ–‡ä»¶å¤¹ï¼š mkdir or md æ–‡ä»¶å è®¿é—®ä»ä¸åŒæ–‡ä»¶å¤¹çš„ä¸œè¥¿ï¼šdir èµ·å§‹æ–‡ä»¶å¤¹\\è¦æ‰“å°çš„æ–‡ä»¶å¤¹ é‡å‘½åï¼šren åŸæ–‡ä»¶å é‡å‘½ååçš„æ–‡ä»¶å æ¸…å±ç»ˆç«¯ä¹‹å‰çš„æ“ä½œï¼šcls 3. å°å¼€å…³ æ˜¾ç¤ºæŒ‡ä»¤çš„åŠŸèƒ½ä»¥åŠå¦‚ä½•ä½¿ç”¨å¯¹åº”æŒ‡ä»¤ï¼šæŒ‡ä»¤ï¼‹/ï¼Ÿ æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å¤¹åŒ…æ‹¬éšè—æ–‡ä»¶ï¼šdirï¼‹/a å¾ªç¯å¾€å¤çš„å°å¼€å…³ï¼šæŒ‡ä»¤ï¼‹/sï¼‹æ–‡ä»¶æˆ–è€…å…¶ä»–æ“ä½œ æ”¹å˜å˜é‡ï¼š (ä¾‹) pathï¼â€œpathâ€ï¼›æ–‡ä»¶è·¯å¾„ å®šå‘è¾“å‡ºï¼šéœ€è¦è¾“å‡ºçš„å†…å®¹ï¼‹ï¼è¦è¾“å‡ºçš„æ–‡ä»¶ (ï¼ï¼æ˜¯åˆ é™¤å†…å®¹çš„è¾“å‡º.å¦‚æœå®šå‘è¾“å‡ºåˆ°nulå¤„åˆ™ä¸ä¼šæœ‰ä»»ä½•æ˜¾ç¤ºï¼Œæ„æ€æ˜¯å€’å…¥åƒåœ¾æ¡¶) æ‰“å¼€æ–‡æœ¬æ–‡ä»¶ï¼štypeï¼‹æ–‡ä»¶ å®šå‘è¾“å…¥ï¼š (ä¾‹) moreï¼‹ï¼œåŠ æ–‡ä»¶ï¼ˆæŒ‰é¡µé¢å†…å®¹å—ä¸€é¡µä¸€é¡µæ˜¾ç¤ºï¼‰ æ¥åŠ›ç¬¦ï¼š| (ä¾‹) tasklist | more æ‰“å¼€è®¡ç®—å™¨ï¼šcalc äº†è§£æ‰€æœ‰è¿›ç¨‹ï¼štasklist ç»“æŸæŸä¸ªè¿›ç¨‹ï¼štaskkill /f /pid åºå· æ‰“å¼€æµè§ˆå™¨ï¼šstart msedge 4. åˆ›å»ºtxtæ–‡æœ¬æ–‡ä»¶ (1).echo. \u0026gt;æ–‡ä»¶å.txt (2).copy nul æ–‡ä»¶å.txt (3).type nul \u0026gt; æ–‡ä»¶å.txtï¼ˆæˆ–è€…å»ºå…¶ä»–æ–‡ä»¶æ ¼å¼éƒ½æ˜¯è¿™æ ·ï¼‰ 5. è¿›ç¨‹ç®¡ç†å‘½ä»¤ tasklist #æ˜¾ç¤ºè®¡ç®—æœºä¸Šè¿è¡Œçš„è¿›ç¨‹åˆ—è¡¨ã€‚ tasklist /V #æ˜¾ç¤ºè¯¦ç»†ä»»åŠ¡ä¿¡æ¯ã€‚ taskkill #æŒ‰ç…§è¿›ç¨‹IDï¼ˆPIDï¼‰æˆ–æ˜ åƒåç§°ç»ˆæ­¢ä»»åŠ¡ã€‚ taskkill /PID 1024 #åœæ­¢PID=1024 çš„è¿›ç¨‹ã€‚ taskkill /IM capiws.exe #åœæ­¢åç§°ä¸ºcapiwsçš„è¿›ç¨‹ã€‚ taskkill /F /PID 1024 #å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ã€‚ 6. ç”¨æˆ·ç®¡ç†å‘½ä»¤ net user #windowsè´¦æˆ·ç®¡ç†å·¥å…·ã€‚ net user guest #åˆ—å‡ºguestè´¦æˆ·çš„ä¿¡æ¯ã€‚ net user hacker 123456 /add #æ·»åŠ è´¦æˆ·ã€‚ net user hacker 888888 #ä¿®æ”¹å¯†ç ã€‚ net user hacker /active:yes|no #å¯ç”¨|ç¦ç”¨è´¦æˆ·ã€‚ net user hacker /delete #åˆ é™¤è´¦æˆ·ã€‚ 7. ç½‘ç»œç®¡ç†å‘½ä»¤ ipconfig #æ˜¾ç¤ºç½‘ç»œé…ç½®ä¿¡æ¯ã€‚ ipconfig /all #æ˜¾ç¤ºå®Œæ•´é…ç½®ä¿¡æ¯ã€‚ ipconfig /displaydns #æ˜¾ç¤ºDNSç¼“å­˜ã€‚ ipconfig /flushdns #æ¸…ç†DNSç¼“å­˜ã€‚ ç•ªå¤–Tipç¯‡ ollamaè·‘8bæ¨¡å‹ï¼š(å¥½åƒæ˜¯DSçƒ­é—¨é‚£ä¼šå„¿æˆ‘è¯•äº†ä¸€ä¸‹æœ¬åœ°éƒ¨ç½²DSï¼Œæ²¡åŠæ³•ç”µè„‘æ€§èƒ½ä¸è¡Œï¼Œå¸¦ä¸åŠ¨å¤šå¥½çš„æ¨¡å‹ï¼Œæ‰€ä»¥åªèƒ½ç©ä¸€ç©è¿™ä¸ª8bçš„è¶…ç¬¨æ¨¡å‹ğŸ˜‚ï¼Œç›¸å…³æ•™ç¨‹å¯ä»¥bç«™æœç´¢ï¼šollamaæœ¬åœ°éƒ¨ç½²DSï¼Œæˆ‘å°±ä¸è¡¥å……é…ç½®äº†ã€‚æƒå½“åšç¬”è®°è®°å½•ä½¿ç”¨äº†ğŸ˜œ) (ä¾‹). ollama run deepseek-r1:8b 8. å¿ƒå¾—æ€»ç»“ windosçš„cmdç»ˆç«¯çš„ä½¿ç”¨å¼€å‘è¿˜æ˜¯ä»…é™äºä¸Šè¿°çš„åŸºç¡€éƒ¨åˆ†çš„è¿ç”¨ï¼Œè¿˜æœ‰å¾ˆå¤šåŠŸèƒ½å’Œä½¿ç”¨æ²¡æœ‰\u0026quot;ç”¨åˆ°\u0026quot;ï¼Œç­‰åç»­æœ‰æ–°çš„ä½¿ç”¨æŠ€å·§æˆ‘å†æ›´æ–°åšç¬”è®°ä¸Šå»(ps:å®åˆ™æ˜¯å› ä¸ºè‡ªå·±å¤ªæ‡’ğŸ™‚â€â†•ï¸ğŸ™‚â€â†•ï¸ï¼Œåªèƒ½ç®—ä¸€ä¸ªå­¦ä¹ ç¬”è®°è®°å½•å§ï¼ŒæŠŠæˆ‘çš„é‚£ç¯‡åŸå§‹äººçš„TXTç¬”è®°æŒªè¿‡æ¥å•¦ğŸ˜…)ï¼!\n","date":"2025-09-11T00:00:00Z","image":"https://prominsegsj.github.io/p/windos_cmd_learn/3_hu_c53d1c5fe612bf14.jpg","permalink":"https://prominsegsj.github.io/p/windos_cmd_learn/","title":"ã€Windosç³»ç»Ÿã€‘CMDå­¦ä¹ ä½¿ç”¨"},{"content":"YOLOè§†è§‰å­¦ä¹  â†ªï¸åˆæ­¥æ¥è§¦æ·±åº¦å­¦ä¹ è§†è§‰æ£€æµ‹ï¼Œä¸»è¦ä¸ºå­¦ä¹ YOLOV8ä¸ºåˆæ­¥å…¥é—¨ä½¿ç”¨æ•™ç¨‹å­¦ä¹ ğŸ«£\n1. ç¯å¢ƒé…ç½® (å‘ç°åŸºæœ¬ä¸Šçš„å­¦ä¹ å†ç¨‹å¤§éƒ¨åˆ†éƒ½å¡åœ¨äº†ç¯å¢ƒæ­å»ºğŸ˜­ï¼Œæ‰€ä»¥æˆ‘å°½é‡æŠŠç¯å¢ƒæ­å»ºçš„ç»†èŠ‚å’Œæµç¨‹å†™è¯¦ç»†ä¸€ç‚¹ï¼)\n1.1 å®‰è£…miniconda å®‰è£…minicondaç‰ˆæœ¬ä¸ºpy38windosç‰ˆæœ¬:\nğŸ”¹https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/\nã€ä¸»è¦ç”¨äºè™šæ‹Ÿç¯å¢ƒçš„é…ç½®ï¼Œåœ¨pythonå¼€å‘ä¸­éƒ½å¯ä»¥ç”¨çš„åˆ°ã€‘\n1.2 è™šæ‹Ÿç¯å¢ƒæ­å»º (1) åœ¨condaç»ˆç«¯ä¸­æ–°å»ºä¸€ä¸ªåä¸ºyolov8çš„è™šæ‹Ÿç¯å¢ƒï¼ŒæŒ‡å®špythonç‰ˆæœ¬ä¸º3.8ï¼šconda create -n yolov8 python=3.8ã€æŒ‡å®špythonç‰ˆæœ¬ä½3.8ç‰ˆæœ¬ã€‘\n(2) æ¿€æ´»/åˆ‡æ¢åˆ°yolov8è™šæ‹Ÿç¯å¢ƒï¼šconda activate yolov8ï¼ˆè™šæ‹Ÿç¯å¢ƒåç§°ï¼‰\n1.3 é•œåƒæºé…ç½®(ä¸»è¦æ˜¯æ–¹ä¾¿æœ¬åœ°ä¸‹è½½) pypié…ç½®å›½å†…æ¸…åé•œåƒï¼šï¼ˆæ›¿æ¢ä¸ºé•¿æœŸï¼Œå°±æ˜¯å°†ä½ ä»¥åçš„pipå®‰è£…ä¸‹è½½çš„é€šé“æ”¹ä¸ºä»å›½å†…çš„é•œåƒæ¥ä¸‹è½½ï¼Œå¤§éƒ¨åˆ†çš„åº“æˆ–è€…å®‰è£…éƒ½æ˜¯åœ¨å›½å¤–ç½‘ç«™ï¼Œä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥æ›¿æ¢é•œåƒä¸ºæ¸…åæºï¼Œè¿˜æœ‰å…¶ä»–çš„ç±»ä¼¼çš„é˜¿é‡Œç­‰ç­‰ï¼‰\nğŸ”¹https://mirrors.tuna.tsinghua.edu.cn/help/pypi/\n1.4 pytorchç¯å¢ƒå®‰è£… pytorchç¯å¢ƒå®‰è£…ï¼šhttps://pytorch.org/ï¼ˆæ³¨æ„é€‰æ‹©åˆé€‚ç‰ˆæœ¬ï¼‰\n1.5å®‰è£…ultralyticsï¼ˆyolov8ï¼‰ï¼š (1) å®‰è£…zipæ€»æ–‡ä»¶ï¼š\nğŸ”¹https://github.com/ultralytics/ultralytics\n(2) ç»ˆç«¯è¿›å…¥æ–‡ä»¶å¤¹\\ultralytics-mainè¾“å…¥å‘½ä»¤ï¼špip install -e . ã€åé¢çš„ç‚¹è¦å¸¦ï¼ã€‘\nã€è¯¦ç»†ä»‹ç»è¿˜æ˜¯ä¸å¤Ÿçš„è¯å¯ä»¥å‚è€ƒæ­¤bç«™è§†é¢‘ğŸ¤—ğŸ¤—ã€‘ (3) ultralyticså®˜æ–¹æ–‡æ¡£:\nğŸ”¹https://docs.ultralytics.com/zh/ 2. æ¨¡å‹é¢„æµ‹åŠè®­ç»ƒä½¿ç”¨ 2.1 æ ‡æ³¨å›¾ç‰‡ç¯å¢ƒä¸‹è½½ (1) ä¸‹è½½labelimgï¼špip install labelimg (2) å¯åŠ¨labelimgï¼šlabelimg 2.2 è®­ç»ƒæ¨¡å‹ (1) æ ‡æ³¨å®Œæ–‡ä»¶å°†æ–‡ä»¶åˆ›å»ºå¥½ï¼š Train-é¡¹ç›®å images train:ï¼ˆå­˜æ”¾æ‰€æœ‰ç…§ç‰‡ï¼‰ val:ï¼ˆå­˜æ”¾éªŒè¯é›†ç…§ç‰‡ï¼‰ labels train:ï¼ˆå­˜æ”¾æ‰€æœ‰æ ‡æ³¨åçš„.txtï¼‰ val:ï¼ˆå­˜æ”¾éªŒè¯æ ‡å¿—.txtï¼‰ classes.txtï¼ˆæ ‡æ³¨ç§ç±»æ–‡ä»¶ï¼‰ (2) åˆ›å»ºå¥½æ”¾åˆ°Train-é¡¹ç›®åæ–‡ä»¶å°†æ–‡ä»¶æ”¾åˆ°datasetsæ–‡ä»¶å¤¹å†… (3) å†™å¥½ç›¸åº”çš„yamlæ–‡ä»¶ä¹‹åå¼€å§‹åˆ°tarin.pyæ–‡ä»¶å¡«å¥½ç›¸åº”çš„æ–‡ä»¶è·¯å¾„å’Œåç§°ï¼Œæœ€åå¼€å§‹è®­ç»ƒ é…ç½®.yamlæ–‡ä»¶ç¤ºä¾‹ 1 2 3 4 5 6 7 8 9 10 path: Train-é¡¹ç›®å train: images/train val: images/val test: #å¯é€‰é¡¹ names: 0: æ ‡æ³¨æ—¶ç¬¬ä¸€ä¸ªæ ‡æ³¨å¯¹è±¡åç§° 1: æ ‡æ³¨æ—¶ç¬¬äºŒä¸ªæ ‡æ³¨å¯¹è±¡åç§° nc: å¯¹è±¡ç§ç±»ä¸ªæ•° train.pyæ–‡ä»¶ç¤ºä¾‹ 1 2 3 4 5 6 7 from ultralytics import YOLO model = YOLO(\u0026#39;yolov8n.pt\u0026#39;) #å‚è€ƒé¢„æµ‹æ¨¡å‹æ–‡ä»¶ï¼Œå¦‚æœæ˜¯è‡ªå·±çš„å¯ä»¥æ”¾è‡ªå·±last.ptæ–‡ä»¶ç»§ç»­è®­ç»ƒ model.train(data=\u0026#39;é…ç½®.yaml\u0026#39;,workers=0,epochs=50,batch=16)#åé¢å‚æ•°å¯è‡ªè¡Œæ ¹æ®è®­ç»ƒç¡¬ä»¶é…ç½®é€‰æ‹© print(\u0026#34;è®­ç»ƒå®Œæˆï¼\u0026#34;) (4) è®­ç»ƒå®Œæœ€ç»ˆæ¨¡å‹æ–‡ä»¶å­˜æ”¾åœ¨runs/detect/trainxx/weights/xxx.pt 2.3 è·‘è®­ç»ƒæ¨¡å‹æ•ˆæœ ç®€å•ä½¿ç”¨ç¤ºä¾‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 from ultralytics import YOLO yolo = YOLO(\u0026#34;./best.pt\u0026#34;) # å°ç›®æ ‡æ£€æµ‹ä¸“ç”¨é…ç½® result =yolo( source=\u0026#34;./detect_Text/Player.mp4\u0026#34;, show=True, conf=0.05, # ä½ç½®ä¿¡åº¦ imgsz=1280, # å¤§å°ºå¯¸è¾“å…¥ iou=0.4, # è¾ƒä½çš„IoUé˜ˆå€¼ max_det=100, # å¢åŠ æœ€å¤§æ£€æµ‹æ•°é‡ agnostic_nms=False, # ç±»ç›¸å…³çš„NMS augment=True, # æµ‹è¯•æ—¶å¢å¼º ) # for i in result: # print(i.boxes.xywh.cpu().numpy()) 3. æœ€ç»ˆè®­ç»ƒæ•ˆæœå±•ç¤º ä¸‹é¢æ˜¯æˆ‘è®­ç»ƒYOLOv8æ¨¡å‹åçš„æ£€æµ‹æ•ˆæœç…§ç‰‡ï¼š(ç”¨çš„æ˜¯æˆ‘æœ‹å‹ä¹‹å‰åœ¨äººæ°‘å…¬å›­è·Ÿå¤§çˆ·ä¸€èµ·è¸¢æ¯½å­çš„è§†é¢‘ï¼Œæ­¤å¤„è‚–åƒæƒçœç•¥ç•¥ç•¥ç•¥ğŸ˜ğŸ˜ğŸ˜ï¼Œè§†é¢‘å¤ªå¤§ä¼ ä¸ä¸Šå»ï¼Œåˆä¸æƒ³ä¸Šä¼ åˆ°åœ°æ–¹æ‰˜ç®¡ï¼Œæ‰€ä»¥åªå–äº†å…¶ä¸­ä¸€å¼ ç…§ç‰‡)\nè§†é¢‘ï¼šYOLOv8æ¨¡å‹åœ¨è‡ªå®šä¹‰æ•°æ®é›†ä¸Šçš„æ£€æµ‹æ•ˆæœ,æ•°æ®é›†æˆ‘è®­ç»ƒçš„æ¯”è¾ƒå°‘,æœ€ç»ˆçš„è§†é¢‘æ•ˆæœä¸€èˆ¬,åé¢éœ€è¦çš„è¯è¿˜æ˜¯å¢å¤§æ•°æ®è®­ç»ƒé›†\n4. å­¦ä¹ å¿ƒå¾—æ€»ç»“ ğŸ”…åˆæ­¥æ•´ä¸ªå­¦ä¹ å†ç¨‹ä¸‹æ¥è¿˜æ˜¯åœ¨é…ç½®è®­ç»ƒç¯å¢ƒï¼Œä¸»è¦æ˜¯å­¦ä¹ åˆ°windosç³»ç»Ÿä¸‹çš„è™šæ‹Ÿç¯å¢ƒçš„é…ç½®ï¼Œè¿˜æœ‰yolov8ä¸»è¦è®­ç»ƒæµç¨‹è¿˜æœ‰æ‰“æ ‡å·¥å…·labelimgä¸‹è½½ç­‰ç­‰ã€‚è¯¦ç»†çš„ç³»ç»Ÿæ·±åº¦å­¦ä¹ è¿˜æœ‰å…¶ä»–çš„æ ‡æ³¨å·¥å…·å¯ä»¥å‚è€ƒå°åœŸå †upã€‚åé¢è¿˜æœ‰æ›´æ·±åº¦çš„å…·ä½“å¦‚ä½•å®ç°æ·±åº¦å­¦ä¹ çš„æ–¹æ³•ï¼Œå·ç§¯ç­‰ç­‰ç®—æ³•å®ç°å¯ä»¥ä¸ºåç»­æ·±å…¥åœ°å­¦ä¹ äº†è§£ã€‚è¿˜æœ‰åé¢å¦‚ä½•å°†YOLOè§†è§‰å…·ä½“åº”ç”¨åˆ°ç±»ä¼¼ROSä¸Šï¼Œå¦‚ä½•è§†è§‰å’Œåº•ç›˜æˆ–è€…æœºæ¢°è‡‚ç­‰ååŒå·¥ä½œçš„æµç¨‹è¿˜è¦ç»§ç»­å­¦ä¹ ç ”ç©¶ï¼æœ¬ç¯‡åªä½œä¸ºåˆæ­¥å…¥é—¨å­¦ä¹ ä½¿ç”¨YOLOğŸ˜Š.\n","date":"2025-09-01T00:00:00Z","image":"https://prominsegsj.github.io/p/yolo/1_hu_9bad58c53e2ff1d6.png","permalink":"https://prominsegsj.github.io/p/yolo/","title":"ã€æœºå™¨è§†è§‰ã€‘yoloè§†è§‰æ£€æµ‹"},{"content":"æ­å»ºÂ·å†ç¨‹ æ—¶é—´çº¿ï¼š 2025å¹´ï¼š\nğŸ”œ 08/25 (å¼€å§‹æ­å»ºï¼Œåˆæ­¥å‘å¸ƒå’Œéƒ¨ç½²Github)\nğŸ”œ 08/26 (å¼€å§‹ä¼˜åŒ–æ¡†æ¶ç•Œé¢ï¼Œå¤´åƒã€ç½‘ç«™å›¾æ ‡ã€æ–‡å­—å­—ä½“ç­‰)\nğŸ”œ 08/27 (é€æ­¥å¢åŠ èƒŒæ™¯ç²’å­æ•ˆæœå’Œåº•éƒ¨åŠ¨ç”»æ•ˆæœï¼Œæ–‡ç« Tileå±…ä¸­ç­‰ç­‰)\nğŸ”œ 08/28 (æ›´æ–°ä¼˜åŒ–Htmlç•Œé¢ï¼Œæœç´¢åŠé“¾æ¥æ çš„å¸ƒå±€æ’ç‰ˆï¼Œç½‘ç«™ç•Œé¢å…ƒç´ åŠ¨ç”»ç­‰)\n1. é—®é¢˜ 1.åˆæ­¥å‘å¸ƒå’Œéƒ¨ç½²Github\n2.ä¸»è¦çš„ç½‘ç«™æ˜¾ç¤ºé—®é¢˜å’Œä¼˜åŒ–ç•Œé¢\n3.å¦‚ä½•æ–°å»ºå’Œå‘å¸ƒç¼–å†™è‡ªå·±çš„æ–‡ç« \n2. è§£å†³è¿‡ç¨‹ 2.1 æ ¸å¿ƒæ­å»ºå­¦ä¹  ä¸»è¦å­¦ä¹ bç«™upä¸»ï¼ˆæ­¤å¤„è´´çš„ä»–ä¸ªäººç½‘ç«™çš„é‚£ç¯‡åšå®¢ï¼‰ï¼šå‚è€ƒBç«™UPä¸»çš„ä¸ªäººåšå®¢ç½‘ç«™\n2.2 ç½‘ç«™Logoæ˜¾ç¤ºé—®é¢˜ ç½‘ç«™çš„faviconæ²¡æœ‰æ˜¾ç¤ºé—®é¢˜å‚è€ƒï¼šfaviconæ˜¾ç¤ºå‚è€ƒç½‘å€\n2.3 åŠ¨æ€èƒŒæ™¯æ•ˆæœ åœ¨æ·»åŠ åŠ¨æ€èƒŒæ™¯æ—¶ç²’å­æ•ˆæœä¸€ç›´åŠ è½½ä¸æˆåŠŸï¼Œç”¨bç«™upä¸»çš„æºç å¤åˆ¶å‘ç°ä¸è¡Œï¼Œåé¢æ¢è·¯å¾„å°±å¯ä»¥äº†ã€‚\n2.4 Markdownåšå®¢ç¼–å†™ æ·»åŠ å›¾ç‰‡ï¼š æ·»åŠ è§†é¢‘ï¼š(æ·»åŠ è§†é¢‘çš„å¤§å°å®¹æ˜“è¶…è¿‡100MBï¼Œä¸Šä¼ Githubå®¹æ˜“å¤±è´¥ï¼Œå°½é‡å°†éœ€è¦ä¸Šåˆ›çš„è§†é¢‘æ‰˜ç®¡åˆ°ç±»ä¼¼Bç«™ç­‰è§†é¢‘å¹³å°) 1 2 3 4 \u0026lt;video width=\u0026#34;100%\u0026#34; controls poster=\u0026#34;å°é¢ç…§ç‰‡.jpg\u0026#34;\u0026gt; \u0026lt;source src=\u0026#34;è§†é¢‘åç§°.mp4\u0026#34; type=\u0026#34;video/mp4\u0026#34;\u0026gt; æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒVideoæ ‡ç­¾ï¼Œè¯·å°è¯•ä½¿ç”¨ç°ä»£æµè§ˆå™¨æŸ¥çœ‹ã€‚ \u0026lt;/video\u0026gt; æ–‡ç« å†™æ³•ï¼š æ–‡å­—å†…å®¹ç¤ºä¾‹ï¼š åŠ ç²— æ–œä½“ åˆ é™¤çº¿ ä»£ç å†™æ³•ç¤ºä¾‹ï¼š åœ¨Markdowné‡Œç”¨ä¸‰ä¸ªåå¼•å·å¼€å¯/å…³é—­ä»£ç å—ã€‚æŒ‡å®šè¯­è¨€å,Hugo ä¼šè‡ªåŠ¨é«˜äº®ã€‚ ä¾‹1ï¼špython 1 2 def hello(): print(\u0026#34;Hello Hugo!\u0026#34;) ä¾‹2ï¼šc++ 1 2 3 4 5 6 #include \u0026lt;iostream\u0026gt; using namespace std; int main() { cout \u0026lt;\u0026lt; \u0026#34;Hello, Hugo!\u0026#34; \u0026lt;\u0026lt; endl; return 0; } æ¢è¡Œç¤ºä¾‹ï¼š (1).ä¸¤ä¸ªç©ºæ ¼ï¼‹å›è½¦ 1 2 è¿™æ˜¯ç¬¬ä¸€è¡Œï¼ˆç»“å°¾æœ‰ä¸¤ä¸ªç©ºæ ¼ï¼‰ è¿™æ˜¯ç¬¬äºŒè¡Œ (2).ç©ºä¸€è¡Œ 1 2 3 è¿™æ˜¯ç¬¬ä¸€æ®µ è¿™æ˜¯ç¬¬äºŒæ®µï¼ˆä¸­é—´æœ‰ç©ºè¡Œï¼‰ (3).HTMLæ¢è¡Œæ ‡ç­¾ 1 2 3 è¿™æ˜¯ç¬¬ä¸€è¡Œ\u0026lt;br\u0026gt; è¿™æ˜¯ç¬¬äºŒè¡Œ\u0026lt;br\u0026gt; è¿™æ˜¯ç¬¬ä¸‰è¡Œ GitHubé£æ ¼çš„å—å¼•ç”¨Alertsï¼š å‚è€ƒå¼•ç”¨Alertså­¦ä¹ æ–‡ç« \n2.3 linkæ ä¿®æ”¹ 2.3.1 åˆ é™¤ä¸Šæ–¹å¤šä½™æ–‡ç«  å°†æŠ€æœ¯é“¾æ¥ä¸Šé¢çš„æ–‡ç« æ å»æ‰ï¼šåœ¨link.mdæ–‡ç« å¢åŠ ï¼Œç„¶åå†æ–°å¢çš„links.htmlæ–‡ä»¶ä¸­æ·»å¥½ç›¸å…³ä»£ç \n2.3.2 ä¿®æ”¹æ˜¾ç¤ºåˆ—è¡¨ æŠ€æœ¯é“¾æ¥æ”¹è¡Œæ•°ï¼šmy_web\\assets\\scss\\custom.scss\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 @media (min-width: 1024px) { .article-list--compact { display: grid; /* ç›®å‰æ˜¯ä¸¤åˆ—ï¼Œå¦‚éœ€ä¸‰åˆ—ï¼Œåˆ™åé¢å†åŠ ä¸€ä¸ª1frï¼Œä»¥æ­¤ç±»æ¨ */ grid-template-columns: 1fr 1fr; background: none; box-shadow: none; gap: 1rem; article { background: var(--card-background); border: none; box-shadow: var(--shadow-l2); margin-bottom: 8px; margin-right: 8px; border-radius: 16px; } } } 2.4 åšå®¢Tileå±…ä¸­ æ›´æ”¹ä¸»é¡µçš„æ–‡ç« æ ‡é¢˜åŠå†…å®¹å±…ä¸­æ–‡ä»¶è·¯å¾„:assets\\scss\\custom.scss\n2.5 ä¼˜åŒ–ç½‘ç«™æ˜¾ç¤º 2.5.1 ç½‘ç«™è¿è¡Œæ—¶é—´ å¢åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ï¼šlayouts\\partials\\footer.html\n2.5.2 ç½‘é¡µå…ƒç´ åŠ¨ç”» ç»™ç½‘é¡µå…ƒç´ æ·»åŠ åŠ¨ç”»ï¼šassets\\scss\\custom.scss\n2.5.3 ç›®å½•æ˜¾ç¤ºä¼˜åŒ– å°†ç›®å½•çš„è‡ªåŠ¨æ’åºå–æ¶ˆï¼šhugo.yamlæ–‡ä»¶å†…ä¿®æ”¹orderedå‚æ•°\n2.6 æ–°å¢é¡¹ç›®æ  æ–°å¢ä¸€ä¸ªé¡¹ç›®æ ï¼šå…ˆåœ¨content\\pageé¡¹ç›®æ é‡Œæ–°å¢ä¸€ä¸ªæ ç›®åç§°ï¼Œç„¶åæ·»åŠ mdæ–‡ä»¶ã€‚\nç¼–å†™å¥½mdåä¸ºå®ƒåœ¨layouts\\page\\å¢åŠ å¥½å¯¹åº”åç§°çš„htmlå¸ƒå±€æ–‡ä»¶å°±å¯ä»¥äº†ã€‚\nä¸éœ€è¦æ›´æ”¹å…¶ä»–å…³è”ï¼Œhugoä¼šè‡ªåŠ¨è¯†åˆ«å¹¶ä¸”è¿æ¥ä½¿ç”¨ï¼Œä¸»è¦ç¡®ä¿layoutå±æ€§æŒ‚åˆ°htmlæ–‡ä»¶å°±å¯ä»¥\n2.7 ä¿®æ”¹æ–‡å­—æ˜¾ç¤º ä¿®æ”¹ä¸»é¡µæ åç§°ï¼šcontent_index.zh-cn.md\n2.8 æ–°å»ºåšå®¢æ–‡ç«  æ–°åˆ›å»ºä¸€ç¯‡åšå®¢æ–‡ç« ï¼šç»ˆç«¯å‘½ä»¤æ‰§è¡Œï¼šhugo new post\\æ–°æ–‡ç« åç§°\\index.mdç”Ÿæˆåç¼–å†™å³å¯\næ€»ç»“å¿ƒå¾— å¿ƒå¾—æˆ‘å†™åœ¨äº†8/28ï¼Œè¿™å‡ å¤©éƒ½åœ¨åšè¿™ä¸ªç½‘ç«™ï¼Œåˆæ­¥èƒ½çœ‹äº†æ‰å¼€å§‹ç¼–å†™è¿™ç¯‡å†…å®¹ï¼Œæœ¬äººä¸“ä¸šæ˜¯è½¯ä»¶ä½†æ˜¯å­¦æ ¡è¯¾ç¨‹å­¦çš„éå¸¸å°‘ï¼ŒåŸºæœ¬éƒ½æ˜¯æœŸæœ«ä¸€å‘¨æé™â€œé¢„ä¹ â€ï¼Œä½åˆ†é£˜è¿‡åŠæ ¼çº¿ã€‚(åœ¨è¿™é‡Œæˆ‘è¦éå¸¸éå¸¸æ„Ÿè°¢ä¸€ä¸‹æˆ‘çš„è‹±è¯­è€å¸ˆï¼Œå¤§è‹±ä¸€åˆ°å››ï¼Œæäº†æˆ‘æ•´æ•´å››ä¸ªå­¦æœŸï¼ŒçœŸçš„ä¸å¤¸å¼ ï¼Œ3ä¸ªå­¦æœŸ60åˆ†ï¼)æœºç¼˜å·§åˆæˆ‘èµ°äº†åµŒå…¥å¼ï¼ŒåŠ äº†å­¦æ ¡çš„æœºå™¨äººå·¥ä½œå®¤ï¼Œä¹Ÿç®—æ˜¯2å¹´å…¥é—¨(åé¢æˆ‘æƒ³å•ç‹¬ä¼šå†™ä¸€ç¯‡åšå®¢æ¥çºªå¿µä¸€ä¸‹æˆ‘é€å»çš„è¿™ä¸¤å¹´)ï¼Œä½†æ˜¯æœ¬äººå…¶ä¸­åœ¨å·¥ä½œå®¤æˆ–è€…è¯´è¿™ä¸ªæ¯”èµ›çš„ç»å†éå¸¸åå·ï¼Œåé¢ä¼šåœ¨é‚£ç¯‡æ–‡ç« è¯¦ç»†èŠèŠã€‚è¯´å®è¯è¿™ä¸ªç½‘ç«™æ­çš„æˆ‘éå¸¸è‰°è¾›ï¼ŒåŸºæœ¬ä¸Šä¸æ˜¯åœ¨ä¿®BUGï¼Œæ‰¾èµ„æ–™ï¼Œå°±æ˜¯åœ¨é—®AIæ€ä¹ˆåšï¼Œå› ä¸ºæˆ‘å¯¹å‰ç«¯å¯ä»¥è¯´æ˜¯ä¸€ç‚¹çŸ¥è¯†æ²¡æœ‰ï¼Œè™½ç„¶å¥½åƒä¸Šä¸ªå­¦æœŸåˆšå­¦è¿‡JAVAï¼Œä½†æ˜¯å‰é¢æˆ‘ç»™è‡ªå·±å äº†ç”²ï¼ä½†æ˜¯è¿˜æ˜¯åšæŒæ­äº†ä¸‹å»ï¼Œå› ä¸ºæˆ–è®¸æˆ‘å¯ä»¥åœ¨è¿™é‡Œå†™ä¸€äº›æˆ‘æƒ³è¯´çš„è¯ï¼Œæƒ³è®°å½•ä¸€ä¸‹æˆ‘çš„ç”Ÿæ´»å’Œå†…å®¹ã€‚å¸Œè¿™ä¸ªç½‘ç«™æˆ‘ä¼šä¸€ç›´åšæŒå’Œç»´æŠ¤çš„ã€‚è¿˜æƒ³èµ·æ¥æˆ‘åˆ°æ—¶å€™ä¹Ÿè¦è®°ä¸€ç¯‡æˆ‘å–œæ¬¢å¬çš„éŸ³ä¹æˆé•¿å†ç¨‹åšå®¢ï¼Œåœ¨è¿™é‡Œå…ˆç»™è‡ªå·±æ ‡è®°ä¸€ä¸‹ï¼ğŸ˜‡ğŸ˜‡ä»¥åæˆ‘ä¼°è®¡æˆ‘ä¼šå¸¸å¸¸æ›´æ–°æˆ‘çš„æ—¥å¸¸ï¼Œè¿˜æœ‰æƒ³èµ·æ¥æˆ‘å­¦äº†è¿™ä¹ˆå¤šä¸œè¥¿æ€»è¦æœ‰ä¸ªè®°å½•å¤‡ä»½å‘ï¼Œæ‰€ä»¥è¿™ä¸ªç½‘ç«™å°±å¿…ç„¶çš„è¥è¿è€Œç”Ÿå’¯ï¼\u0026ldquo;æ‚¦å·±ï¼Œè¶Šå·±ï¼\u0026rdquo;\n","date":"2025-08-27T00:00:00Z","image":"https://prominsegsj.github.io/p/my-first-blog/5_hu_ba930173166397ba.jpg","permalink":"https://prominsegsj.github.io/p/my-first-blog/","title":"ç¬¬ä¸€ç¯‡åšå®¢"},{"content":"","date":"2024-01-01T00:00:00Z","permalink":"https://prominsegsj.github.io/p/match_life/","title":"ã€è‡´ã€‘å¤§ä¸€åˆ°å¤§äºŒçš„å‚èµ›å†ç»ƒğŸ’¤"},{"content":"","date":"2024-01-01T00:00:00Z","permalink":"https://prominsegsj.github.io/p/my_song_life/","title":"ã€è‡´ã€‘æˆ‘çš„éŸ³ä¹å†å²ğŸ«¡"}]